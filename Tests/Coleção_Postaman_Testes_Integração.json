{
	"info": {
		"_postman_id": "baabb897-233d-4fa8-b0df-8b59ce6130ce",
		"name": "Tests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "44596501",
		"_collection_link": "https://ldsv20.postman.co/workspace/LDS-Workspace~54b6c1b3-901d-43fe-8182-932e41a0cd50/collection/49140298-baabb897-233d-4fa8-b0df-8b59ce6130ce?action=share&source=collection_link&creator=44596501"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Login",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Admin CAA 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"filipe@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login password incorreta",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 (Unauthorized)\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response body contains expected error structure\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"status\", 401);\r",
											"    pm.expect(jsonData).to.have.property(\"message\");\r",
											"    pm.expect(jsonData).to.have.property(\"details\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message does not expose sensitive details\", function () {\r",
											"    const msg = pm.response.json().message.toLowerCase();\r",
											"    pm.expect(msg).not.to.include(\"hash\");\r",
											"    pm.expect(msg).not.to.include(\"encryption\");\r",
											"    pm.expect(msg).not.to.include(\"password policy\");\r",
											"});\r",
											"\r",
											"pm.test(\"No token is returned in error response\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).not.to.have.property(\"token\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{ \"email\": \"bob@test.com\", \"password\": \"WrongPass\" }\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login email inexistente",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 (Unauthorized)\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response body follows expected error format\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"status\", 401);\r",
											"    pm.expect(jsonData).to.have.property(\"message\");\r",
											"    pm.expect(jsonData).to.have.property(\"details\");\r",
											"});\r",
											"\r",
											"pm.test(\"Message is generic and does not reveal user existence\", function () {\r",
											"    const msg = pm.response.json().message.toLowerCase();\r",
											"    pm.expect(msg).not.to.include(\"email\");\r",
											"    pm.expect(msg).not.to.include(\"exists\");\r",
											"    pm.expect(msg).not.to.include(\"not found\");\r",
											"});\r",
											"\r",
											"pm.test(\"No authentication token returned\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).not.to.have.property(\"token\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{ \"email\": \"ghost@unknown.com\", \"password\": \"Pa$$w0rd\" }",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Register",
					"item": [
						{
							"name": "Register User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.environment.set(\"duplicateEmail\", pm.request.body.raw.match(/\"email\":\\s*\"(.*?)\"/)[1]);\r",
											"pm.test(\"User registered successfully\", function () {\r",
											"  pm.response.to.have.status(201);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Joana Silva\",\r\n  \"birthDate\": \"2001-05-17\",\r\n  \"street\": \"Rua das Flores 15\",\r\n  \"city\": \"Porto\",\r\n  \"postalCode\": \"4000-223\",\r\n  \"email\": \"joana.silva@example.com\",\r\n  \"password\": \"Pa$$w0rd\",\r\n  \"selectedRole\": \"User\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/account/register",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"account",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "Register User With Same Email",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail due to duplicate email\", () => {\r",
											"  pm.response.to.have.status(400);\r",
											"  const txt = pm.response.text().toLowerCase();\r",
											"  pm.expect(txt).to.include(\"taken\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"if (!pm.environment.get(\"duplicateEmail\")) {\r",
											"  throw new Error(\"Var 'duplicateEmail' n√£o est√° definida. Corre o 'Register User' primeiro.\");\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Joana Silva\",\r\n  \"birthDate\": \"2001-05-17\",\r\n  \"street\": \"Rua das Flores 15\",\r\n  \"city\": \"Porto\",\r\n  \"postalCode\": \"4000-223\",\r\n  \"email\": \"{{duplicateEmail}}\",\r\n  \"password\": \"Pa$$w0rd\",\r\n  \"selectedRole\": \"User\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/account/register",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"account",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "Register User Low Password",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail because password is too weak\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    const body = pm.response.json();\r",
											"    const errors = body.errors?.Password?.map(e => e.toLowerCase()).join(\" \") ?? \"\";\r",
											"\r",
											"    pm.expect(errors).to.include(\"6 characters\");\r",
											"    pm.expect(errors).to.include(\"uppercase\");\r",
											"    pm.expect(errors).to.include(\"number\");\r",
											"    pm.expect(errors).to.include(\"special character\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Joana Silva\",\r\n  \"birthDate\": \"2001-05-17\",\r\n  \"street\": \"Rua das Flores 15\",\r\n  \"city\": \"Porto\",\r\n  \"postalCode\": \"4000-223\",\r\n  \"email\": \"joana.silva@example.com\",\r\n  \"password\": \"abc\",\r\n  \"selectedRole\": \"User\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/account/register",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"account",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "Register User InvalidRole",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail because role is invalid\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    const json = pm.response.json();\r",
											"    const errors = json.errors?.SelectedRole?.join(\" \").toLowerCase() ?? \"\";\r",
											"\r",
											"    pm.expect(errors).to.include(\"user\");\r",
											"    pm.expect(errors).to.include(\"admincaa\");\r",
											"    pm.expect(errors).to.include(\"must be either\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Joana Silva\",\r\n  \"birthDate\": \"2001-05-17\",\r\n  \"street\": \"Rua das Flores 15\",\r\n  \"city\": \"Porto\",\r\n  \"postalCode\": \"4000-223\",\r\n  \"email\": \"joana.silva@example.com\",\r\n  \"password\": \"Pa$$w0rd\",\r\n  \"selectedRole\": \"InvalidRole\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/account/register",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"account",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "Register CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should succeed and return 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Response should include user properties\", function () {\r",
											"    const json = pm.response.json();\r",
											"    pm.expect(json).to.have.property(\"email\");\r",
											"    pm.expect(json).to.have.property(\"name\");\r",
											"    pm.expect(json).to.have.property(\"birthDate\");\r",
											"    pm.expect(json).to.have.property(\"street\");\r",
											"    pm.expect(json).to.have.property(\"city\");\r",
											"    pm.expect(json).to.have.property(\"postalCode\");\r",
											"    pm.expect(json).to.have.property(\"role\", \"AdminCAA\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response should include shelter information\", function () {\r",
											"    const json = pm.response.json();\r",
											"\r",
											"    pm.expect(json).to.have.property(\"shelter\");\r",
											"    pm.expect(json.shelter).to.have.property(\"id\");\r",
											"    pm.expect(json.shelter).to.have.property(\"name\");\r",
											"    pm.expect(json.shelter).to.have.property(\"street\");\r",
											"    pm.expect(json.shelter).to.have.property(\"city\");\r",
											"    pm.expect(json.shelter).to.have.property(\"postalCode\");\r",
											"    pm.expect(json.shelter).to.have.property(\"phone\");\r",
											"    pm.expect(json.shelter).to.have.property(\"nif\");\r",
											"    pm.expect(json.shelter).to.have.property(\"openingTime\");\r",
											"    pm.expect(json.shelter).to.have.property(\"closingTime\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Ana Costa\",\r\n  \"birthDate\": \"1995-07-14\",\r\n  \"street\": \"Rua Santos Lima 10\",\r\n  \"city\": \"Braga\",\r\n  \"postalCode\": \"4705-532\",\r\n\r\n  \"email\": \"ana.costa@example.com\",\r\n  \"password\": \"Pa$$w0rd\",\r\n  \"selectedRole\": \"AdminCAA\",\r\n\r\n  \"shelterName\": \"Abrigo S√£o L√°zaro\",\r\n  \"shelterStreet\": \"Rua das Flores 8\",\r\n  \"shelterCity\": \"Braga\",\r\n  \"shelterPostalCode\": \"4700-311\",\r\n  \"shelterPhone\": \"253987654\",\r\n  \"shelterNIF\": \"509123456\",\r\n  \"shelterOpeningTime\": \"09:00\",\r\n  \"shelterClosingTime\": \"18:00\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/account/register",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"account",
										"register"
									]
								}
							},
							"response": []
						},
						{
							"name": "Register CAA Missing ShelterFields",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail because required shelter fields are missing\", () => {\r",
											"  pm.response.to.have.status(400);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"name\": \"Ana Costa\",\r\n  \"birthDate\": \"1995-07-14\",\r\n  \"street\": \"Rua Santos Lima 10\",\r\n  \"city\": \"Braga\",\r\n  \"postalCode\": \"4705-532\",\r\n\r\n  \"email\": \"ana.costa@example.com\",\r\n  \"password\": \"Pa$$w0rd\",\r\n  \"selectedRole\": \"AdminCAA\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/account/register",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"account",
										"register"
									]
								}
							},
							"response": []
						}
					]
				}
			],
			"auth": {
				"type": "noauth"
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Ownership Requests",
			"item": [
				{
					"name": "Approval Path",
					"item": [
						{
							"name": "Login do Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_newAdmin\", jsonData.accessToken);\r",
											"});\r",
											"\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"alice@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login do User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_newUser\", jsonData.accessToken);\r",
											"});\r",
											"\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership c/ User autenticado",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Pending\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});\r",
											"\r",
											"pm.test(\"Save ownership request ID\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.environment.set(\"ownership_request_id_approval\", jsonData.id);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Listar Ownerships do shelter do Admin CAA (Alice)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership requests array\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"array\");\r",
											"    \r",
											"    if (jsonData.length > 0) {\r",
											"        const firstItem = jsonData[0];\r",
											"        pm.expect(firstItem).to.have.property(\"id\");\r",
											"        pm.expect(firstItem).to.have.property(\"animalId\");\r",
											"        pm.expect(firstItem).to.have.property(\"animalName\");\r",
											"        pm.expect(firstItem).to.have.property(\"userId\");\r",
											"        pm.expect(firstItem).to.have.property(\"userName\");\r",
											"        pm.expect(firstItem).to.have.property(\"amount\");\r",
											"        pm.expect(firstItem).to.have.property(\"status\");\r",
											"        pm.expect(firstItem).to.have.property(\"requestInfo\");\r",
											"        pm.expect(firstItem).to.have.property(\"requestedAt\");\r",
											"        pm.expect(firstItem).to.have.property(\"approvedAt\");\r",
											"        pm.expect(firstItem).to.have.property(\"updatedAt\");\r",
											"    }\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Atualizar Ownership Request para \"Em an√°lise\"",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Analysing\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"requestInfo\": \"Analyzing application from Diana\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/analysing/{{ownership_request_id_approval}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"analysing",
										"{{ownership_request_id_approval}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Aprova√ß√£o de Ownership Existente c/ User autenticado",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Approved\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/ownershiprequests/approve/{{ownership_request_id_approval}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"approve",
										"{{ownership_request_id_approval}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Rejection Path",
					"item": [
						{
							"name": "Login do User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_newUser2\", jsonData.accessToken);\r",
											"});\r",
											"\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"carlos@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership c/ User autenticado  (Rejection)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Pending\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});\r",
											"\r",
											"pm.test(\"Save ownership request ID\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.environment.set(\"ownership_request_id_rejection\", jsonData.id);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser2}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd2b\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Atualizar Ownership Request para \"Em an√°lise\" (Rejection)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Analysing\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"requestInfo\": \"Analyzing application from Carlos, I'm checking your personal information Carlos!\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/analysing/{{ownership_request_id_rejection}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"analysing",
										"{{ownership_request_id_rejection}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Rejei√ß√£o de Ownership Existente c/ User autenticado",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Rejected\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"rejectionReason\": \"User does not meet the requirements for pet ownership\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/reject/{{ownership_request_id_rejection}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"reject",
										"{{ownership_request_id_rejection}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Invert Previous Rejection Path",
					"item": [
						{
							"name": "Atualizar Ownership Request para \"Em an√°lise\" (Rejection -> Aprova√ß√£o)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Analysing\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"requestInfo\": \"Analyzing application from Carlos, I'm checking your personal information Carlos!\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/analysing/{{ownership_request_id_rejection}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"analysing",
										"{{ownership_request_id_rejection}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Aprova√ß√£o de Ownership Existente (Rejei√ß√£o -> Aprova√ß√£o)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Approved\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/ownershiprequests/approve/{{ownership_request_id_rejection}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"approve",
										"{{ownership_request_id_rejection}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Other Edge Cases",
					"item": [
						{
							"name": "Login do User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_newUser3\", jsonData.accessToken);\r",
											"});\r",
											"\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"eduardo@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership  (Animal com Owner)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has plain text content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\").toLowerCase();\r",
											"    pm.expect(contentType).to.include(\"text/plain\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates animal not available for ownership\", function () {\r",
											"    const responseText = pm.response.text().toLowerCase().trim();\r",
											"    pm.expect(responseText).to.include(\"animal not available for ownership\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser3}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd2b\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership  (Animal N√£o Existe)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 (Not Found)\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has plain text content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\").toLowerCase();\r",
											"    pm.expect(contentType).to.include(\"text/plain\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates animal has not been found\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.eql(\"Animal ID not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser3}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"a3b78d24-6f42-4e6e-92f3-9f87c2b4c913\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership  (Animal Inativo)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 (Bad Request)\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has plain text content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\").toLowerCase();\r",
											"    pm.expect(contentType).to.include(\"text/plain\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates animal is not available for ownership\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.eql(\"Animal not available for ownership\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser3}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd7b\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership (Pedido v√°lido)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Pending\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});\r",
											"\r",
											"pm.test(\"Save ownership request ID\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.environment.set(\"ownership_request_id_4\", jsonData.id);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser3}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd6b\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cria√ß√£o de Pedido de Ownership (Para o mesmo animal anterior)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 (Bad Request)\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has plain text content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\").toLowerCase();\r",
											"    pm.expect(contentType).to.include(\"text/plain\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates that user already made an ownership request for this animal\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.eql(\"User already has a pending ownership request for this animal\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser3}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd6b\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login do Admin CAA (Shelter 2)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_newAdmin2\", jsonData.accessToken);\r",
											"});\r",
											"\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"filipe@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Rejei√ß√£o de Ownership Existente (Pedido pertence a outro abrigo)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 (Forbidden)\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has plain text content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\").toLowerCase();\r",
											"    pm.expect(contentType).to.include(\"text/plain\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates that user cannot reject a request from another shelter\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.eql(\"User can only reject requests for animals in its shelter\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin2}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"rejectionReason\": \"User does not meet the requirements for pet ownership\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/reject/{{ownership_request_id_4}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"reject",
										"{{ownership_request_id_4}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Rejei√ß√£o de Ownership Existente (Pedido n√£o existe)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 (Not Found)\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response has plain text content type\", function () {\r",
											"    pm.response.to.have.header(\"Content-Type\");\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\").toLowerCase();\r",
											"    pm.expect(contentType).to.include(\"text/plain\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates that ownership request does not exist\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.eql(\"Ownership request not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newAdmin2}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"rejectionReason\": \"User does not meet the requirements for pet ownership\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/reject/{{non_existing_ownership}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"reject",
										"{{non_existing_ownership}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Login Admin CAA",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Save access token\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.environment.set(\"accessToken_adminCAA\", jsonData.accessToken);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/login",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Save access token\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.environment.set(\"accessToken_user\", jsonData.accessToken);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/login",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Edit User Profile Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const statusCode = pm.response.code;\r",
									"let body;\r",
									"\r",
									"try { body = pm.response.json(); } catch (e) { body = null; }\r",
									"\r",
									"pm.test(\"Status code is 200 (OK)\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Updated user info returned\", function () {\r",
									"    pm.expect(body).to.be.an(\"object\");\r",
									"    pm.expect(body).to.be.an(\"object\");\r",
									"    pm.expect(body).to.have.property(\"name\");\r",
									"    pm.expect(body).to.have.property(\"birthDate\")\r",
									"    pm.expect(body).to.have.property(\"street\");\r",
									"    pm.expect(body).to.have.property(\"city\");\r",
									"    pm.expect(body).to.have.property(\"postalCode\");\r",
									"    pm.expect(body).to.have.property(\"phoneNumber\");\r",
									"});\r",
									"\r",
									"console.log(\"‚úÖ User profile updated:\", body?.name);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken_user}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Diana Silva\",\r\n  \"birthDate\": \"1990-09-30\",\r\n  \"street\": \"Rua das Oliveiras 10\",\r\n  \"city\": \"Faro\",\r\n  \"postalCode\": \"8000-333\",\r\n  \"phoneNumber\": \"912345678\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User Profile Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const statusCode = pm.response.code;\r",
									"const body = pm.response.json();\r",
									"\r",
									"pm.test(\"Status code is 200 (OK)\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains user profile info\", function () {\r",
									"    pm.expect(body).to.be.an(\"object\");\r",
									"    pm.expect(body).to.have.property(\"name\");\r",
									"    pm.expect(body).to.have.property(\"birthDate\")\r",
									"    pm.expect(body).to.have.property(\"street\");\r",
									"    pm.expect(body).to.have.property(\"city\");\r",
									"    pm.expect(body).to.have.property(\"postalCode\");\r",
									"    pm.expect(body).to.have.property(\"phoneNumber\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken_user}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Edit User Profile Page Invalid Field",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const statusCode = pm.response.code;\r",
									"pm.test(\"Bad Request (400) - Invalid field validation\", function () {\r",
									"    pm.expect([400, 422]).to.include(statusCode);\r",
									"});\r",
									"console.warn(\"‚ö†Ô∏è Invalid field detected:\", pm.response.text());\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken_user}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Diana Silva\",\r\n  \"birthDate\": \"199009-30\",\r\n  \"street\": \"Rua das Oliveiras 10\",\r\n  \"city\": \"Faro\",\r\n  \"postalCode\": \"8000333\",\r\n  \"phoneNumber\": \"112345678\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Edit User Profile Page Without Auth",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Unauthorized (401) - Missing or invalid JWT\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"console.warn(\"üö´ Missing or invalid authentication token.\");\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Diana Silva\",\r\n  \"birthDate\": \"1990-09-30\",\r\n  \"street\": \"Rua das Oliveiras 10\",\r\n  \"city\": \"Faro\",\r\n  \"postalCode\": \"8000-333\",\r\n  \"phoneNumber\": \"912345678\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Edit CAA Profile Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const statusCode = pm.response.code;\r",
									"let body;\r",
									"\r",
									"try { body = pm.response.json(); } catch (e) { body = null; }\r",
									"\r",
									"pm.test(\"Status code is 200 (OK)\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains shelter admin info\", function () {\r",
									"   pm.expect(body).to.be.an(\"object\");\r",
									"    pm.expect(body).to.have.property(\"name\");\r",
									"    pm.expect(body).to.have.property(\"birthDate\")\r",
									"    pm.expect(body).to.have.property(\"street\");\r",
									"    pm.expect(body).to.have.property(\"city\");\r",
									"    pm.expect(body).to.have.property(\"postalCode\");\r",
									"    pm.expect(body).to.have.property(\"phoneNumber\");\r",
									"});\r",
									"console.log(\"‚úÖ CAA profile updated:\", body?.name);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken_adminCAA}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Alice Ferreira\",\r\n  \"birthDate\": \"2005-03-15\",\r\n  \"street\": \"Avenida da Liberdade 56\",\r\n  \"city\": \"Lisboa\",\r\n  \"postalCode\": \"1250-123\",\r\n  \"phoneNumber\": \"918223344\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Edit CAA Profile Page Without Auth",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Unauthorized (401) - Missing or invalid JWT\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"console.warn(\"üö´ No token provided for CAA update.\");\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Alice Ferreira\",\r\n  \"birthDate\": \"2005-03-15\",\r\n  \"street\": \"Avenida da Liberdade 56\",\r\n  \"city\": \"Lisboa\",\r\n  \"postalCode\": \"1250-123\",\r\n  \"phoneNumber\": \"918223344\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get CAA Profile Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const body = pm.response.json();\r",
									"pm.test(\"Status code is 200 (OK)\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"Response contains valid CAA info\", function () {\r",
									"    pm.expect(body).to.be.an(\"object\");\r",
									"    pm.expect(body).to.have.property(\"name\");\r",
									"    pm.expect(body).to.have.property(\"birthDate\")\r",
									"    pm.expect(body).to.have.property(\"street\");\r",
									"    pm.expect(body).to.have.property(\"city\");\r",
									"    pm.expect(body).to.have.property(\"postalCode\");\r",
									"    pm.expect(body).to.have.property(\"phoneNumber\");\r",
									"});\r",
									"console.log(\"üè† Loaded CAA profile:\", body?.name);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken_adminCAA}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}/api/users",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Fosterings",
			"item": [
				{
					"name": "Get Active Fosterings",
					"item": [
						{
							"name": "Login Other Diana",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_user\", jsonData.accessToken);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Active Fosterings",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"array\");\r",
											"});\r",
											"\r",
											"pm.test(\"Each fostering contains required fields\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    if (jsonData.length > 0) {\r",
											"        const f = jsonData[0];\r",
											"        pm.expect(f).to.have.property(\"animalName\");\r",
											"        pm.expect(f).to.have.property(\"animalAge\");\r",
											"        pm.expect(f).to.have.property(\"images\").that.is.an(\"array\");\r",
											"        pm.expect(f).to.have.property(\"amount\");\r",
											"        pm.expect(f).to.have.property(\"startDate\");\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Active Fosterings Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail without authentication\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Cancel Fostering",
					"item": [
						{
							"name": "Cancel Fostering",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (successfully cancelled)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains expected properties\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"startDate\");\r",
											"    pm.expect(jsonData).to.have.property(\"endDate\");\r",
											"});\r",
											"\r",
											"pm.test(\"EndDate should be set after cancellation\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.endDate).to.not.be.null;\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/fosterings/f0000000-0000-0000-0000-000000000002/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f0000000-0000-0000-0000-000000000002",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancel Fostering Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail without authentication\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/fosterings/f0000000-0000-0000-0000-000000000002/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f0000000-0000-0000-0000-000000000002",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancel Fostering When a User does not have Fosterings",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Should fail when fostering already cancelled\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message matches expectation\", function () {\r",
											"    let jsonData;\r",
											"\r",
											"    // Tenta fazer parse JSON; se falhar, trata como texto simples\r",
											"    try {\r",
											"        jsonData = pm.response.json();\r",
											"    } catch (e) {\r",
											"        jsonData = { error: pm.response.text() };\r",
											"    }\r",
											"\r",
											"    pm.expect(jsonData.error).to.include(\r",
											"        \"Fostering record not found or does not belong to the authenticated user.\"\r",
											"    );\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/fosterings/f0000000-0000-0000-0000-000000-000002/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f0000000-0000-0000-0000-000000-000002",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Add Fostering",
					"item": [
						{
							"name": "Login User Diana",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Fostering Sucesso",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains fostering data\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData.animalId).to.eql(\"f055cc31-fdeb-4c65-bb73-4f558f67dd5b\");\r",
											"    pm.expect(jsonData.amount).to.eql(20);\r",
											"    pm.expect(jsonData.status).to.eql(\"Active\");\r",
											"    pm.expect(jsonData.userId).to.not.be.empty;\r",
											"});\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: `${pm.environment.get(\"url\")}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b`,\r",
											"    method: \"GET\",\r",
											"    header: { \"Authorization\": `Bearer ${pm.environment.get(\"accessToken_user\")}` }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        const animal = res.json();\r",
											"        pm.test(\"Animal state updated to PartiallyFostered\", function () {\r",
											"            pm.expect(animal.animalState).to.eql(\"PartiallyFostered\");\r",
											"        });\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 20\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Fostering Novamente Apos Cancelar",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains fostering data\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData.animalId).to.eql(\"f055cc31-fdeb-4c65-bb73-4f558f67dd3b\");\r",
											"    pm.expect(jsonData.amount).to.eql(20);\r",
											"    pm.expect(jsonData.status).to.eql(\"Active\");\r",
											"    pm.expect(jsonData.userId).to.not.be.empty;\r",
											"});\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: `${pm.environment.get(\"url\")}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b`,\r",
											"    method: \"GET\",\r",
											"    header: { \"Authorization\": `Bearer ${pm.environment.get(\"accessToken_user\")}` }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        const animal = res.json();\r",
											"        pm.test(\"Animal state updated to PartiallyFostered\", function () {\r",
											"            pm.expect(animal.animalState).to.eql(\"PartiallyFostered\");\r",
											"        });\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 20\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal N√£o existe",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"const responseText = pm.response.text();\r",
											"\r",
											"pm.test(\"Response body is plain text 'Animal not found'\", function () {\r",
											"    pm.expect(responseText.trim()).to.eql(\"Animal not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 20\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/ffffffff-ffff-ffff-ffff-ffffffffffff/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"ffffffff-ffff-ffff-ffff-ffffffffffff",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal Inativo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 409\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"const responseText = pm.response.text();\r",
											"\r",
											"pm.test(\"Response body is plain text 'Animal is inactive'\", function () {\r",
											"    pm.expect(responseText.trim()).to.eql(\"Animal is inactive\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 20\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd7b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd7b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal tem owner",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 409\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"const responseText = pm.response.text();\r",
											"\r",
											"pm.test(\"Response body is plain text 'Animal has an owner, not available for fostering'\", function () {\r",
											"    pm.expect(responseText.trim()).to.eql(\"Animal has an owner, not available for fostering\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 20\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd8b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd8b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Valor mensal abaixo do minimo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response has validation error structure\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"type\", \"ValidationFailure\");\r",
											"    pm.expect(jsonData).to.have.property(\"title\", \"Validation error\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\", 400);\r",
											"    pm.expect(jsonData).to.have.property(\"detail\");\r",
											"    pm.expect(jsonData).to.have.property(\"errors\");\r",
											"    pm.expect(jsonData.errors).to.have.property(\"MonthValue\");\r",
											"    pm.expect(jsonData.errors.MonthValue[0]).to.include(\"Month value must be greater than or equal\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 9.9\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Utilizador j√° apadrinhou este animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 409\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"pm.test(\"Body contains correct message\", function () {\r",
											"    pm.expect(pm.response.text()).to.include(\"You already foster this animal\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response format is text\", function () {\r",
											"    pm.expect(pm.response.headers.get('Content-Type')).to.include('text');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 10\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd4b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId Invalido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"let jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response type is ValidationFailure\", function () {\r",
											"    pm.expect(jsonData.type).to.eql(\"ValidationFailure\");\r",
											"});\r",
											"\r",
											"pm.test(\"Title and status are correct\", function () {\r",
											"    pm.expect(jsonData.title).to.eql(\"Validation error\");\r",
											"    pm.expect(jsonData.status).to.eql(400);\r",
											"});\r",
											"\r",
											"pm.test(\"AnimalId error message is present and correct\", function () {\r",
											"    pm.expect(jsonData.errors).to.have.property(\"AnimalId\");\r",
											"    pm.expect(jsonData.errors.AnimalId[0]).to.eql(\"Id with wrong format must be a valid GUID.\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 10\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/invalid-guid/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"invalid-guid",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login User Carlos",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"carlos@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Valor mensal superior ao Custo do Animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 422\", function () {\r",
											"    pm.response.to.have.status(422);\r",
											"});\r",
											"\r",
											"// Trata o corpo como texto simples\r",
											"const responseText = pm.response.text();\r",
											"\r",
											"pm.test(\"Response body is plain text 'Monthly value surpasses animal costs'\", function () {\r",
											"    pm.expect(responseText.trim()).to.eql(\"Monthly value surpasses animal costs\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 120\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Adicionar apadrinhamento que completa o custo total do animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 or 201\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains fostering data\", function () {\r",
											"    pm.expect(jsonData.animalId).to.eql(\"f055cc31-fdeb-4c65-bb73-4f558f67dd5b\");\r",
											"    pm.expect(jsonData.amount).to.eql(80);\r",
											"    pm.expect(jsonData.status).to.eql(\"Active\");\r",
											"    pm.expect(jsonData.userId).to.eql(\"cccccccc-cccc-cccc-cccc-cccccccccccc\");\r",
											"});\r",
											"\r",
											"// ===== Verifica que o animal deixa de ser p√∫blico =====\r",
											"pm.sendRequest({\r",
											"    url: `${pm.environment.get(\"url\")}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd5b`,\r",
											"    method: \"GET\",\r",
											"    header: { \"Authorization\": `Bearer ${pm.environment.get(\"accessToken_user\")}` }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        pm.test(\"Animal becomes non-retrievable (TotallyFostered)\", function () {\r",
											"            pm.expect(res.code).to.eql(404);\r",
											"        });\r",
											"    } else {\r",
											"        console.log(\"Erro ao obter animal:\", err);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 80\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Multiplos apadrinhamentos partially",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"const fostering = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains valid fostering data\", function () {\r",
											"    pm.expect(fostering).to.have.property(\"id\");\r",
											"    pm.expect(fostering.animalId).to.eql(\"f055cc31-fdeb-4c65-bb73-4f558f67dd4b\");\r",
											"    pm.expect(fostering.amount).to.eql(10);\r",
											"    pm.expect(fostering.status).to.eql(\"Active\");\r",
											"});\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: `${pm.environment.get(\"url\")}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b`,\r",
											"    method: \"GET\",\r",
											"    header: { \"Authorization\": `Bearer ${pm.environment.get(\"accessToken_user\")}` }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        const animal = res.json();\r",
											"        pm.test(\"Animal remains partially fostered\", function () {\r",
											"            pm.expect(animal.animalState).to.eql(\"PartiallyFostered\");\r",
											"        });\r",
											"    } else {\r",
											"        console.log(\"Erro ao obter animal:\", err);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 10\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd4b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
										"fosterings"
									]
								}
							},
							"response": []
						},
						{
							"name": "Multiplos apadrinhamentos FullyFostered",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"const fostering = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains valid fostering data\", function () {\r",
											"    pm.expect(fostering).to.have.property(\"id\");\r",
											"    pm.expect(fostering.animalId).to.eql(\"f055cc31-fdeb-4c65-bb73-4f558f67dd3b\");\r",
											"    pm.expect(fostering.amount).to.eql(60);\r",
											"    pm.expect(fostering.status).to.eql(\"Active\");\r",
											"});\r",
											"\r",
											"pm.sendRequest({\r",
											"    url: `${pm.environment.get(\"url\")}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b`,\r",
											"    method: \"GET\",\r",
											"    header: { \"Authorization\": `Bearer ${pm.environment.get(\"accessToken_user\")}` }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        pm.test(\"Animal becomes non-retrievable (TotallyFostered)\", function () {\r",
											"            pm.expect(res.code).to.eql(404);\r",
											"        });\r",
											"    } else {\r",
											"        console.log(\"Erro ao obter animal:\", err);\r",
											"    }\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"monthValue\": 60\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/fosterings/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/fosterings",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"fosterings",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"fosterings"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Save access token\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.environment.set(\"accessToken_user\", jsonData.accessToken);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/login",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Animals",
			"item": [
				{
					"name": "Deactivate Animal",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_adminCAA\", jsonData.accessToken);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate Animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"// Parse JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"    console.warn(\"‚ö†Ô∏è Response body is not valid JSON or empty.\");\r",
											"}\r",
											"\r",
											"// === Identify current test case (by request name) ===\r",
											"const testName = pm.info.requestName;\r",
											"console.log(\"üîç Running test:\", testName);\r",
											"\r",
											"// === Common sanity check ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Define expectations per test ===\r",
											"switch (testName) {\r",
											"\r",
											"    // ‚úÖ Positive test: valid deactivation by Admin CAA\r",
											"    case \"Deactivate Animal\":\r",
											"        pm.test(\"Status code is 200 (OK)\", function () {\r",
											"            pm.response.to.have.status(200);\r",
											"        });\r",
											"\r",
											"        if (jsonData) {\r",
											"            pm.test(\"Response contains full animal object\", function () {\r",
											"                pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"                // --- Basic required fields ---\r",
											"                pm.expect(jsonData).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"colour\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"                pm.expect(jsonData).to.have.property(\"age\");\r",
											"                pm.expect(jsonData).to.have.property(\"description\");\r",
											"                pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"                pm.expect(jsonData).to.have.property(\"features\");\r",
											"                pm.expect(jsonData).to.have.property(\"cost\");\r",
											"                pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"                // --- Validate animal state ---\r",
											"                pm.expect(jsonData).to.have.property(\"animalState\", \"Inactive\");\r",
											"\r",
											"                // --- Optional nested array: images ---\r",
											"                pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"                if (jsonData.images.length > 0) {\r",
											"                    const img = jsonData.images[0];\r",
											"                    pm.expect(img).to.be.an(\"object\");\r",
											"                    pm.expect(img).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"url\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"isPrincipal\").that.is.a(\"boolean\");\r",
											"                    pm.expect(img).to.have.property(\"description\");\r",
											"                }\r",
											"            });\r",
											"\r",
											"            console.log(`‚úÖ Animal \"${jsonData.name}\" successfully deactivated.`);\r",
											"        } else {\r",
											"            console.warn(\"‚ö†Ô∏è No JSON body returned on successful deactivation.\");\r",
											"        }\r",
											"        break;\r",
											"\r",
											"    // ‚õî Animal belongs to another shelter\r",
											"    case \"Deactivate AnimalFromOtherShelter\":\r",
											"        pm.test(\"Forbidden (403) - Cannot deactivate animal from another shelter\", function () {\r",
											"            pm.expect([403, 404]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚õî Attempted to deactivate animal from a different shelter.\");\r",
											"        break;\r",
											"\r",
											"    // üö´ No authentication token\r",
											"    case \"Deactivate Animal WithoutAuth\":\r",
											"        pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"            pm.response.to.have.status(401);\r",
											"        });\r",
											"        console.warn(\"üö´ Missing or invalid JWT token.\");\r",
											"        break;\r",
											"\r",
											"    // üîí Animal already has an owner\r",
											"    case \"Deactivate AnimalWithOwner\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with owner\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal already has an owner, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // üêï Animal currently fostered\r",
											"    case \"Deactivate AnimalWithFostering\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with active fostering\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal is currently fostered, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // ‚ùì Animal not found in database\r",
											"    case \"Deactivate AnimalThatIsNotInDB\":\r",
											"        pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"            pm.response.to.have.status(404);\r",
											"        });\r",
											"        console.warn(\"‚ùì Attempted to deactivate a non-existing animal.\");\r",
											"        break;\r",
											"\r",
											"    // üîÑ Default handler for unexpected cases\r",
											"    default:\r",
											"        pm.test(\"Unexpected status code\", function () {\r",
											"            pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 409, 500]);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Unhandled case:\", testName, \"‚Üí Status:\", statusCode);\r",
											"        console.warn(\"Response:\", bodyText);\r",
											"        break;\r",
											"}\r",
											"\r",
											"// === Global log for debugging (safe for Newman) ===\r",
											"console.log(\"üìã Test Summary:\\n\" + JSON.stringify({\r",
											"    \"Test Name\": testName,\r",
											"    \"Status Code\": statusCode,\r",
											"    \"Animal ID\": jsonData?.id || \"N/A\",\r",
											"    \"Animal Name\": jsonData?.name || \"N/A\",\r",
											"    \"Animal State\": jsonData?.animalState || \"N/A\",\r",
											"    \"Species\": jsonData?.species || \"N/A\",\r",
											"    \"Images Count\": jsonData?.images?.length || 0\r",
											"}, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1c/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1c",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate AnimalFromOtherShelter",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"// Parse JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"    console.warn(\"‚ö†Ô∏è Response body is not valid JSON or empty.\");\r",
											"}\r",
											"\r",
											"// === Identify current test case (by request name) ===\r",
											"const testName = pm.info.requestName;\r",
											"console.log(\"üîç Running test:\", testName);\r",
											"\r",
											"// === Common sanity check ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Define expectations per test ===\r",
											"switch (testName) {\r",
											"\r",
											"    // ‚úÖ Positive test: valid deactivation by Admin CAA\r",
											"    case \"Deactivate Animal\":\r",
											"        pm.test(\"Status code is 200 (OK)\", function () {\r",
											"            pm.response.to.have.status(200);\r",
											"        });\r",
											"\r",
											"        if (jsonData) {\r",
											"            pm.test(\"Response contains full animal object\", function () {\r",
											"                pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"                // --- Basic required fields ---\r",
											"                pm.expect(jsonData).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"colour\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"                pm.expect(jsonData).to.have.property(\"age\");\r",
											"                pm.expect(jsonData).to.have.property(\"description\");\r",
											"                pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"                pm.expect(jsonData).to.have.property(\"features\");\r",
											"                pm.expect(jsonData).to.have.property(\"cost\");\r",
											"                pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"                // --- Validate animal state ---\r",
											"                pm.expect(jsonData).to.have.property(\"animalState\", \"Inactive\");\r",
											"\r",
											"                // --- Optional nested array: images ---\r",
											"                pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"                if (jsonData.images.length > 0) {\r",
											"                    const img = jsonData.images[0];\r",
											"                    pm.expect(img).to.be.an(\"object\");\r",
											"                    pm.expect(img).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"url\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"isPrincipal\").that.is.a(\"boolean\");\r",
											"                    pm.expect(img).to.have.property(\"description\");\r",
											"                }\r",
											"            });\r",
											"\r",
											"            console.log(`‚úÖ Animal \"${jsonData.name}\" successfully deactivated.`);\r",
											"        } else {\r",
											"            console.warn(\"‚ö†Ô∏è No JSON body returned on successful deactivation.\");\r",
											"        }\r",
											"        break;\r",
											"\r",
											"    // ‚õî Animal belongs to another shelter\r",
											"    case \"Deactivate AnimalFromOtherShelter\":\r",
											"        pm.test(\"Forbidden (403) - Cannot deactivate animal from another shelter\", function () {\r",
											"            pm.expect([403, 404]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚õî Attempted to deactivate animal from a different shelter.\");\r",
											"        break;\r",
											"\r",
											"    // üö´ No authentication token\r",
											"    case \"Deactivate Animal WithoutAuth\":\r",
											"        pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"            pm.response.to.have.status(401);\r",
											"        });\r",
											"        console.warn(\"üö´ Missing or invalid JWT token.\");\r",
											"        break;\r",
											"\r",
											"    // üîí Animal already has an owner\r",
											"    case \"Deactivate AnimalWithOwner\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with owner\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal already has an owner, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // üêï Animal currently fostered\r",
											"    case \"Deactivate AnimalWithFostering\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with active fostering\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal is currently fostered, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // ‚ùì Animal not found in database\r",
											"    case \"Deactivate AnimalThatIsNotInDB\":\r",
											"        pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"            pm.response.to.have.status(404);\r",
											"        });\r",
											"        console.warn(\"‚ùì Attempted to deactivate a non-existing animal.\");\r",
											"        break;\r",
											"\r",
											"    // üîÑ Default handler for unexpected cases\r",
											"    default:\r",
											"        pm.test(\"Unexpected status code\", function () {\r",
											"            pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 409, 500]);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Unhandled case:\", testName, \"‚Üí Status:\", statusCode);\r",
											"        console.warn(\"Response:\", bodyText);\r",
											"        break;\r",
											"}\r",
											"\r",
											"// === Global log for debugging (safe for Newman) ===\r",
											"console.log(\"üìã Test Summary:\\n\" + JSON.stringify({\r",
											"    \"Test Name\": testName,\r",
											"    \"Status Code\": statusCode,\r",
											"    \"Animal ID\": jsonData?.id || \"N/A\",\r",
											"    \"Animal Name\": jsonData?.name || \"N/A\",\r",
											"    \"Animal State\": jsonData?.animalState || \"N/A\",\r",
											"    \"Species\": jsonData?.species || \"N/A\",\r",
											"    \"Images Count\": jsonData?.images?.length || 0\r",
											"}, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/66761448-920f-493d-b598-6eb5b7de8351/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"66761448-920f-493d-b598-6eb5b7de8351",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate Animal WithoutAuth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"// Parse JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"    console.warn(\"‚ö†Ô∏è Response body is not valid JSON or empty.\");\r",
											"}\r",
											"\r",
											"// === Identify current test case (by request name) ===\r",
											"const testName = pm.info.requestName;\r",
											"console.log(\"üîç Running test:\", testName);\r",
											"\r",
											"// === Common sanity check ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Define expectations per test ===\r",
											"switch (testName) {\r",
											"\r",
											"    // ‚úÖ Positive test: valid deactivation by Admin CAA\r",
											"    case \"Deactivate Animal\":\r",
											"        pm.test(\"Status code is 200 (OK)\", function () {\r",
											"            pm.response.to.have.status(200);\r",
											"        });\r",
											"\r",
											"        if (jsonData) {\r",
											"            pm.test(\"Response contains full animal object\", function () {\r",
											"                pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"                // --- Basic required fields ---\r",
											"                pm.expect(jsonData).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"colour\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"                pm.expect(jsonData).to.have.property(\"age\");\r",
											"                pm.expect(jsonData).to.have.property(\"description\");\r",
											"                pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"                pm.expect(jsonData).to.have.property(\"features\");\r",
											"                pm.expect(jsonData).to.have.property(\"cost\");\r",
											"                pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"                // --- Validate animal state ---\r",
											"                pm.expect(jsonData).to.have.property(\"animalState\", \"Inactive\");\r",
											"\r",
											"                // --- Optional nested array: images ---\r",
											"                pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"                if (jsonData.images.length > 0) {\r",
											"                    const img = jsonData.images[0];\r",
											"                    pm.expect(img).to.be.an(\"object\");\r",
											"                    pm.expect(img).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"url\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"isPrincipal\").that.is.a(\"boolean\");\r",
											"                    pm.expect(img).to.have.property(\"description\");\r",
											"                }\r",
											"            });\r",
											"\r",
											"            console.log(`‚úÖ Animal \"${jsonData.name}\" successfully deactivated.`);\r",
											"        } else {\r",
											"            console.warn(\"‚ö†Ô∏è No JSON body returned on successful deactivation.\");\r",
											"        }\r",
											"        break;\r",
											"\r",
											"    // ‚õî Animal belongs to another shelter\r",
											"    case \"Deactivate AnimalFromOtherShelter\":\r",
											"        pm.test(\"Forbidden (403) - Cannot deactivate animal from another shelter\", function () {\r",
											"            pm.expect([403, 404]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚õî Attempted to deactivate animal from a different shelter.\");\r",
											"        break;\r",
											"\r",
											"    // üö´ No authentication token\r",
											"    case \"Deactivate Animal WithoutAuth\":\r",
											"        pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"            pm.response.to.have.status(401);\r",
											"        });\r",
											"        console.warn(\"üö´ Missing or invalid JWT token.\");\r",
											"        break;\r",
											"\r",
											"    // üîí Animal already has an owner\r",
											"    case \"Deactivate AnimalWithOwner\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with owner\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal already has an owner, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // üêï Animal currently fostered\r",
											"    case \"Deactivate AnimalWithFostering\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with active fostering\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal is currently fostered, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // ‚ùì Animal not found in database\r",
											"    case \"Deactivate AnimalThatIsNotInDB\":\r",
											"        pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"            pm.response.to.have.status(404);\r",
											"        });\r",
											"        console.warn(\"‚ùì Attempted to deactivate a non-existing animal.\");\r",
											"        break;\r",
											"\r",
											"    // üîÑ Default handler for unexpected cases\r",
											"    default:\r",
											"        pm.test(\"Unexpected status code\", function () {\r",
											"            pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 409, 500]);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Unhandled case:\", testName, \"‚Üí Status:\", statusCode);\r",
											"        console.warn(\"Response:\", bodyText);\r",
											"        break;\r",
											"}\r",
											"\r",
											"// === Global log for debugging (safe for Newman) ===\r",
											"console.log(\"üìã Test Summary:\\n\" + JSON.stringify({\r",
											"    \"Test Name\": testName,\r",
											"    \"Status Code\": statusCode,\r",
											"    \"Animal ID\": jsonData?.id || \"N/A\",\r",
											"    \"Animal Name\": jsonData?.name || \"N/A\",\r",
											"    \"Animal State\": jsonData?.animalState || \"N/A\",\r",
											"    \"Species\": jsonData?.species || \"N/A\",\r",
											"    \"Images Count\": jsonData?.images?.length || 0\r",
											"}, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "kljskadjksa",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate AnimalWithOwner",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"// Parse JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"    console.warn(\"‚ö†Ô∏è Response body is not valid JSON or empty.\");\r",
											"}\r",
											"\r",
											"// === Identify current test case (by request name) ===\r",
											"const testName = pm.info.requestName;\r",
											"console.log(\"üîç Running test:\", testName);\r",
											"\r",
											"// === Common sanity check ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Define expectations per test ===\r",
											"switch (testName) {\r",
											"\r",
											"    // ‚úÖ Positive test: valid deactivation by Admin CAA\r",
											"    case \"Deactivate Animal\":\r",
											"        pm.test(\"Status code is 200 (OK)\", function () {\r",
											"            pm.response.to.have.status(200);\r",
											"        });\r",
											"\r",
											"        if (jsonData) {\r",
											"            pm.test(\"Response contains full animal object\", function () {\r",
											"                pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"                // --- Basic required fields ---\r",
											"                pm.expect(jsonData).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"colour\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"                pm.expect(jsonData).to.have.property(\"age\");\r",
											"                pm.expect(jsonData).to.have.property(\"description\");\r",
											"                pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"                pm.expect(jsonData).to.have.property(\"features\");\r",
											"                pm.expect(jsonData).to.have.property(\"cost\");\r",
											"                pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"                // --- Validate animal state ---\r",
											"                pm.expect(jsonData).to.have.property(\"animalState\", \"Inactive\");\r",
											"\r",
											"                // --- Optional nested array: images ---\r",
											"                pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"                if (jsonData.images.length > 0) {\r",
											"                    const img = jsonData.images[0];\r",
											"                    pm.expect(img).to.be.an(\"object\");\r",
											"                    pm.expect(img).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"url\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"isPrincipal\").that.is.a(\"boolean\");\r",
											"                    pm.expect(img).to.have.property(\"description\");\r",
											"                }\r",
											"            });\r",
											"\r",
											"            console.log(`‚úÖ Animal \"${jsonData.name}\" successfully deactivated.`);\r",
											"        } else {\r",
											"            console.warn(\"‚ö†Ô∏è No JSON body returned on successful deactivation.\");\r",
											"        }\r",
											"        break;\r",
											"\r",
											"    // ‚õî Animal belongs to another shelter\r",
											"    case \"Deactivate AnimalFromOtherShelter\":\r",
											"        pm.test(\"Forbidden (403) - Cannot deactivate animal from another shelter\", function () {\r",
											"            pm.expect([403, 404]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚õî Attempted to deactivate animal from a different shelter.\");\r",
											"        break;\r",
											"\r",
											"    // üö´ No authentication token\r",
											"    case \"Deactivate Animal WithoutAuth\":\r",
											"        pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"            pm.response.to.have.status(401);\r",
											"        });\r",
											"        console.warn(\"üö´ Missing or invalid JWT token.\");\r",
											"        break;\r",
											"\r",
											"    // üîí Animal already has an owner\r",
											"    case \"Deactivate AnimalWithOwner\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with owner\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal already has an owner, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // üêï Animal currently fostered\r",
											"    case \"Deactivate AnimalWithFostering\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with active fostering\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal is currently fostered, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // ‚ùì Animal not found in database\r",
											"    case \"Deactivate AnimalThatIsNotInDB\":\r",
											"        pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"            pm.response.to.have.status(404);\r",
											"        });\r",
											"        console.warn(\"‚ùì Attempted to deactivate a non-existing animal.\");\r",
											"        break;\r",
											"\r",
											"    // üîÑ Default handler for unexpected cases\r",
											"    default:\r",
											"        pm.test(\"Unexpected status code\", function () {\r",
											"            pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 409, 500]);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Unhandled case:\", testName, \"‚Üí Status:\", statusCode);\r",
											"        console.warn(\"Response:\", bodyText);\r",
											"        break;\r",
											"}\r",
											"\r",
											"// === Global log for debugging (safe for Newman) ===\r",
											"console.log(\"üìã Test Summary:\\n\" + JSON.stringify({\r",
											"    \"Test Name\": testName,\r",
											"    \"Status Code\": statusCode,\r",
											"    \"Animal ID\": jsonData?.id || \"N/A\",\r",
											"    \"Animal Name\": jsonData?.name || \"N/A\",\r",
											"    \"Animal State\": jsonData?.animalState || \"N/A\",\r",
											"    \"Species\": jsonData?.species || \"N/A\",\r",
											"    \"Images Count\": jsonData?.images?.length || 0\r",
											"}, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd8b/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd8b",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate AnimalWithFostering",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"// Parse JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"    console.warn(\"‚ö†Ô∏è Response body is not valid JSON or empty.\");\r",
											"}\r",
											"\r",
											"// === Identify current test case (by request name) ===\r",
											"const testName = pm.info.requestName;\r",
											"console.log(\"üîç Running test:\", testName);\r",
											"\r",
											"// === Common sanity check ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Define expectations per test ===\r",
											"switch (testName) {\r",
											"\r",
											"    // ‚úÖ Positive test: valid deactivation by Admin CAA\r",
											"    case \"Deactivate Animal\":\r",
											"        pm.test(\"Status code is 200 (OK)\", function () {\r",
											"            pm.response.to.have.status(200);\r",
											"        });\r",
											"\r",
											"        if (jsonData) {\r",
											"            pm.test(\"Response contains full animal object\", function () {\r",
											"                pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"                // --- Basic required fields ---\r",
											"                pm.expect(jsonData).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"colour\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"                pm.expect(jsonData).to.have.property(\"age\");\r",
											"                pm.expect(jsonData).to.have.property(\"description\");\r",
											"                pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"                pm.expect(jsonData).to.have.property(\"features\");\r",
											"                pm.expect(jsonData).to.have.property(\"cost\");\r",
											"                pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"                // --- Validate animal state ---\r",
											"                pm.expect(jsonData).to.have.property(\"animalState\", \"Inactive\");\r",
											"\r",
											"                // --- Optional nested array: images ---\r",
											"                pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"                if (jsonData.images.length > 0) {\r",
											"                    const img = jsonData.images[0];\r",
											"                    pm.expect(img).to.be.an(\"object\");\r",
											"                    pm.expect(img).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"url\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"isPrincipal\").that.is.a(\"boolean\");\r",
											"                    pm.expect(img).to.have.property(\"description\");\r",
											"                }\r",
											"            });\r",
											"\r",
											"            console.log(`‚úÖ Animal \"${jsonData.name}\" successfully deactivated.`);\r",
											"        } else {\r",
											"            console.warn(\"‚ö†Ô∏è No JSON body returned on successful deactivation.\");\r",
											"        }\r",
											"        break;\r",
											"\r",
											"    // ‚õî Animal belongs to another shelter\r",
											"    case \"Deactivate AnimalFromOtherShelter\":\r",
											"        pm.test(\"Forbidden (403) - Cannot deactivate animal from another shelter\", function () {\r",
											"            pm.expect([403, 404]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚õî Attempted to deactivate animal from a different shelter.\");\r",
											"        break;\r",
											"\r",
											"    // üö´ No authentication token\r",
											"    case \"Deactivate Animal WithoutAuth\":\r",
											"        pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"            pm.response.to.have.status(401);\r",
											"        });\r",
											"        console.warn(\"üö´ Missing or invalid JWT token.\");\r",
											"        break;\r",
											"\r",
											"    // üîí Animal already has an owner\r",
											"    case \"Deactivate AnimalWithOwner\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with owner\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal already has an owner, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // üêï Animal currently fostered\r",
											"case \"Deactivate AnimalWithFostering\":\r",
											"    pm.test(\"Conflict or Not Found (409 / 404) - Cannot deactivate animal with active fostering\", function () {\r",
											"        pm.expect([400, 404, 409]).to.include(statusCode);\r",
											"    });\r",
											"\r",
											"    if (statusCode === 404) {\r",
											"        console.warn(\"‚ùì Animal not found or already removed from active fostering.\");\r",
											"    } else if (statusCode === 409) {\r",
											"        console.warn(\"‚ö†Ô∏è Animal has an active fostering ‚Äî cannot deactivate.\");\r",
											"    } else {\r",
											"        console.warn(\"‚ö†Ô∏è Validation or business rule conflict on deactivation.\");\r",
											"    }\r",
											"    break;\r",
											"\r",
											"\r",
											"    // ‚ùì Animal not found in database\r",
											"    case \"Deactivate AnimalThatIsNotInDB\":\r",
											"        pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"            pm.response.to.have.status(404);\r",
											"        });\r",
											"        console.warn(\"‚ùì Attempted to deactivate a non-existing animal.\");\r",
											"        break;\r",
											"\r",
											"    // üîÑ Default handler for unexpected cases\r",
											"    default:\r",
											"        pm.test(\"Unexpected status code\", function () {\r",
											"            pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 409, 500]);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Unhandled case:\", testName, \"‚Üí Status:\", statusCode);\r",
											"        console.warn(\"Response:\", bodyText);\r",
											"        break;\r",
											"}\r",
											"\r",
											"// === Global log for debugging (safe for Newman) ===\r",
											"console.log(\"üìã Test Summary:\\n\" + JSON.stringify({\r",
											"    \"Test Name\": testName,\r",
											"    \"Status Code\": statusCode,\r",
											"    \"Animal ID\": jsonData?.id || \"N/A\",\r",
											"    \"Animal Name\": jsonData?.name || \"N/A\",\r",
											"    \"Animal State\": jsonData?.animalState || \"N/A\",\r",
											"    \"Species\": jsonData?.species || \"N/A\",\r",
											"    \"Images Count\": jsonData?.images?.length || 0\r",
											"}, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/bf0210b3-fcae-4598-a6a0-2fbfe06151be/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"bf0210b3-fcae-4598-a6a0-2fbfe06151be",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate AnimalThatIsNotInDB",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"// Parse JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"    console.warn(\"‚ö†Ô∏è Response body is not valid JSON or empty.\");\r",
											"}\r",
											"\r",
											"// === Identify current test case (by request name) ===\r",
											"const testName = pm.info.requestName;\r",
											"console.log(\"üîç Running test:\", testName);\r",
											"\r",
											"// === Common sanity check ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Define expectations per test ===\r",
											"switch (testName) {\r",
											"\r",
											"    // ‚úÖ Positive test: valid deactivation by Admin CAA\r",
											"    case \"Deactivate Animal\":\r",
											"        pm.test(\"Status code is 200 (OK)\", function () {\r",
											"            pm.response.to.have.status(200);\r",
											"        });\r",
											"\r",
											"        if (jsonData) {\r",
											"            pm.test(\"Response contains full animal object\", function () {\r",
											"                pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"                // --- Basic required fields ---\r",
											"                pm.expect(jsonData).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"colour\").that.is.a(\"string\");\r",
											"                pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"                pm.expect(jsonData).to.have.property(\"age\");\r",
											"                pm.expect(jsonData).to.have.property(\"description\");\r",
											"                pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"                pm.expect(jsonData).to.have.property(\"features\");\r",
											"                pm.expect(jsonData).to.have.property(\"cost\");\r",
											"                pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"                // --- Validate animal state ---\r",
											"                pm.expect(jsonData).to.have.property(\"animalState\", \"Inactive\");\r",
											"\r",
											"                // --- Optional nested array: images ---\r",
											"                pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"                if (jsonData.images.length > 0) {\r",
											"                    const img = jsonData.images[0];\r",
											"                    pm.expect(img).to.be.an(\"object\");\r",
											"                    pm.expect(img).to.have.property(\"id\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"url\").that.is.a(\"string\");\r",
											"                    pm.expect(img).to.have.property(\"isPrincipal\").that.is.a(\"boolean\");\r",
											"                    pm.expect(img).to.have.property(\"description\");\r",
											"                }\r",
											"            });\r",
											"\r",
											"            console.log(`‚úÖ Animal \"${jsonData.name}\" successfully deactivated.`);\r",
											"        } else {\r",
											"            console.warn(\"‚ö†Ô∏è No JSON body returned on successful deactivation.\");\r",
											"        }\r",
											"        break;\r",
											"\r",
											"    // ‚õî Animal belongs to another shelter\r",
											"    case \"Deactivate AnimalFromOtherShelter\":\r",
											"        pm.test(\"Forbidden (403) - Cannot deactivate animal from another shelter\", function () {\r",
											"            pm.expect([403, 404]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚õî Attempted to deactivate animal from a different shelter.\");\r",
											"        break;\r",
											"\r",
											"    // üö´ No authentication token\r",
											"    case \"Deactivate Animal WithoutAuth\":\r",
											"        pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"            pm.response.to.have.status(401);\r",
											"        });\r",
											"        console.warn(\"üö´ Missing or invalid JWT token.\");\r",
											"        break;\r",
											"\r",
											"    // üîí Animal already has an owner\r",
											"    case \"Deactivate AnimalWithOwner\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with owner\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal already has an owner, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // üêï Animal currently fostered\r",
											"    case \"Deactivate AnimalWithFostering\":\r",
											"        pm.test(\"Conflict (409) - Cannot deactivate animal with active fostering\", function () {\r",
											"            pm.expect([400, 409]).to.include(statusCode);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Animal is currently fostered, cannot deactivate.\");\r",
											"        break;\r",
											"\r",
											"    // ‚ùì Animal not found in database\r",
											"    case \"Deactivate AnimalThatIsNotInDB\":\r",
											"        pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"            pm.response.to.have.status(404);\r",
											"        });\r",
											"        console.warn(\"‚ùì Attempted to deactivate a non-existing animal.\");\r",
											"        break;\r",
											"\r",
											"    // üîÑ Default handler for unexpected cases\r",
											"    default:\r",
											"        pm.test(\"Unexpected status code\", function () {\r",
											"            pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 409, 500]);\r",
											"        });\r",
											"        console.warn(\"‚ö†Ô∏è Unhandled case:\", testName, \"‚Üí Status:\", statusCode);\r",
											"        console.warn(\"Response:\", bodyText);\r",
											"        break;\r",
											"}\r",
											"\r",
											"// === Global log for debugging (safe for Newman) ===\r",
											"console.log(\"üìã Test Summary:\\n\" + JSON.stringify({\r",
											"    \"Test Name\": testName,\r",
											"    \"Status Code\": statusCode,\r",
											"    \"Animal ID\": jsonData?.id || \"N/A\",\r",
											"    \"Animal Name\": jsonData?.name || \"N/A\",\r",
											"    \"Animal State\": jsonData?.animalState || \"N/A\",\r",
											"    \"Species\": jsonData?.species || \"N/A\",\r",
											"    \"Images Count\": jsonData?.images?.length || 0\r",
											"}, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/\"f055cc31-fdeb-4c10-bb73-4f558f67dd8b\"/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"\"f055cc31-fdeb-4c10-bb73-4f558f67dd8b\"",
										"deactivate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Animals By Shelter",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_adminCAA\", jsonData.accessToken);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "GetAnimalsByShelter With Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Extract response info\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"}\r",
											"\r",
											"// Ensure response is not empty\r",
											"pm.test(\"Response is not empty\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// Handle success (200 OK)\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"    pm.test(\"Response contains a list of animals\", function () {\r",
											"        pm.expect(jsonData).to.be.an('array');\r",
											"    });\r",
											"\r",
											"// Handle invalid page number (400 Bad Request)\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Page number must be >= 1\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"Bad Request:\", bodyText);\r",
											"\r",
											"// Handle not found (404) - Shelter or animals missing\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - No animals found\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"Not Found:\", bodyText);\r",
											"\r",
											"// Handle internal server error (500)\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500) - Unexpected backend failure\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"Internal Server Error:\", bodyText);\r",
											"\r",
											"// Catch any other unexpected status codes\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"Unexpected response:\", bodyText);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/shelters/11111111-1111-1111-1111-111111111111/animals?pageNumber=1",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"shelters",
										"11111111-1111-1111-1111-111111111111",
										"animals"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "1"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "GetAnimalsByShelter Without Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Extract response info\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"}\r",
											"\r",
											"// Ensure response is not empty\r",
											"pm.test(\"Response is not empty\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// Handle success (200 OK)\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"    pm.test(\"Response contains a list of animals for the given shelter\", function () {\r",
											"        pm.expect(jsonData).to.be.an('array');\r",
											"    });\r",
											"\r",
											"    console.log(\"Retrieved \" + (jsonData ? jsonData.length : 0) + \" animals from shelter \" + pm.variables.get(\"shelterId\"));\r",
											"\r",
											"// Handle invalid page number (400 Bad Request)\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Page number must be >= 1\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"Bad Request:\", bodyText);\r",
											"\r",
											"// Handle not found (404) - Shelter or animals missing\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Shelter not found or no animals in shelter\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"Not Found:\", bodyText);\r",
											"\r",
											"// Handle internal server error (500)\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500) - Unexpected backend failure\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"Internal Server Error:\", bodyText);\r",
											"\r",
											"// Catch any other unexpected status codes\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"Unexpected response:\", bodyText);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/shelters/11111111-1111-1111-1111-111111111111/animals",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"shelters",
										"11111111-1111-1111-1111-111111111111",
										"animals"
									]
								}
							},
							"response": []
						},
						{
							"name": "GetAnimalsByShelter WithoutAuth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Extract response info\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"}\r",
											"\r",
											"// Ensure response is not empty\r",
											"pm.test(\"Response is not empty\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// Handle success (200 OK)\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"    pm.test(\"Response contains a list of animals for the given shelter\", function () {\r",
											"        pm.expect(jsonData).to.be.an('array');\r",
											"    });\r",
											"\r",
											"    console.log(\"Retrieved \" + (jsonData ? jsonData.length : 0) + \" animals from shelter \" + pm.variables.get(\"shelterId\"));\r",
											"\r",
											"// Handle invalid page number (400 Bad Request)\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Page number must be >= 1\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"Bad Request:\", bodyText);\r",
											"\r",
											"// Handle not found (404) - Shelter or animals missing\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Shelter not found or no animals in shelter\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"Not Found:\", bodyText);\r",
											"    // Handle unauthorized (401)\r",
											"} else if (statusCode === 401) {\r",
											"    pm.test(\"Unauthorized (401) - Missing or invalid authentication token\", function () {\r",
											"        pm.response.to.have.status(401);\r",
											"    });\r",
											"    console.warn(\"Unauthorized request. Verify JWT or authorization header.\");\r",
											"    console.warn(\"Response body:\", bodyText);\r",
											"\r",
											"// Handle internal server error (500)\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500) - Unexpected backend failure\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"Internal Server Error:\", bodyText);\r",
											"\r",
											"// Catch any other unexpected status codes\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"Unexpected response:\", bodyText);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/shelters/11111111-1111-1111-1111-111111111111/animals",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"shelters",
										"11111111-1111-1111-1111-111111111111",
										"animals"
									]
								}
							},
							"response": []
						},
						{
							"name": "GetAnimalsByShelter InvalidShelterId",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Extract response info\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"}\r",
											"\r",
											"// Ensure response is not empty\r",
											"pm.test(\"Response is not empty\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// Handle success (200 OK)\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"\r",
											"// Handle invalid page number (400 Bad Request)\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Page number must be >= 1\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"Bad Request:\", bodyText);\r",
											"\r",
											"// Handle not found (404) - Shelter or animals missing\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Shelter not found or no animals in shelter\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"Not Found:\", bodyText);\r",
											"\r",
											"// Handle internal server error (500)\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500) - Unexpected backend failure\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"Internal Server Error:\", bodyText);\r",
											"\r",
											"// Catch any other unexpected status codes\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"Unexpected response:\", bodyText);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/shelters/11111111-1111-111-1111-111111111111/animals",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"shelters",
										"11111111-1111-111-1111-111111111111",
										"animals"
									]
								}
							},
							"response": []
						},
						{
							"name": "GetAnimalsByShelter With Invalid Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Extract response info\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData;\r",
											"\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = null;\r",
											"}\r",
											"\r",
											"// Ensure response is not empty\r",
											"pm.test(\"Response is not empty\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// Handle success (200 OK)\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"// Handle invalid page number (400 Bad Request)\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Page number must be >= 1\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"Bad Request:\", bodyText);\r",
											"\r",
											"// Handle not found (404) - Shelter or animals missing\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Shelter not found or no animals in shelter\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"Not Found:\", bodyText);\r",
											"\r",
											"// Handle internal server error (500)\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500) - Unexpected backend failure\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"Internal Server Error:\", bodyText);\r",
											"\r",
											"// Catch any other unexpected status codes\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"Unexpected response:\", bodyText);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/shelters/11111111-1111-1111-1111-111111111111/animals?pageNumber=-1",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"shelters",
										"11111111-1111-1111-1111-111111111111",
										"animals"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "-1"
										}
									]
								}
							},
							"response": []
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{accessToken_adminCAA}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"exec": [
									"\r",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Get Animal Detail",
					"item": [
						{
							"name": "TC2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(`Status code is 404`, function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Expected body response\", function () {\r",
											"        pm.expect(pm.response.text()).to.include(\"Animal not retrievable\");\r",
											"    });"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd7b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd7b"
									]
								}
							},
							"response": []
						},
						{
							"name": "TC3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(`Status code is 404`, function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Expected body response\", function () {\r",
											"        pm.expect(pm.response.text()).to.include(\"Animal not found\");\r",
											"    });"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/ffffffff-ffff-ffff-ffff-ffffffffffff",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"ffffffff-ffff-ffff-ffff-ffffffffffff"
									]
								}
							},
							"response": []
						},
						{
							"name": "TC4",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(`Status code is 400`, function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Expected body response\", function () {\r",
											"        pm.expect(pm.response.text()).to.include(\"must be a valid GUID\");\r",
											"    });"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/longstriiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiing",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"longstriiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiing"
									]
								}
							},
							"response": []
						},
						{
							"name": "TC1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(`Status code is 200`, function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Valid JSON Response\", function () {\r",
											"        pm.response.to.be.json;\r",
											"    });"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Animals",
					"item": [
						{
							"name": "Get Animals WIth Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?pageNumber=1",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "1"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals WIth Invalid Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?pageNumber=-1",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "-1"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals Without Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals by Name Asc",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?sortBy=name&order=asc",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "sortBy",
											"value": "name"
										},
										{
											"key": "order",
											"value": "asc"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals by Age Asc",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?sortBy=age&order=asc",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "sortBy",
											"value": "age"
										},
										{
											"key": "order",
											"value": "asc"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals by CreateDate Asc",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?sortBy=create&order=asc",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "sortBy",
											"value": "create"
										},
										{
											"key": "order",
											"value": "asc"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals by Name Desc",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?sortBy=name&order=desc",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "sortBy",
											"value": "name"
										},
										{
											"key": "order",
											"value": "desc"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals by Age Desc",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?sortBy=age&order=desc",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "sortBy",
											"value": "age"
										},
										{
											"key": "order",
											"value": "desc"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Animals by CreateDate Desc",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let json;\r",
											"\r",
											"// Safely parse JSON even if the body is not JSON (e.g., 400 errors)\r",
											"try {\r",
											"    json = pm.response.json();\r",
											"} catch {\r",
											"    json = null;\r",
											"}\r",
											"\r",
											"// Status\r",
											"pm.test(\"Status is valid\", function () {\r",
											"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404, 500]);\r",
											"});\r",
											"\r",
											"// If no JSON, stop tests here (e.g., 400/404 plain text)\r",
											"if (!json || typeof json !== \"object\") {\r",
											"    console.warn(\"No JSON body to validate.\");\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 1: PAGINATED RESPONSE (has metadata) ---\r",
											"if (json.items && Array.isArray(json.items)) {\r",
											"\r",
											"    pm.test(\"Response contains pagination metadata\", function () {\r",
											"        pm.expect(json).to.have.property(\"items\");\r",
											"        pm.expect(json).to.have.property(\"currentPage\");\r",
											"        pm.expect(json).to.have.property(\"pageSize\");\r",
											"        pm.expect(json).to.have.property(\"totalCount\");\r",
											"        pm.expect(json).to.have.property(\"totalPages\");\r",
											"    });\r",
											"\r",
											"    pm.test(\"Items is an array\", function () {\r",
											"        pm.expect(json.items).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    const items = json.items;\r",
											"\r",
											"    // Sorting logic\r",
											"    const sortBy = pm.request.url.query.get(\"sortBy\") || \"created\";\r",
											"    const order = pm.request.url.query.get(\"order\") || \"desc\";\r",
											"    const year = d => new Date().getUTCFullYear() - new Date(d.birthDate).getUTCFullYear();\r",
											"\r",
											"    if (sortBy === \"name\") {\r",
											"        pm.test(\"List sorted by NAME (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"age\") {\r",
											"        pm.test(\"List sorted by AGE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? year(a) - year(b) : year(b) - year(a));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    if (sortBy === \"created\") {\r",
											"        pm.test(\"List sorted by CREATED DATE (\" + order + \")\", function () {\r",
											"            const sorted = [...items].sort((a, b) =>\r",
											"                order === \"asc\" ? new Date(a.createdAt) - new Date(b.createdAt)\r",
											"                                : new Date(b.createdAt) - new Date(a.createdAt));\r",
											"            pm.expect(items).to.eql(sorted);\r",
											"        });\r",
											"    }\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 2: NON-PAGINATED ARRAY ---\r",
											"if (Array.isArray(json)) {\r",
											"\r",
											"    pm.test(\"Response is a plain list (no pagination)\", function () {\r",
											"        pm.expect(json).to.be.an(\"array\");\r",
											"    });\r",
											"\r",
											"    return;\r",
											"}\r",
											"\r",
											"// --- CASE 3: Something unexpected ---\r",
											"pm.test(\"Response structure is valid\", function () {\r",
											"    pm.expect.fail(\"Unknown response format: \" + JSON.stringify(json));\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals?sortBy=create&order=desc",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals"
									],
									"query": [
										{
											"key": "sortBy",
											"value": "create"
										},
										{
											"key": "order",
											"value": "desc"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Edit Animal",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_adminCAA\", jsonData.accessToken);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Edit Animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData = null;\r",
											"\r",
											"// Try parsing JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON:\", e.message);\r",
											"}\r",
											"\r",
											"// === Basic validation ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Handle success (200 OK) ===\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"    pm.test(\"Response contains valid animal object\", function () {\r",
											"        // Ensure JSON exists and is an object\r",
											"        pm.expect(jsonData).to.be.an(\"object\");\r",
											"        pm.expect(jsonData).to.have.property(\"id\");\r",
											"        pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"animalState\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"colour\");\r",
											"        pm.expect(jsonData).to.have.property(\"description\");\r",
											"        pm.expect(jsonData).to.have.property(\"cost\");\r",
											"        pm.expect(jsonData).to.have.property(\"features\");\r",
											"        pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"        pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"        pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"        // Optional nested property: images[]\r",
											"        pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"        if (jsonData.images.length > 0) {\r",
											"            const img = jsonData.images[0];\r",
											"            pm.expect(img).to.be.an(\"object\");\r",
											"            pm.expect(img).to.have.property(\"id\");\r",
											"            pm.expect(img).to.have.property(\"url\");\r",
											"            pm.expect(img).to.have.property(\"isPrincipal\");\r",
											"            pm.expect(img).to.have.property(\"description\");\r",
											"        }\r",
											"    });\r",
											"\r",
											"    console.log(\"‚úÖ Animal updated successfully:\", jsonData?.name);\r",
											"\r",
											"    // Use console.log instead of console.table (Newman safe)\r",
											"    console.log(\"üìã Update Summary:\\n\" + JSON.stringify({\r",
											"        ID: jsonData?.id || \"N/A\",\r",
											"        Name: jsonData?.name || \"N/A\",\r",
											"        State: jsonData?.animalState || \"N/A\",\r",
											"        ImageCount: jsonData?.images?.length || 0\r",
											"    }, null, 2));\r",
											"\r",
											"// === Handle bad request (400) ===\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Validation or input error\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"‚ö†Ô∏è Invalid data:\", bodyText);\r",
											"\r",
											"// === Handle unauthorized (401) ===\r",
											"} else if (statusCode === 401) {\r",
											"    pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"        pm.response.to.have.status(401);\r",
											"    });\r",
											"    console.warn(\"üö´ Unauthorized. Check JWT or authentication header.\");\r",
											"\r",
											"// === Handle forbidden (403) ===\r",
											"} else if (statusCode === 403) {\r",
											"    pm.test(\"Forbidden (403) - Insufficient permissions\", function () {\r",
											"        pm.response.to.have.status(403);\r",
											"    });\r",
											"    console.warn(\"‚õî Access denied. Only AdminCAA can edit animals.\");\r",
											"\r",
											"// === Handle not found (404) ===\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"‚ùì Animal not found:\", bodyText);\r",
											"\r",
											"// === Handle internal server error (500) ===\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500)\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"üí• Backend error:\", bodyText);\r",
											"\r",
											"// === Unexpected status ===\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"‚ö†Ô∏è Unexpected response:\", bodyText);\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n        \"name\": \"Celinho\",\r\n        \"species\": \"Dog\",\r\n        \"size\": \"Small\",\r\n        \"sex\": \"Male\",\r\n        \"breedId\": \"3c3c3333-3333-3333-3333-333333333333\",\r\n        \"animalState\": \"PartiallyFostered\",\r\n        \"colour\": \"Dourado\",\r\n        \"birthDate\": \"2024-01-11\",\r\n        \"age\": 1,\r\n        \"description\": \"Cadela pequena e simp√°tica, ideal para crian√ßas.\",\r\n        \"sterilized\": false,\r\n        \"features\": \"Muito ativa, adora correr na roda\",\r\n        \"cost\": 15\r\n    }",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd6b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd6b"
									]
								}
							},
							"response": []
						},
						{
							"name": "Edit Animal - Invalid State",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData = null;\r",
											"\r",
											"// Try parsing JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON:\", e.message);\r",
											"}\r",
											"\r",
											"// === Basic validation ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Handle success (200 OK) ===\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"    pm.test(\"Response contains valid animal object\", function () {\r",
											"        // Ensure JSON exists and is an object\r",
											"        pm.expect(jsonData).to.be.an(\"object\");\r",
											"        pm.expect(jsonData).to.have.property(\"id\");\r",
											"        pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"animalState\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"colour\");\r",
											"        pm.expect(jsonData).to.have.property(\"description\");\r",
											"        pm.expect(jsonData).to.have.property(\"cost\");\r",
											"        pm.expect(jsonData).to.have.property(\"features\");\r",
											"        pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"        pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"        pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"        // Optional nested property: images[]\r",
											"        pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"        if (jsonData.images.length > 0) {\r",
											"            const img = jsonData.images[0];\r",
											"            pm.expect(img).to.be.an(\"object\");\r",
											"            pm.expect(img).to.have.property(\"id\");\r",
											"            pm.expect(img).to.have.property(\"url\");\r",
											"            pm.expect(img).to.have.property(\"isPrincipal\");\r",
											"            pm.expect(img).to.have.property(\"description\");\r",
											"        }\r",
											"    });\r",
											"\r",
											"    console.log(\"‚úÖ Animal updated successfully:\", jsonData?.name);\r",
											"\r",
											"    // Use console.log instead of console.table (Newman safe)\r",
											"    console.log(\"üìã Update Summary:\\n\" + JSON.stringify({\r",
											"        ID: jsonData?.id || \"N/A\",\r",
											"        Name: jsonData?.name || \"N/A\",\r",
											"        State: jsonData?.animalState || \"N/A\",\r",
											"        ImageCount: jsonData?.images?.length || 0\r",
											"    }, null, 2));\r",
											"\r",
											"// === Handle bad request (400) ===\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Validation or input error\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"‚ö†Ô∏è Invalid data:\", bodyText);\r",
											"\r",
											"// === Handle unauthorized (401) ===\r",
											"} else if (statusCode === 401) {\r",
											"    pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"        pm.response.to.have.status(401);\r",
											"    });\r",
											"    console.warn(\"üö´ Unauthorized. Check JWT or authentication header.\");\r",
											"\r",
											"// === Handle forbidden (403) ===\r",
											"} else if (statusCode === 403) {\r",
											"    pm.test(\"Forbidden (403) - Insufficient permissions\", function () {\r",
											"        pm.response.to.have.status(403);\r",
											"    });\r",
											"    console.warn(\"‚õî Access denied. Only AdminCAA can edit animals.\");\r",
											"\r",
											"// === Handle not found (404) ===\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"‚ùì Animal not found:\", bodyText);\r",
											"\r",
											"// === Handle internal server error (500) ===\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500)\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"üí• Backend error:\", bodyText);\r",
											"\r",
											"// === Unexpected status ===\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"‚ö†Ô∏è Unexpected response:\", bodyText);\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n        \"id\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd4b\",\r\n        \"name\": \"Mika\",\r\n        \"species\": \"Cat\",\r\n        \"size\": \"Small\",\r\n        \"sex\": \"Female\",\r\n        \"breedId\":\"2b2b2222-2222-2222-2222-222222222222\",\r\n        \"animalState\": \"Removed\",\r\n        \"colour\": \"Preto\",\r\n        \"birthDate\": \"2020-08-22\",\r\n        \"age\": 5,\r\n        \"description\": \"Gata calma e d√≥cil, procura um lar tranquilo.\",\r\n        \"sterilized\": true,\r\n        \"features\": \"Olhos azuis intensos\",\r\n        \"cost\": 25,\r\n        \"shelterId\": \"11111111-1111-1111-1111-111111111111\",\r\n        \"images\": [\r\n            {\r\n                \"id\": \"2fe20089-a7c5-48ce-965b-5172b3a2fdac\",\r\n                \"isPrincipal\": true,\r\n                \"url\": \"https://placekitten.com/400/400.jpg\",\r\n                \"description\": \"Mika deitada no sof√°\"\r\n            }\r\n        ]\r\n    }",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b"
									]
								}
							},
							"response": []
						},
						{
							"name": "Edit Animal WithoutAuth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === Extract response info ===\r",
											"const statusCode = pm.response.code;\r",
											"const bodyText = pm.response.text();\r",
											"let jsonData = null;\r",
											"\r",
											"// Try parsing JSON safely\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON:\", e.message);\r",
											"}\r",
											"\r",
											"// === Basic validation ===\r",
											"pm.test(\"Response body is defined\", function () {\r",
											"    pm.expect(bodyText).to.not.be.undefined;\r",
											"});\r",
											"\r",
											"// === Handle success (200 OK) ===\r",
											"if (statusCode === 200) {\r",
											"    pm.test(\"Status code is 200 (OK)\", function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"    pm.test(\"Response contains valid animal object\", function () {\r",
											"        // Ensure JSON exists and is an object\r",
											"        pm.expect(jsonData).to.be.an(\"object\");\r",
											"        pm.expect(jsonData).to.have.property(\"id\");\r",
											"        pm.expect(jsonData).to.have.property(\"name\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"species\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"size\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"sex\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"animalState\").that.is.a(\"string\");\r",
											"        pm.expect(jsonData).to.have.property(\"colour\");\r",
											"        pm.expect(jsonData).to.have.property(\"description\");\r",
											"        pm.expect(jsonData).to.have.property(\"cost\");\r",
											"        pm.expect(jsonData).to.have.property(\"features\");\r",
											"        pm.expect(jsonData).to.have.property(\"sterilized\");\r",
											"        pm.expect(jsonData).to.have.property(\"birthDate\");\r",
											"        pm.expect(jsonData).to.have.property(\"shelterId\");\r",
											"\r",
											"        // Optional nested property: images[]\r",
											"        pm.expect(jsonData).to.have.property(\"images\").that.is.an(\"array\");\r",
											"        if (jsonData.images.length > 0) {\r",
											"            const img = jsonData.images[0];\r",
											"            pm.expect(img).to.be.an(\"object\");\r",
											"            pm.expect(img).to.have.property(\"id\");\r",
											"            pm.expect(img).to.have.property(\"url\");\r",
											"            pm.expect(img).to.have.property(\"isPrincipal\");\r",
											"            pm.expect(img).to.have.property(\"description\");\r",
											"        }\r",
											"    });\r",
											"\r",
											"    console.log(\"‚úÖ Animal updated successfully:\", jsonData?.name);\r",
											"\r",
											"    // Use console.log instead of console.table (Newman safe)\r",
											"    console.log(\"üìã Update Summary:\\n\" + JSON.stringify({\r",
											"        ID: jsonData?.id || \"N/A\",\r",
											"        Name: jsonData?.name || \"N/A\",\r",
											"        State: jsonData?.animalState || \"N/A\",\r",
											"        ImageCount: jsonData?.images?.length || 0\r",
											"    }, null, 2));\r",
											"\r",
											"// === Handle bad request (400) ===\r",
											"} else if (statusCode === 400) {\r",
											"    pm.test(\"Bad Request (400) - Validation or input error\", function () {\r",
											"        pm.response.to.have.status(400);\r",
											"    });\r",
											"    console.warn(\"‚ö†Ô∏è Invalid data:\", bodyText);\r",
											"\r",
											"// === Handle unauthorized (401) ===\r",
											"} else if (statusCode === 401) {\r",
											"    pm.test(\"Unauthorized (401) - Missing or invalid token\", function () {\r",
											"        pm.response.to.have.status(401);\r",
											"    });\r",
											"    console.warn(\"üö´ Unauthorized. Check JWT or authentication header.\");\r",
											"\r",
											"// === Handle forbidden (403) ===\r",
											"} else if (statusCode === 403) {\r",
											"    pm.test(\"Forbidden (403) - Insufficient permissions\", function () {\r",
											"        pm.response.to.have.status(403);\r",
											"    });\r",
											"    console.warn(\"‚õî Access denied. Only AdminCAA can edit animals.\");\r",
											"\r",
											"// === Handle not found (404) ===\r",
											"} else if (statusCode === 404) {\r",
											"    pm.test(\"Not Found (404) - Animal not found\", function () {\r",
											"        pm.response.to.have.status(404);\r",
											"    });\r",
											"    console.warn(\"‚ùì Animal not found:\", bodyText);\r",
											"\r",
											"// === Handle internal server error (500) ===\r",
											"} else if (statusCode === 500) {\r",
											"    pm.test(\"Internal Server Error (500)\", function () {\r",
											"        pm.response.to.have.status(500);\r",
											"    });\r",
											"    console.error(\"üí• Backend error:\", bodyText);\r",
											"\r",
											"// === Unexpected status ===\r",
											"} else {\r",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {\r",
											"        pm.expect(statusCode).to.be.oneOf([200, 400, 401, 403, 404, 500]);\r",
											"    });\r",
											"    console.warn(\"‚ö†Ô∏è Unexpected response:\", bodyText);\r",
											"}\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n        \"id\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd4b\",\r\n        \"name\": \"Mika\",\r\n        \"species\": \"Cat\",\r\n        \"size\": \"Small\",\r\n        \"sex\": \"Female\",\r\n        \"breedId\":\"2b2b2222-2222-2222-2222-222222222222\",\r\n        \"animalState\": \"HasOwner\",\r\n        \"colour\": \"Preto\",\r\n        \"birthDate\": \"2020-08-22\",\r\n        \"age\": 5,\r\n        \"description\": \"Gata calma e d√≥cil, procura um lar tranquilo.\",\r\n        \"sterilized\": true,\r\n        \"features\": \"Olhos azuis intensos\",\r\n        \"cost\": 25,\r\n        \"shelterId\": \"11111111-1111-1111-1111-111111111111\",\r\n        \"images\": [\r\n            {\r\n                \"id\": \"2fe20089-a7c5-48ce-965b-5172b3a2fdac\",\r\n                \"isPrincipal\": true,\r\n                \"url\": \"https://placekitten.com/400/400.jpg\",\r\n                \"description\": \"Mika deitada no sof√°\"\r\n            }\r\n        ]\r\n    }",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Check Eligibility - Success Cases",
			"item": [
				{
					"name": "Check Eligibility - Animal Available (200 OK)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is boolean true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.true;",
									"});",
									"",
									"pm.test(\"Response time is less than 500ms\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(500);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/available-animal-id-123",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"available-animal-id-123"
							]
						},
						"description": "Testa um animal dispon√≠vel para ado√ß√£o. Deve retornar 200 OK com true."
					},
					"response": []
				},
				{
					"name": "Check Eligibility - Animal Partially Fostered (200 OK)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is boolean true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.true;",
									"});",
									"",
									"pm.test(\"Response time is less than 500ms\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(500);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/partially-fostered-animal-id",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"partially-fostered-animal-id"
							]
						},
						"description": "Testa um animal parcialmente acolhido. Deve retornar 400."
					},
					"response": []
				},
				{
					"name": "Check Eligibility - Animal Totally Fostered (200 OK)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is boolean true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.true;",
									"});",
									"",
									"pm.test(\"Response time is less than 500ms\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(500);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/totally-fostered-animal-id",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"totally-fostered-animal-id"
							]
						},
						"description": "Testa um animal totalmente acolhido. Deve retornar 400."
					},
					"response": []
				}
			]
		},
		{
			"name": "Check Eligibility - Error Cases",
			"item": [
				{
					"name": "Check Eligibility - Animal Not Found (404)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    const text = pm.response.text();",
									"    pm.expect(text).to.include(\"Animal ID not found\");",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/non-existent-animal-id",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"non-existent-animal-id"
							]
						},
						"description": "Testa com um ID de animal que n√£o existe. Deve retornar 404."
					},
					"response": []
				},
				{
					"name": "Check Eligibility - Animal Has Owner (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/animal-with-owner-id",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"animal-with-owner-id"
							]
						},
						"description": "Testa um animal que j√° tem dono. Deve retornar 400."
					},
					"response": []
				},
				{
					"name": "Check Eligibility - Animal Inactive (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/inactive-animal-id",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"inactive-animal-id"
							]
						},
						"description": "Testa um animal inativo. Deve retornar 400."
					},
					"response": []
				}
			]
		},
		{
			"name": "Check Eligibility - Edge Cases",
			"item": [
				{
					"name": "Check Eligibility - Empty String ID (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 or 404\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								""
							]
						},
						"description": "Testa com string vazia."
					},
					"response": []
				},
				{
					"name": "Check Eligibility - Special Characters in ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response code is valid\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404, 400]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}/api/animals/check-eligibility/animal-id-@#$%",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals",
								"check-eligibility",
								"animal-id-@"
							],
							"hash": "$%"
						},
						"description": "Testa com caracteres especiais no ID."
					},
					"response": []
				}
			]
		},
		{
			"name": "Images",
			"item": [
				{
					"name": "Add Images Animal",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Adicionar 1 Imagem Secund√°ria",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201 Created\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains exactly 1 image\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.lengthOf(1);\r",
											"});\r",
											"\r",
											"pm.test(\"Image has required properties\", function () {\r",
											"    const image = pm.response.json()[0];\r",
											"    pm.expect(image).to.have.property('id');\r",
											"    pm.expect(image).to.have.property('url');\r",
											"    pm.expect(image).to.have.property('publicId');\r",
											"    pm.expect(image).to.have.property('description');\r",
											"    pm.expect(image).to.have.property('isPrincipal');\r",
											"});\r",
											"\r",
											"pm.test(\"Image description matches request\", function () {\r",
											"    const image = pm.response.json()[0];\r",
											"    pm.expect(image.description).to.equal(\"New photo\");\r",
											"});\r",
											"\r",
											"pm.test(\"Image is not principal\", function () {\r",
											"    const image = pm.response.json()[0];\r",
											"    pm.expect(image.isPrincipal).to.be.false;\r",
											"});\r",
											"\r",
											"pm.test(\"Image URL is from Cloudinary\", function () {\r",
											"    const image = pm.response.json()[0];\r",
											"    pm.expect(image.url).to.include(\"cloudinary\");\r",
											"    pm.expect(image.url).to.include(\"https://\");\r",
											"});\r",
											"\r",
											"pm.test(\"PublicId contains correct path\", function () {\r",
											"    const image = pm.response.json()[0];\r",
											"    pm.expect(image.publicId).to.not.be.empty;\r",
											"    pm.expect(image.publicId).to.include(\"SeePaw/Animal/\");\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is acceptable\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(5000);\r",
											"});\r",
											"\r",
											"// Guardar imageId para poss√≠vel cleanup\r",
											"if (pm.response.code === 201) {\r",
											"    const image = pm.response.json()[0];\r",
											"    pm.environment.set(\"lastCreatedImageId\", image.id);\r",
											"    console.log(\"‚úÖ Image created with ID:\", image.id);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "Images[0].File",
											"type": "file",
											"src": "images.jpeg"
										},
										{
											"key": "Images[0].Description",
											"value": "New photo",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"images"
									]
								}
							},
							"response": []
						},
						{
							"name": "Adicionar M√∫ltiplas Imagens",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201 Created\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains exactly 2 images\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.lengthOf(2);\r",
											"});\r",
											"\r",
											"pm.test(\"All images have unique IDs\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    const ids = jsonData.map(img => img.id);\r",
											"    const uniqueIds = [...new Set(ids)];\r",
											"    pm.expect(uniqueIds).to.have.lengthOf(2, \"Found duplicate IDs\");\r",
											"});\r",
											"\r",
											"pm.test(\"None of the new images are principal\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    const principalCount = jsonData.filter(img => img.isPrincipal === true).length;\r",
											"    pm.expect(principalCount).to.equal(0, \"New images should not be principal\");\r",
											"});\r",
											"\r",
											"pm.test(\"Descriptions match request\", function () {\r",
											"    const images = pm.response.json();\r",
											"    \r",
											"    pm.expect(images[0].description).to.equal(\"Foto lateral esquerda\");\r",
											"    pm.expect(images[1].description).to.equal(\"Foto lateral direita\");\r",
											"    // Terceira pode ser null ou empty string\r",
											"});\r",
											"\r",
											"pm.test(\"All images have valid Cloudinary URLs\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach((image, index) => {\r",
											"        pm.expect(image.url, `Image ${index} URL`).to.include(\"cloudinary\");\r",
											"        pm.expect(image.url, `Image ${index} URL`).to.match(/^https:\\/\\//);\r",
											"        pm.expect(image.publicId, `Image ${index} publicId`).to.not.be.empty;\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is reasonable for multiple uploads\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(10000);\r",
											"});\r",
											"\r",
											"// Log para debug\r",
											"console.log(\"‚úÖ Successfully added\", pm.response.json().length, \"images\");\r",
											"pm.response.json().forEach((img, i) => {\r",
											"    console.log(`  Image ${i+1}: ${img.description || '(no description)'} - Principal: ${img.isPrincipal}`);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "Images[0].File",
											"type": "file",
											"src": "images.jpeg"
										},
										{
											"key": "Images[0].Description",
											"value": "Foto lateral esquerda",
											"type": "text"
										},
										{
											"key": "Images[0].IsPrincipal",
											"value": " false",
											"type": "text"
										},
										{
											"key": "Images[1].File",
											"type": "file",
											"src": "images.jpeg"
										},
										{
											"key": "Images[1].Description",
											"value": "Foto lateral direita",
											"type": "text"
										},
										{
											"key": "Images[1].IsPrincipal",
											"value": " false",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"images"
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Vazia de Imagens",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is ValidationProblemDetails\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    \r",
											"    pm.expect(jsonData).to.have.property('errors');\r",
											"    pm.expect(jsonData.title).to.include(\"One or more validation errors occurred\");\r",
											"});\r",
											"\r",
											"pm.test(\"Error mentions Images field\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    const errorKeys = Object.keys(jsonData.errors).map(k => k.toLowerCase());\r",
											"    \r",
											"    const hasImagesError = errorKeys.some(key => key.includes('images'));\r",
											"    \r",
											"    pm.expect(hasImagesError).to.be.true;\r",
											"});\r",
											"\r",
											"pm.test(\"Error indicates at least one image required\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    const allErrors = Object.values(jsonData.errors).flat().join(' ').toLowerCase();\r",
											"    \r",
											"    const hasRequiredError = \r",
											"        allErrors.includes('at least one') || \r",
											"        allErrors.includes('required') ||\r",
											"        allErrors.includes('empty');\r",
											"    \r",
											"    pm.expect(hasRequiredError).to.be.true;\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is fast (validation only)\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(300);\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Correctly rejected empty image list\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"images"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Admin CAA 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"filipe@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "AdminCAA de Outro Shelter",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message mentions shelter ownership\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    const lowerText = responseText.toLowerCase();\r",
											"    \r",
											"    pm.expect(lowerText).to.satisfy(text => \r",
											"        text.includes('shelter') || \r",
											"        text.includes('your shelter') ||\r",
											"        text.includes('only add images to animals from your shelter')\r",
											"    );\r",
											"});\r",
											"\r",
											"pm.test(\"No image upload occurred\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    \r",
											"    if (contentType && contentType.includes(\"application/json\")) {\r",
											"        try {\r",
											"            const jsonData = pm.response.json();\r",
											"            pm.expect(jsonData).to.not.be.an('array');\r",
											"            pm.expect(jsonData).to.not.have.property('url');\r",
											"        } catch (e) {\r",
											"            \r",
											"        }\r",
											"    }\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Correctly rejected - cross-shelter attempt\");\r",
											"console.log(\"   AdminCAA shelter:\", \"(shelter 1)\");\r",
											"console.log(\"   Animal shelter:\", \"(shelter 2)\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "Images[0].File",
											"type": "file",
											"src": "image2.jpeg"
										},
										{
											"key": "Images[0].Description",
											"value": " Tentativa cross-shelter",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"images"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal N√£o Existe",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates animal not found\", function () {\r",
											"    const responseText = pm.response.text().toLowerCase();\r",
											"    pm.expect(responseText).to.include('animal not found');\r",
											"});\r",
											"\r",
											"pm.test(\"No image data returned\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    \r",
											"    if (contentType && contentType.includes(\"application/json\")) {\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.not.be.an('array');\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "Images[0].File",
											"type": "file",
											"src": "image2.jpeg"
										},
										{
											"key": "Images[0].Description",
											"value": "Test animal inexistente",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{url}}/api/animals/12345678-1234-1234-1234-123456789012/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"12345678-1234-1234-1234-123456789012",
										"images"
									]
								}
							},
							"response": []
						},
						{
							"name": "Ficheiro Inv√°lido (Tipo)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is ValidationProblemDetails\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    \r",
											"    pm.expect(jsonData).to.have.property('errors');\r",
											"});\r",
											"\r",
											"pm.test(\"Error mentions file type validation\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    const allErrors = Object.values(jsonData.errors).flat().join(' ').toLowerCase();\r",
											"    \r",
											"    const hasFileTypeError = \r",
											"        allErrors.includes('image') || \r",
											"        allErrors.includes('file type') ||\r",
											"        allErrors.includes('valid');\r",
											"    \r",
											"    pm.expect(hasFileTypeError).to.be.true;\r",
											"});\r",
											"\r",
											"pm.test(\"No image was uploaded\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.not.be.an('array');\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Correctly rejected - invalid file type\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "Images[0].Description",
											"value": "Ficheiro n√£o-imagem",
											"type": "text"
										},
										{
											"key": "Images[0].File",
											"type": "file",
											"src": "invalid file.txt"
										}
									]
								},
								"url": {
									"raw": "{{url}}/api/animals/12345678-1234-1234-1234-123456789012/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"12345678-1234-1234-1234-123456789012",
										"images"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal Inativo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates inactive animal\", function () {\r",
											"    const responseText = pm.response.text().toLowerCase();\r",
											"    pm.expect(responseText).to.satisfy(text =>\r",
											"        text.includes('inactive') || \r",
											"        text.includes('cannot add images to inactive')\r",
											"    );\r",
											"});\r",
											"\r",
											"pm.test(\"No image was added\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    \r",
											"    if (contentType && contentType.includes(\"application/json\")) {\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.not.be.an('array');\r",
											"    }\r",
											"});\r",
											"\r",
											"pm.test(\"Response time is fast (state validation)\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "Images[0].Description",
											"value": "Tentativa em animal inativo",
											"type": "text"
										},
										{
											"key": "Images[0].File",
											"type": "file",
											"src": "shelter.jpg"
										}
									]
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd7b/images",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd7b",
										"images"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete Image Animal",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Image Animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/images/a2b6ff51-9650-4917-ba2d-3b403af67f41",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"images",
										"a2b6ff51-9650-4917-ba2d-3b403af67f41"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId vazio",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found (route not matched)\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{url}}/api/animals//images/00000000-0000-0000-0000-000000001102",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"",
										"images",
										"00000000-0000-0000-0000-000000001102"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId formato inv√°lido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is ValidationProblemDetails\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"errors\");\r",
											"    pm.expect(jsonData.type).to.eql(\"ValidationFailure\");\r",
											"    pm.expect(jsonData.title).to.eql(\"Validation error\");\r",
											"});\r",
											"\r",
											"pm.test(\"Contains AnimalId validation error\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.errors).to.have.property(\"AnimalId\");\r",
											"    pm.expect(jsonData.errors.AnimalId).to.be.an('array');\r",
											"    pm.expect(jsonData.errors.AnimalId[0]).to.include(\"GUID\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{url}}/api/animals/invalid-id-123/images/00000000-0000-0000-0000-000000001102",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"invalid-id-123",
										"images",
										"00000000-0000-0000-0000-000000001102"
									]
								}
							},
							"response": []
						},
						{
							"name": "ImageId formato inv√°lido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is ValidationProblemDetails\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"errors\");\r",
											"    pm.expect(jsonData.type).to.eql(\"ValidationFailure\");\r",
											"    pm.expect(jsonData.title).to.eql(\"Validation error\");\r",
											"});\r",
											"\r",
											"pm.test(\"Contains ImageId validation error\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.errors).to.have.property(\"ImageId\");\r",
											"    pm.expect(jsonData.errors.ImageId).to.be.an('array');\r",
											"    pm.expect(jsonData.errors.ImageId[0]).to.include(\"GUID\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/images/not-a-guid",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"images",
										"not-a-guid"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId n√£o existe no sistema",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Animal not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{url}}/api/animals/00000000-0000-0000-0000-000000000001/images/00000000-0000-0000-0000-000000001102",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"00000000-0000-0000-0000-000000000001",
										"images",
										"00000000-0000-0000-0000-000000001102"
									]
								}
							},
							"response": []
						},
						{
							"name": "ImageId n√£o existe no sistema",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Image not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd7b/images/00000000-0000-0000-0000-000000000002",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd7b",
										"images",
										"00000000-0000-0000-0000-000000000002"
									]
								}
							},
							"response": []
						},
						{
							"name": "Apagar imagem principal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about principal image\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Cannot delete the principal image\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd2b/images/00000000-0000-0000-0000-000000002101",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd2b",
										"images",
										"00000000-0000-0000-0000-000000002101"
									]
								}
							},
							"response": []
						},
						{
							"name": "Imagem n√£o pertence ao animal especificado",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about entity ownership\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"does not belong to the specified entity\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd2b/images/00000000-0000-0000-0000-000000001102",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd2b",
										"images",
										"00000000-0000-0000-0000-000000001102"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Admin CAA 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"filipe@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal n√£o pertence ao shelter do utilizador",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about shelter ownership\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"You can only delete images to animals from your shelter\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/images/00000000-0000-0000-0000-000000005102",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"images",
										"00000000-0000-0000-0000-000000005102"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Set Principal Image",
					"item": [
						{
							"name": "Login Admin CAA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set imagem sec como principal com sucesso",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"\r",
											"pm.test(\"Status code is 204 No Content\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"pm.test(\"Response body is empty\", function () {\r",
											"    pm.expect(pm.response.text()).to.be.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/images/00000000-0000-0000-0000-000000003102/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"images",
										"00000000-0000-0000-0000-000000003102",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId vazio",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found (route not matched)\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals//images/00000000-0000-0000-0000-000000003101/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"",
										"images",
										"00000000-0000-0000-0000-000000003101",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId formato inv√°lido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is ValidationProblemDetails\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"errors\");\r",
											"    pm.expect(jsonData.type).to.eql(\"ValidationFailure\");\r",
											"    pm.expect(jsonData.title).to.eql(\"Validation error\");\r",
											"});\r",
											"\r",
											"pm.test(\"Contains AnimalId validation error\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.errors).to.have.property(\"AnimalId\");\r",
											"    pm.expect(jsonData.errors.AnimalId).to.be.an('array');\r",
											"    pm.expect(jsonData.errors.AnimalId[0]).to.include(\"GUID\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/invalid-animal-id/images/00000000-0000-0000-0000-000000003101/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"invalid-animal-id",
										"images",
										"00000000-0000-0000-0000-000000003101",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "ImageId vazio",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found (route not matched)\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/images//set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"images",
										"",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "ImageId formato inv√°lido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is ValidationProblemDetails\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"errors\");\r",
											"    pm.expect(jsonData.type).to.eql(\"ValidationFailure\");\r",
											"    pm.expect(jsonData.title).to.eql(\"Validation error\");\r",
											"});\r",
											"\r",
											"pm.test(\"Contains ImageId validation error\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.errors).to.have.property(\"ImageId\");\r",
											"    pm.expect(jsonData.errors.ImageId).to.be.an('array');\r",
											"    pm.expect(jsonData.errors.ImageId[0]).to.include(\"GUID\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/images/not-a-valid-guid/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"images",
										"not-a-valid-guid",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "AnimalId n√£o existe no sistema",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about animal\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Animal not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/00000000-0000-0000-0000-000000000099/images/00000000-0000-0000-0000-000000003101/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"00000000-0000-0000-0000-000000000099",
										"images",
										"00000000-0000-0000-0000-000000003101",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "ImageId n√£o existe no sistema",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about image\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Image not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/images/00000000-0000-0000-0000-000000000088/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"images",
										"00000000-0000-0000-0000-000000000088",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "Imagem n√£o pertence ao animal especificado",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about image ownership\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Image does not belong to the specified animal\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/images/00000000-0000-0000-0000-000000005101/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"images",
										"00000000-0000-0000-0000-000000005101",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "Imagem j√° √© a principal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about image already being principal\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"Image already is the anima's main image\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/images/00000000-0000-0000-0000-000000005101/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"images",
										"00000000-0000-0000-0000-000000005101",
										"set-principal"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Admin CAA 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===\r",
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// === ‚úÖ Validate Content Type (accept both variants) ===\r",
											"pm.test(\"Response has JSON content type\", function () {\r",
											"    const contentType = pm.response.headers.get(\"Content-Type\");\r",
											"    pm.expect(contentType).to.include(\"application/json\");\r",
											"});\r",
											"\r",
											"// === ‚úÖ Parse JSON Response ===\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    jsonData = {};\r",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// === ‚úÖ Validate Token Fields ===\r",
											"pm.test(\"Response body contains accessToken\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");\r",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");\r",
											"});\r",
											"\r",
											"pm.test(\"Token expiration field exists\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"expiresIn\");\r",
											"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");\r",
											"});\r",
											"\r",
											"// === üß© Identify Login Type (Admin vs User) ===\r",
											"let tokenVarName;\r",
											"\r",
											"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {\r",
											"    tokenVarName = \"accessToken_adminCAA\";\r",
											"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {\r",
											"    tokenVarName = \"accessToken_user\";\r",
											"} else {\r",
											"    tokenVarName = \"accessToken_generic\";\r",
											"}\r",
											"\r",
											"// === ‚úÖ Save the correct token ===\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(tokenVarName, jsonData.accessToken);\r",
											"    console.log(`‚úÖ Saved token as '${tokenVarName}'`);\r",
											"} else {\r",
											"    console.error(\"‚ùå No accessToken found ‚Äî subsequent requests may fail authentication.\");\r",
											"}\r",
											"\r",
											"// === Optional: store extra fields for debugging or refresh logic ===\r",
											"if (jsonData.refreshToken) pm.environment.set(`${tokenVarName}_refresh`, jsonData.refreshToken);\r",
											"if (jsonData.tokenType) pm.environment.set(`${tokenVarName}_type`, jsonData.tokenType);\r",
											"if (jsonData.expiresIn) pm.environment.set(`${tokenVarName}_expiresIn`, jsonData.expiresIn);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"filipe@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set imagem sec como principal com sucesso Copy 10",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains error message about shelter ownership\", function () {\r",
											"    const responseText = pm.response.text();\r",
											"    pm.expect(responseText).to.include(\"You can only change main image of animals from your shelter\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/images/00000000-0000-0000-0000-000000005102/set-principal",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"images",
										"00000000-0000-0000-0000-000000005102",
										"set-principal"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Authentication For Gets OwnershipRequests & Owned Animals",
			"item": [
				{
					"name": "Login User with Ownership Requests",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// === ‚úÖ Validate Status Code ===",
									"pm.test(\"Status code is 200 (OK)\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"// === ‚úÖ Validate Content Type (accept both variants) ===",
									"pm.test(\"Response has JSON content type\", function () {",
									"    const contentType = pm.response.headers.get(\"Content-Type\");",
									"    pm.expect(contentType).to.include(\"application/json\");",
									"});",
									"",
									"// === ‚úÖ Parse JSON Response ===",
									"let jsonData;",
									"try {",
									"    jsonData = pm.response.json();",
									"} catch (e) {",
									"    jsonData = {};",
									"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
									"}",
									"",
									"// === ‚úÖ Validate Token Fields ===",
									"pm.test(\"Response body contains accessToken\", function () {",
									"    pm.expect(jsonData).to.have.property(\"accessToken\");",
									"    pm.expect(jsonData.accessToken).to.be.a(\"string\");",
									"});",
									"",
									"pm.test(\"Token expiration field exists\", function () {",
									"    pm.expect(jsonData).to.have.property(\"expiresIn\");",
									"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");",
									"});",
									"",
									"// === üß© Identify Login Type (Admin vs User) ===",
									"let tokenVarName;",
									"",
									"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {",
									"    tokenVarName = \"accessToken_adminCAA\";",
									"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {",
									"    tokenVarName = \"accessToken_user\";",
									"} else {",
									"    tokenVarName = \"accessToken_generic\";",
									"}",
									"",
									"// === ‚úÖ Save the correct token ===",
									"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
									"if (token) {",
									"    pm.environment.set(\"tokenOwnershipReq\", token);",
									"    console.log(\"‚úÖ Token guardado:\", token);",
									"} else {",
									"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user1@test.com\",\n  \"password\": \"Test@123\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/login",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login User with Owned Animals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"// === ‚úÖ Validate Content Type (accept both variants) ===",
									"pm.test(\"Response has JSON content type\", function () {",
									"    const contentType = pm.response.headers.get(\"Content-Type\");",
									"    pm.expect(contentType).to.include(\"application/json\");",
									"});",
									"",
									"// === ‚úÖ Parse JSON Response ===",
									"let jsonData;",
									"try {",
									"    jsonData = pm.response.json();",
									"} catch (e) {",
									"    jsonData = {};",
									"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
									"}",
									"",
									"// === ‚úÖ Validate Token Fields ===",
									"pm.test(\"Response body contains accessToken\", function () {",
									"    pm.expect(jsonData).to.have.property(\"accessToken\");",
									"    pm.expect(jsonData.accessToken).to.be.a(\"string\");",
									"});",
									"",
									"pm.test(\"Token expiration field exists\", function () {",
									"    pm.expect(jsonData).to.have.property(\"expiresIn\");",
									"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");",
									"});",
									"",
									"// === üß© Identify Login Type (Admin vs User) ===",
									"let tokenVarName;",
									"",
									"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {",
									"    tokenVarName = \"accessToken_adminCAA\";",
									"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {",
									"    tokenVarName = \"accessToken_user\";",
									"} else {",
									"    tokenVarName = \"accessToken_generic\";",
									"}",
									"",
									"// === ‚úÖ Save the correct token ===",
									"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
									"if (token) {",
									"    pm.environment.set(\"tokenOwnedAn\", token);",
									"    console.log(\"‚úÖ Token guardado:\", token);",
									"} else {",
									"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user2@test.com\",\n  \"password\": \"Test@123\"\n}"
						},
						"url": {
							"raw": "{{url}}/api/login",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login User with No Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// === ‚úÖ Validate Status Code ===",
									"pm.test(\"Status code is 200 (OK)\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"// === ‚úÖ Validate Content Type (accept both variants) ===",
									"pm.test(\"Response has JSON content type\", function () {",
									"    const contentType = pm.response.headers.get(\"Content-Type\");",
									"    pm.expect(contentType).to.include(\"application/json\");",
									"});",
									"",
									"// === ‚úÖ Parse JSON Response ===",
									"let jsonData;",
									"try {",
									"    jsonData = pm.response.json();",
									"} catch (e) {",
									"    jsonData = {};",
									"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
									"}",
									"",
									"// === ‚úÖ Validate Token Fields ===",
									"pm.test(\"Response body contains accessToken\", function () {",
									"    pm.expect(jsonData).to.have.property(\"accessToken\");",
									"    pm.expect(jsonData.accessToken).to.be.a(\"string\");",
									"});",
									"",
									"pm.test(\"Token expiration field exists\", function () {",
									"    pm.expect(jsonData).to.have.property(\"expiresIn\");",
									"    pm.expect(jsonData.expiresIn).to.be.a(\"number\");",
									"});",
									"",
									"// === üß© Identify Login Type (Admin vs User) ===",
									"let tokenVarName;",
									"",
									"if (pm.info.requestName.toLowerCase().includes(\"admin\")) {",
									"    tokenVarName = \"accessToken_adminCAA\";",
									"} else if (pm.info.requestName.toLowerCase().includes(\"user\")) {",
									"    tokenVarName = \"accessToken_user\";",
									"} else {",
									"    tokenVarName = \"accessToken_generic\";",
									"}",
									"",
									"// === ‚úÖ Save the correct token ===",
									"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
									"if (token) {",
									"    pm.environment.set(\"tokenEmpty\", token);",
									"    console.log(\"‚úÖ Token guardado:\", token);",
									"} else {",
									"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user3@test.com\",\n  \"password\": \"Test@123\"\n}"
						},
						"url": {
							"raw": "{{url}}/api/login",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get Ownership Requests",
			"item": [
				{
					"name": "Get Ownership Requests - With Pending Requests",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Has ownership requests\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.greaterThan(0);",
									"});",
									"",
									"pm.test(\"Contains pending status\", function () {",
									"    var jsonData = pm.response.json();",
									"    var hasPending = jsonData.some(item => item.ownershipStatus === 'Pending');",
									"    pm.expect(hasPending).to.be.true;",
									"});",
									"",
									"pm.test(\"Animal details are included\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData[0].id).to.exist;",
									"    pm.expect(jsonData[0].animalName).to.exist;",
									"    pm.expect(jsonData[0].amount).to.exist;",
									"    pm.expect(jsonData[0].ownershipStatus).to.exist;",
									"});",
									"",
									"pm.test(\"Non-rejected appear first\", function () {",
									"    var jsonData = pm.response.json();",
									"    var firstRejectedIndex = jsonData.findIndex(item => item.status === 2);",
									"    var lastNonRejectedIndex = -1;",
									"    for (let i = jsonData.length - 1; i >= 0; i--) {",
									"        if (jsonData[i].status !== 2) {",
									"            lastNonRejectedIndex = i;",
									"            break;",
									"        }",
									"    }",
									"    if (firstRejectedIndex !== -1 && lastNonRejectedIndex !== -1) {",
									"        pm.expect(lastNonRejectedIndex).to.be.lessThan(firstRejectedIndex);",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{tokenOwnershipReq}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{tokenOwnershipReq}}"
							}
						],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/user-requests",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"user-requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ownership Requests - With Recent Rejected",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Contains rejected requests within last month\", function () {",
									"    var jsonData = pm.response.json();",
									"    var hasRecentRejected = jsonData.some(item => {",
									"        if (item.ownershipStatus === 'Rejected' && item.updatedAt) {",
									"            var updatedDate = new Date(item.updatedAt);",
									"            var oneMonthAgo = new Date();",
									"            oneMonthAgo.setMonth(oneMonthAgo.getMonth() - 1);",
									"            return updatedDate >= oneMonthAgo;",
									"        }",
									"        return false;",
									"    });",
									"    pm.expect(hasRecentRejected).to.be.true;",
									"});",
									"",
									"pm.test(\"Does not contain old rejected requests\", function () {",
									"    var jsonData = pm.response.json();",
									"    var hasOldRejected = jsonData.some(item => {",
									"        if (item.status === 2 && item.updatedAt) {",
									"            var updatedDate = new Date(item.updatedAt);",
									"            var oneMonthAgo = new Date();",
									"            oneMonthAgo.setMonth(oneMonthAgo.getMonth() - 1);",
									"            return updatedDate < oneMonthAgo;",
									"        }",
									"        return false;",
									"    });",
									"    pm.expect(hasOldRejected).to.be.false;",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{tokenOwnershipReq}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{tokenOwnershipReq}}"
							}
						],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/user-requests",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"user-requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ownership Requests - Empty Result",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is empty array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    pm.expect(jsonData.length).to.equal(0);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{tokenOwnedAn}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{tokenOwnedAn}}"
							}
						],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/user-requests",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"user-requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ownership Requests - Unauthorized",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/user-requests",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"user-requests"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get Owned Animals",
			"item": [
				{
					"name": "Get Owned Animals - With Animals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Has owned animals\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.greaterThan(0);",
									"});",
									"",
									"",
									"pm.test(\"Related entities are included\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData[0].amount).to.exist;",
									"    pm.expect(jsonData[0].animalName).to.exist;",
									"    pm.expect(jsonData[0].image).to.exist;",
									"});",
									"",
									"pm.test(\"Animals are ordered by ownership start date descending\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.length > 1) {",
									"        for (let i = 0; i < jsonData.length - 1; i++) {",
									"            var date1 = new Date(jsonData[i].approvedAt);",
									"            var date2 = new Date(jsonData[i + 1].approvedAt);",
									"            pm.expect(date1.getTime()).to.be.at.least(date2.getTime());",
									"        }",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{tokenOwnedAn}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{tokenOwnedAn}}"
							}
						],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/owned-animals",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"owned-animals"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Owned Animals - Empty Result",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is empty array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    pm.expect(jsonData.length).to.equal(0);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{tokenOwnershipReq}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{tokenOwnershipReq}}"
							}
						],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/owned-animals",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"owned-animals"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Owned Animals - Unauthorized",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/ownershiprequests/owned-animals",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"ownershiprequests",
								"owned-animals"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Activities",
			"item": [
				{
					"name": "Create Activities",
					"item": [
						{
							"name": "Criar Atividade de Ownership (data fim anterior √† data de in√≠cio)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Valida que o status √© 400\r",
											"pm.test(\"Status code is 400\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"// Valida que a resposta √© JSON\r",
											"pm.test(\"Response is JSON\", function () {\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"// Valida que cont√©m a mensagem de erro esperada\r",
											"pm.test(\"Contains validation error message\", function () {\r",
											"    const responseJson = pm.response.json();\r",
											"    const errorMessage = \"End date must be on the same day or after the start date\";\r",
											"    \r",
											"    // Verifica se existe em qualquer campo de errors\r",
											"    const allErrors = JSON.stringify(responseJson.errors);\r",
											"    pm.expect(allErrors).to.include(errorMessage);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"2026-11-02T10:00:00Z\",\r\n  \"endDate\": \"2024-11-02T11:00:00Z\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership (Animal com GUID inv√°lido)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", () => {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Contains GUID validation error\", () => {\r",
											"    const body = pm.response.json();\r",
											"    const errors = JSON.stringify(body.errors);\r",
											"    pm.expect(errors).to.include(\"valid GUID\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"not-existing-id-123\",\r\n  \"startDate\": \"2026-11-02T10:00:00Z\",\r\n  \"endDate\": \"2026-11-02T11:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership (Animal Inexistente)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404\", () => {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Contains 'Animal not found' message\", () => {\r",
											"    const body = pm.response.text();\r",
											"    pm.expect(body).to.include(\"Animal not found\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"99999999-aaaa-bbbb-cccc-123456789000\",\r\n  \"startDate\": \"2026-11-02T10:00:00Z\",\r\n  \"endDate\": \"2026-11-02T11:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership (Animal n√£o pertence ao utilizador)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403\", () => {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Contains 'not the owner' message\", () => {\r",
											"    const body = pm.response.text();\r",
											"    pm.expect(body).to.include(\"User is not the owner of this animal\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd2b\", \r\n  \"startDate\": \"2026-12-02T10:00:00Z\",\r\n  \"endDate\": \"2026-12-02T11:00:00Z\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership (Atividade com menos de 24h de anteced√™ncia)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"{{startDate}}\",\r\n  \"endDate\": \"{{endDate}}\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership PickupTime inv√°lido (Fora do Hor√°rio do Shelter 9h-18h))",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// StartTime fora do hor√°rio (antes da abertura ou depois do fecho)\r",
											"pm.test(\"Status code is 400\", () => {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Contains shelter hours validation error\", () => {\r",
											"    const body = pm.response.text();\r",
											"    pm.expect(body).to.include(\"Pick-up time must be within shelter hours\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"2026-11-02T06:00:00Z\",\r\n  \"endDate\": \"2026-11-02T10:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership DropOffTime inv√°lido (Fora do Hor√°rio do Shelter 9h-18h)) Copy",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", () => {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Contains drop-off time validation error\", () => {\r",
											"    const body = pm.response.text();\r",
											"    pm.expect(body).to.include(\"Drop-off time must be within shelter hours\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"2026-11-02T10:00:00Z\",\r\n  \"endDate\": \"2026-11-02T23:00:00Z\" \r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership V√°lido",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201 Created\", () => {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is JSON\", () => {\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"pm.test(\"Activity was created successfully\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    // Valida estrutura b√°sica\r",
											"    pm.expect(body).to.have.property('id');\r",
											"    pm.expect(body).to.have.property('animalId');\r",
											"    pm.expect(body).to.have.property('userId');\r",
											"    pm.expect(body).to.have.property('startDate');\r",
											"    pm.expect(body).to.have.property('endDate');\r",
											"    pm.expect(body).to.have.property('createdAt');\r",
											"});\r",
											"\r",
											"pm.test(\"Activity has correct type and status\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    pm.expect(body.type).to.equal('Ownership');\r",
											"    pm.expect(body.status).to.equal('Active');\r",
											"});\r",
											"\r",
											"pm.test(\"Activity contains animal and user information\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    pm.expect(body).to.have.property('animalName');\r",
											"    pm.expect(body).to.have.property('userName');\r",
											"    pm.expect(body.animalName).to.be.a('string').that.is.not.empty;\r",
											"    pm.expect(body.userName).to.be.a('string').that.is.not.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"2026-11-02T10:00:00Z\",\r\n  \"endDate\": \"2026-11-02T11:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership V√°lido, mas que entra em conflito com um existente",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Use text because this endpoint returns plain text for 409 conflicts\r",
											"const text = pm.response.text();\r",
											"\r",
											"// 1Ô∏è‚É£ Status code\r",
											"pm.test(\"Status code is 409 Conflict\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"// 2Ô∏è‚É£ Message contains conflict phrasing\r",
											"pm.test(\"Response body contains conflict message\", function () {\r",
											"    const normalized = text.toLowerCase().replace(/\\s+/g, ' ');\r",
											"    pm.expect(normalized).to.include(\"conflict\");\r",
											"    pm.expect(normalized).to.include(\"existing active activity\");\r",
											"});\r",
											"\r",
											"// 3Ô∏è‚É£ Mentions scheduled dates (from ... to ...)\r",
											"pm.test(\"Response message mentions scheduled dates\", function () {\r",
											"    const datePattern = /from\\s+\\d{4}-\\d{2}-\\d{2}.*to\\s+\\d{4}-\\d{2}-\\d{2}/i;\r",
											"    pm.expect(text).to.match(datePattern);\r",
											"});\r",
											"\r",
											"// 4Ô∏è‚É£ Debug log\r",
											"console.log(\"Conflict Response (text):\", text);"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"2026-11-02T10:00:00Z\",\r\n  \"endDate\": \"2026-11-02T11:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "Criar Atividade de Ownership V√°lido (Noutro hor√°rio)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201 Created\", () => {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is JSON\", () => {\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"pm.test(\"Activity was created successfully\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    // Valida estrutura b√°sica\r",
											"    pm.expect(body).to.have.property('id');\r",
											"    pm.expect(body).to.have.property('animalId');\r",
											"    pm.expect(body).to.have.property('userId');\r",
											"    pm.expect(body).to.have.property('startDate');\r",
											"    pm.expect(body).to.have.property('endDate');\r",
											"    pm.expect(body).to.have.property('createdAt');\r",
											"});\r",
											"\r",
											"pm.test(\"Activity has correct type and status\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    pm.expect(body.type).to.equal('Ownership');\r",
											"    pm.expect(body.status).to.equal('Active');\r",
											"});\r",
											"\r",
											"pm.test(\"Activity contains animal and user information\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    pm.expect(body).to.have.property('animalName');\r",
											"    pm.expect(body).to.have.property('userName');\r",
											"    pm.expect(body.animalName).to.be.a('string').that.is.not.empty;\r",
											"    pm.expect(body.userName).to.be.a('string').that.is.not.empty;\r",
											"});\r",
											"\r",
											"// Guarda apenas o ID da atividade criada na vari√°vel de ambiente\r",
											"const createdActivity = pm.response.json();\r",
											"pm.environment.set(\"active_activity\", createdActivity.id);\r",
											"\r",
											"console.log(\"ID da atividade guardado em 'active_activity':\", createdActivity.id);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd1b\",\r\n  \"startDate\": \"2026-11-02T11:00:00Z\",\r\n  \"endDate\": \"2026-11-02T12:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "List Activities",
					"item": [
						{
							"name": "Get User Activities (Active)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Verificar que o status code √© 200 OK\r",
											"pm.test(\"Status code is 200 OK\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// Verificar que a resposta √© JSON e cont√©m uma lista\r",
											"pm.test(\"Response is a JSON array\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"array\");\r",
											"});\r",
											"\r",
											"// Verificar que cada atividade tem a estrutura esperada\r",
											"pm.test(\"Each activity has required fields\", function () {\r",
											"    const activities = pm.response.json();\r",
											"    activities.forEach(a => {\r",
											"        pm.expect(a).to.have.property(\"id\");\r",
											"        pm.expect(a).to.have.property(\"animalId\");\r",
											"        pm.expect(a).to.have.property(\"animalName\");\r",
											"        pm.expect(a).to.have.property(\"userId\");\r",
											"        pm.expect(a).to.have.property(\"userName\");\r",
											"        pm.expect(a).to.have.property(\"type\");\r",
											"        pm.expect(a).to.have.property(\"status\");\r",
											"        pm.expect(a).to.have.property(\"startDate\");\r",
											"        pm.expect(a).to.have.property(\"endDate\");\r",
											"        pm.expect(a).to.have.property(\"createdAt\");\r",
											"    });\r",
											"});\r",
											"\r",
											"// Validar que o type e status est√£o corretos\r",
											"pm.test(\"All activities are type 'Ownership' and status 'Active'\", function () {\r",
											"    const activities = pm.response.json();\r",
											"    activities.forEach(a => {\r",
											"        pm.expect(a.type).to.eql(\"Ownership\");\r",
											"        pm.expect(a.status).to.eql(\"Active\");\r",
											"    });\r",
											"});\r",
											"\r",
											"// Garantir que as datas s√£o v√°lidas (start < end)\r",
											"pm.test(\"Each activity has valid date range\", function () {\r",
											"    const activities = pm.response.json();\r",
											"    activities.forEach(a => {\r",
											"        const start = new Date(a.startDate);\r",
											"        const end = new Date(a.endDate);\r",
											"        pm.expect(start.getTime()).to.be.below(end.getTime());\r",
											"    });\r",
											"});\r",
											"\r",
											"// Confirmar que h√° pelo menos uma atividade devolvida\r",
											"pm.test(\"At least one activity was returned\", function () {\r",
											"    const activities = pm.response.json();\r",
											"    pm.expect(activities.length).to.be.above(0);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/activities/ownership?status=Active",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									],
									"query": [
										{
											"key": "status",
											"value": "Active"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get User Activities (Active) User n√£o autenticado",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1Ô∏è‚É£ Verifica se o status code √© 401\r",
											"pm.test(\"Status code is 401 Unauthorized\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// 2Ô∏è‚É£ Verifica que a resposta √© JSON\r",
											"pm.test(\"Response is JSON\", function () {\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"// 3Ô∏è‚É£ Verifica a estrutura e mensagens esperadas\r",
											"pm.test(\"Response contains expected fields and messages\", function () {\r",
											"    const body = pm.response.json();\r",
											"\r",
											"    pm.expect(body).to.have.property(\"status\", 401);\r",
											"    pm.expect(body).to.have.property(\"message\");\r",
											"    pm.expect(body.message.toLowerCase()).to.include(\"authentication required\");\r",
											"    pm.expect(body).to.have.property(\"details\");\r",
											"    pm.expect(body.details.toLowerCase()).to.include(\"unauthorized\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/activities/ownership?status=Active",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									],
									"query": [
										{
											"key": "status",
											"value": "Active"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Cancel Activities",
					"item": [
						{
							"name": "Cancelar Activity (Outro User tenta cancelar)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message indicates authorization issue\", function () {\r",
											"    const text = pm.response.text().toLowerCase();\r",
											"    pm.expect(text).to.include(\"you are not authorized to cancel this activity\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser2}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership/{{active_activity}}/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership",
										"{{active_activity}}",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancelar Activity (Guid inv√°lido)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Validation message for invalid GUID is present\", function () {\r",
											"    const body = pm.response.json();\r",
											"    pm.expect(JSON.stringify(body).toLowerCase()).to.include(\"activity id\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership/not-a-guid/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership",
										"not-a-guid",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancelar Activity (Atividade inexistente)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Error message matches 'Activity not found'\", function () {\r",
											"    const text = pm.response.text();\r",
											"    pm.expect(text).to.include(\"Activity not found\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership/99999999-aaaa-bbbb-cccc-123456789000/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership",
										"99999999-aaaa-bbbb-cccc-123456789000",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancelar Activity (Noutro hor√°rio)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 OK\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Activity was successfully cancelled\", function () {\r",
											"    const body = pm.response.json();\r",
											"    pm.expect(body.status).to.eql(\"Cancelled\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership/{{active_activity}}/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership",
										"{{active_activity}}",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Cancelar Activity (Atividade j√° foi cancelada)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"pm.test(\"Message indicates already cancelled\", function () {\r",
											"    const text = pm.response.text().toLowerCase();\r",
											"    pm.expect(text).to.include(\"already been cancelled\");\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_newUser}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership/{{active_activity}}/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership",
										"{{active_activity}}",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Favorites",
			"item": [
				{
					"name": "List Favorites",
					"item": [
						{
							"name": "Login do User Gustavo (com favoritos)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_GUSTAVO\", jsonData.accessToken);\r",
											"});\r",
											"\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"gustavo@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Listar favoritos (Sem credenciais de utilizador)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 Unauthorized\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Response indicates authentication required\", function () {\r",
											"    // Pode n√£o ter body ou ter mensagem de erro\r",
											"    if (pm.response.text()) {\r",
											"        var jsonData = pm.response.json();\r",
											"        // Verifica se tem propriedades t√≠picas de erro de auth\r",
											"        pm.expect(jsonData.message || jsonData.error || jsonData.title).to.exist;\r",
											"    }\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Correctly rejected unauthorized request\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos (User: Gustavo)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Gustavo has exactly 3 favorites\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.length).to.eql(3);\r",
											"});\r",
											"\r",
											"pm.test(\"Each animal has correct structure\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal).to.have.property('id');\r",
											"        pm.expect(animal).to.have.property('name');\r",
											"        pm.expect(animal).to.have.property('species');\r",
											"        pm.expect(animal).to.have.property('breed');\r",
											"        pm.expect(animal).to.have.property('age');\r",
											"        pm.expect(animal).to.have.property('animalState');\r",
											"        pm.expect(animal).to.have.property('principalImageUrl');\r",
											"        pm.expect(animal).to.have.property('shelterName');\r",
											"        pm.expect(animal).to.have.property('size');\r",
											"        pm.expect(animal).to.have.property('sex');\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Favorites are ordered DESC (newest first)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    pm.expect(jsonData[0].name).to.eql(\"Simba\");  // Mais recente\r",
											"    pm.expect(jsonData[1].name).to.eql(\"Rex\");\r",
											"    pm.expect(jsonData[2].name).to.eql(\"Luna\");   // Mais antigo\r",
											"});\r",
											"\r",
											"pm.test(\"All animals are Available\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.animalState).to.eql(\"Available\");\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All animals belong to Test Shelter\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.shelterName).to.eql(\"Test Shelter\");\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Animals have correct species\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Simba - Cat\r",
											"    pm.expect(jsonData[0].species).to.eql(\"Cat\");\r",
											"    // Rex - Dog\r",
											"    pm.expect(jsonData[1].species).to.eql(\"Dog\");\r",
											"    // Luna - Cat\r",
											"    pm.expect(jsonData[2].species).to.eql(\"Cat\");\r",
											"});\r",
											"\r",
											"// Save animal IDs for later tests\r",
											"var jsonData = pm.response.json();\r",
											"if (jsonData.length > 0) {\r",
											"    pm.environment.set(\"simbaId\", jsonData[0].id);  // Simba\r",
											"    pm.environment.set(\"rexId\", jsonData[1].id);    // Rex\r",
											"    pm.environment.set(\"lunaId\", jsonData[2].id);   // Luna\r",
											"}\r",
											"\r",
											"console.log(\"‚úÖ Found\", jsonData.length, \"favorites\");\r",
											"console.log(\"Animals:\", jsonData.map(a => a.name).join(\", \"));"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_GUSTAVO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login de User (sem favoritos)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Carlos login successful\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Save Carlos access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_CARLOS\", jsonData.accessToken);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"carlos@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos User: Carlos (sem favoritos)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Carlos has 0 favorites (empty list)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.length).to.eql(0);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is empty array, not null\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.not.be.null;\r",
											"    pm.expect(Array.isArray(jsonData)).to.be.true;\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Carlos has no favorites (as expected)\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_CARLOS}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos (User: Gustavo) com Pagina√ß√£o",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response returns only 2 items (PageSize=2)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.length).to.eql(2);\r",
											"});\r",
											"\r",
											"pm.test(\"First page contains Simba and Rex\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData[0].name).to.eql(\"Simba\");\r",
											"    pm.expect(jsonData[1].name).to.eql(\"Rex\");\r",
											"});\r",
											"\r",
											"pm.test(\"Luna should NOT be in first page\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var animalNames = jsonData.map(a => a.name);\r",
											"    pm.expect(animalNames).to.not.include(\"Luna\");\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Pagination working - returned 2 items from page 1\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_GUSTAVO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites?PageNumber=1&PageSize=2",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									],
									"query": [
										{
											"key": "PageNumber",
											"value": "1"
										},
										{
											"key": "PageSize",
											"value": "2"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos (User: Gustavo) - 2¬™ p√°gina Pagina√ß√£o",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Page 999 returns empty array (out of range)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.length).to.eql(0);\r",
											"});\r",
											"\r",
											"pm.test(\"Empty array, not null or undefined\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.not.be.null;\r",
											"    pm.expect(jsonData).to.not.be.undefined;\r",
											"    pm.expect(Array.isArray(jsonData)).to.be.true;\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Pagination handles out-of-range page correctly - returned empty array\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_GUSTAVO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites?PageNumber=999&PageSize=2",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									],
									"query": [
										{
											"key": "PageNumber",
											"value": "999"
										},
										{
											"key": "PageSize",
											"value": "2"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos (User: Gustavo) - Pagina√ß√£o out of range",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Only 3 ACTIVE favorites returned (Bolinhas should NOT appear)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.length).to.eql(3);\r",
											"});\r",
											"\r",
											"pm.test(\"Active favorites are Luna, Rex, and Simba\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var animalNames = jsonData.map(a => a.name);\r",
											"    \r",
											"    pm.expect(animalNames).to.include.members([\"Luna\", \"Rex\", \"Simba\"]);\r",
											"});\r",
											"\r",
											"pm.test(\"Inactive favorite (Bolinhas) is NOT returned\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var animalNames = jsonData.map(a => a.name);\r",
											"    \r",
											"    pm.expect(animalNames).to.not.include(\"Bolinhas\");\r",
											"});\r",
											"\r",
											"pm.test(\"All returned animals are from active favorites\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    // Since we can only see the result, we verify by exclusion\r",
											"    pm.expect(jsonData.length).to.be.below(4); // Less than total favorites (4)\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Only active favorites returned - Bolinhas (inactive) correctly filtered out\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_GUSTAVO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos (User: Gustavo) - Apenas favoritos ATIVOS s√£o devolvidos",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Only 3 ACTIVE favorites returned (Bolinhas should NOT appear)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.length).to.eql(3);\r",
											"});\r",
											"\r",
											"pm.test(\"Active favorites are Luna, Rex, and Simba\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var animalNames = jsonData.map(a => a.name);\r",
											"    \r",
											"    pm.expect(animalNames).to.include.members([\"Luna\", \"Rex\", \"Simba\"]);\r",
											"});\r",
											"\r",
											"pm.test(\"Inactive favorite (Bolinhas) is NOT returned\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var animalNames = jsonData.map(a => a.name);\r",
											"    \r",
											"    pm.expect(animalNames).to.not.include(\"Bolinhas\");\r",
											"});\r",
											"\r",
											"pm.test(\"All returned animals are from active favorites\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    // Since we can only see the result, we verify by exclusion\r",
											"    pm.expect(jsonData.length).to.be.below(4); // Less than total favorites (4)\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ Only active favorites returned - Bolinhas (inactive) correctly filtered out\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_GUSTAVO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									]
								}
							},
							"response": []
						},
						{
							"name": "Lista Favoritos - Validar estrutura de dados",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Each animal has ALL required fields\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        // Required fields\r",
											"        pm.expect(animal).to.have.property('id');\r",
											"        pm.expect(animal).to.have.property('name');\r",
											"        pm.expect(animal).to.have.property('species');\r",
											"        pm.expect(animal).to.have.property('breed');\r",
											"        pm.expect(animal).to.have.property('age');\r",
											"        pm.expect(animal).to.have.property('animalState');\r",
											"        pm.expect(animal).to.have.property('principalImageUrl');\r",
											"        pm.expect(animal).to.have.property('shelterName');\r",
											"        pm.expect(animal).to.have.property('size');\r",
											"        pm.expect(animal).to.have.property('sex');\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All IDs are valid GUIDs\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var guidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.id).to.match(guidRegex);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All names are non-empty strings\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.name).to.be.a('string');\r",
											"        pm.expect(animal.name.length).to.be.above(0);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All species are valid enum values\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var validSpecies = [\"Dog\", \"Cat\", \"Bird\", \"Rabbit\", \"Other\"];\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(validSpecies).to.include(animal.species);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All ages are positive numbers\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.age).to.be.a('number');\r",
											"        pm.expect(animal.age).to.be.at.least(0);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All animalStates are valid enum values\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var validStates = [\"Available\", \"PartiallyFostered\", \"TotallyFostered\", \"HasOwner\", \"Inactive\"];\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(validStates).to.include(animal.animalState);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All principalImageUrls are valid URLs\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var urlRegex = /^https?:\\/\\/.+/;\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.principalImageUrl).to.match(urlRegex);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All sizes are valid enum values\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var validSizes = [\"Small\", \"Medium\", \"Large\"];\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(validSizes).to.include(animal.size);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All sexes are valid enum values\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var validSexes = [\"Male\", \"Female\"];\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(validSexes).to.include(animal.sex);\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"All shelterNames are non-empty strings\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    jsonData.forEach(function(animal) {\r",
											"        pm.expect(animal.shelterName).to.be.a('string');\r",
											"        pm.expect(animal.shelterName.length).to.be.above(0);\r",
											"    });\r",
											"});\r",
											"\r",
											"console.log(\"‚úÖ All data structures validated successfully\");\r",
											"console.log(\"Total animals checked:\", pm.response.json().length);"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_GUSTAVO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Add/Deactivate Favorite",
					"item": [
						{
							"name": "Login User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.environment.set(\"accessToken_user\", jsonData.accessToken);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"email\": \"diana@test.com\",\r\n  \"password\": \"Pa$$w0rd\"\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Favorite",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// ---  Status code check ---\r",
											"pm.test(\"Status code is 201 Created\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// ---  Parse JSON safely ---\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"    pm.environment.set(\"lastFavoriteAnimalId\", jsonData.id);\r",
											"} catch (e) {\r",
											"    pm.expect.fail(\"Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// ---  Structural validation ---\r",
											"pm.test(\"Response contains all required fields\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"name\");\r",
											"    pm.expect(jsonData).to.have.property(\"species\");\r",
											"    pm.expect(jsonData).to.have.property(\"breed\");\r",
											"    pm.expect(jsonData).to.have.property(\"age\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalState\");\r",
											"    pm.expect(jsonData).to.have.property(\"principalImageUrl\");\r",
											"    pm.expect(jsonData).to.have.property(\"shelterName\");\r",
											"    pm.expect(jsonData).to.have.property(\"size\");\r",
											"    pm.expect(jsonData).to.have.property(\"sex\");\r",
											"});\r",
											"\r",
											"// ---  Logical validation ---\r",
											"pm.test(\"Animal state is valid for favorites\", function () {\r",
											"    pm.expect(jsonData.animalState).to.be.oneOf([\"Available\", \"PartiallyFostered\"]);\r",
											"});\r",
											"\r",
											"\r",
											"// ---  Save useful variables for next requests ---\r",
											"pm.environment.set(\"lastFavoriteId\", jsonData.id);\r",
											"pm.environment.set(\"lastFavoriteName\", jsonData.name);\r",
											"\r",
											"\r",
											"// ---  Debug log ---\r",
											"console.log(\"‚úÖ Favorite successfully added:\", JSON.stringify(jsonData, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/f055cc31-fdeb-4c65-bb73-4f558f67dd3d",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3d"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Favorite (animal is already favorite)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// --- Validate status code ---\r",
											"pm.test(\"Status code is 409 Conflict\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"// --- Ensure response has body ---\r",
											"pm.test(\"Response body is not empty\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"});\r",
											"\r",
											"// --- Extract plain text body ---\r",
											"const resText = pm.response.text();\r",
											"\r",
											"// --- Validate response message ---\r",
											"pm.test(\"Message clearly states 'Animal already in favorites'\", function () {\r",
											"    const resText = pm.response.text().toLowerCase();\r",
											"\r",
											"    pm.expect(resText).to.include(\"animal\");\r",
											"    pm.expect(resText).to.include(\"already\");\r",
											"    pm.expect(resText).to.include(\"favorites\");\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											"// --- Debug output ---\r",
											"console.log(`‚ö†Ô∏è Conflict detected as expected: ${resText}`);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/{{lastFavoriteAnimalId}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"{{lastFavoriteAnimalId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate Favorite",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// --- Basic response validation ---\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"let responseText = pm.response.text();\r",
											"if (responseText.startsWith(\"{\")) {\r",
											"    jsonData = pm.response.json();\r",
											"} else {\r",
											"    console.warn(\"Response is not JSON:\", responseText);\r",
											"    return;\r",
											"}\r",
											"\r",
											"\r",
											"// --- Structural tests ---\r",
											"pm.test(\"Response has required fields\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"name\");\r",
											"    pm.expect(jsonData).to.have.property(\"species\");\r",
											"    pm.expect(jsonData).to.have.property(\"breed\");\r",
											"    pm.expect(jsonData).to.have.property(\"age\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalState\");\r",
											"    pm.expect(jsonData).to.have.property(\"principalImageUrl\");\r",
											"    pm.expect(jsonData).to.have.property(\"shelterName\");\r",
											"    pm.expect(jsonData).to.have.property(\"size\");\r",
											"    pm.expect(jsonData).to.have.property(\"sex\");\r",
											"});\r",
											"\r",
											"// --- Logical checks ---\r",
											"pm.test(\"Animal state remains valid\", function () {\r",
											"    pm.expect(jsonData.animalState).to.be.oneOf([\"Available\", \"PartiallyFostered\"]);\r",
											"});\r",
											"\r",
											"\r",
											"console.log(`‚úÖ Favorite deactivated successfully for animal`);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/{{lastFavoriteAnimalId}}/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"{{lastFavoriteAnimalId}}",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate Favorite That Not Exists",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// --- Validate status code ---\r",
											"pm.test(\"Status code is 404 (Favorite not found)\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"// --- Validate that response body is not empty ---\r",
											"pm.test(\"Response body is present\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"});\r",
											"\r",
											"// --- Extract text response (fallback if JSON parsing fails) ---\r",
											"let responseText;\r",
											"try {\r",
											"    responseText = pm.response.json();\r",
											"} catch (e) {\r",
											"    responseText = pm.response.text();\r",
											"}\r",
											"\r",
											"// --- Validate response message content ---\r",
											"pm.test(\"Response message contains 'Favorite not found'\", function () {\r",
											"    pm.expect(responseText.toLowerCase()).to.include(\"favorite not found\");\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											"// --- Log for debugging ---\r",
											"console.log(`‚ö†Ô∏è Favorite deactivation failed as expected: ${responseText}`);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/f055c31-fdeb-4c65-bb73-4f558f67dd5b/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"f055c31-fdeb-4c65-bb73-4f558f67dd5b",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Deactivate Favorite Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// --- Verify HTTP status ---\r",
											"pm.test(\"Status code is 401 Unauthorized\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// --- Ensure response body exists ---\r",
											"pm.test(\"Response body is present\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"});\r",
											"\r",
											"// --- Parse JSON response ---\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    pm.expect.fail(\"Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// --- Structural validation ---\r",
											"pm.test(\"Response contains expected fields\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"status\");\r",
											"    pm.expect(jsonData).to.have.property(\"message\");\r",
											"    pm.expect(jsonData).to.have.property(\"details\");\r",
											"});\r",
											"\r",
											"// --- Logical checks ---\r",
											"pm.test(\"Response fields contain correct values\", function () {\r",
											"    pm.expect(jsonData.status).to.eql(401);\r",
											"    pm.expect(jsonData.message.toLowerCase()).to.include(\"authentication required\");\r",
											"    pm.expect(jsonData.details.toLowerCase()).to.include(\"unauthorized\");\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											"// --- Debug log ---\r",
											"console.log(`üö´ Unauthorized request result: ${JSON.stringify(jsonData)}`);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/f055cc31-fdeb-4c65-bb73-4f558f67dd5b/deactivate",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
										"deactivate"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Favorite (invalid status)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// ---  Check HTTP status ---\r",
											"pm.test(\"Status code is 409 Conflict\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"// ---  Ensure response has body ---\r",
											"pm.test(\"Response body is present\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"});\r",
											"\r",
											"// ---  Extract raw text response ---\r",
											"const resText = pm.response.text();\r",
											"\r",
											"// ---  Check message content ---\r",
											"pm.test(\"Error message clearly states animal cannot be favorited\", function () {\r",
											"    pm.expect(resText.toLowerCase()).to.include(\"animal\");\r",
											"    pm.expect(resText.toLowerCase()).to.include(\"not\");\r",
											"    pm.expect(resText.toLowerCase()).to.include(\"available\");\r",
											"    pm.expect(resText.toLowerCase()).to.include(\"favorited\");\r",
											"});\r",
											"\r",
											"// ---  Check that it's plain text, not JSON ---\r",
											"pm.test(\"Response is plain text (not JSON)\", function () {\r",
											"    pm.expect(resText.trim().startsWith(\"{\")).to.be.false;\r",
											"});\r",
											"\r",
											"\r",
											"// --- ü™µ Log result for debugging ---\r",
											"console.log(\"‚ö†Ô∏è Animal could not be favorited:\", resText);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/animal-6",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"animal-6"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reactivate Favorite",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// ---  Status code check ---\r",
											"pm.test(\"Status code is 201 Created\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"// ---  Parse JSON safely ---\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    console.warn(\"Non-JSON response:\", pm.response.text());\r",
											"    return;\r",
											"}\r",
											"\r",
											"\r",
											"// ---  Structural validation ---\r",
											"pm.test(\"Response contains all required fields\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"name\");\r",
											"    pm.expect(jsonData).to.have.property(\"species\");\r",
											"    pm.expect(jsonData).to.have.property(\"breed\");\r",
											"    pm.expect(jsonData).to.have.property(\"age\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalState\");\r",
											"    pm.expect(jsonData).to.have.property(\"principalImageUrl\");\r",
											"    pm.expect(jsonData).to.have.property(\"shelterName\");\r",
											"    pm.expect(jsonData).to.have.property(\"size\");\r",
											"    pm.expect(jsonData).to.have.property(\"sex\");\r",
											"});\r",
											"\r",
											"// ---  Logical validation ---\r",
											"pm.test(\"Animal state is valid for favorites\", function () {\r",
											"    pm.expect(jsonData.animalState).to.be.oneOf([\"Available\", \"PartiallyFostered\"]);\r",
											"});\r",
											"\r",
											"\r",
											"// ---  Save useful variables for next requests ---\r",
											"pm.environment.set(\"lastFavoriteId\", jsonData.id);\r",
											"pm.environment.set(\"lastFavoriteName\", jsonData.name);\r",
											"\r",
											"\r",
											"// ---  Debug log ---\r",
											"console.log(\"‚úÖ Favorite successfully added:\", JSON.stringify(jsonData, null, 2));\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/{{lastFavoriteAnimalId}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"{{lastFavoriteAnimalId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Favorite (Animal Not Exists)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// ---  Check HTTP status ---\r",
											"pm.test(\"Status code is 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"// ---  Ensure response body exists ---\r",
											"pm.test(\"Response body is present\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"});\r",
											"\r",
											"// ---  Extract plain text response ---\r",
											"const resText = pm.response.text();\r",
											"\r",
											"// --- Validate error message content ---\r",
											"pm.test(\"Error message clearly indicates missing animal\", function () {\r",
											"    pm.expect(resText.toLowerCase()).to.include(\"animal\");\r",
											"    pm.expect(resText.toLowerCase()).to.include(\"not found\");\r",
											"});\r",
											"\r",
											"// ---  Ensure response is not JSON ---\r",
											"pm.test(\"Response is plain text (not JSON)\", function () {\r",
											"    pm.expect(resText.trim().startsWith(\"{\")).to.be.false;\r",
											"});\r",
											"\r",
											"\r",
											"// ---  Debug log ---\r",
											"console.log(\"‚ùå Add Favorite failed - Animal not found:\", resText);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/f055cc31-fdeb-4c65-bb73-4f58f67dd5b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"f055cc31-fdeb-4c65-bb73-4f58f67dd5b"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Favorite Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// --- Verify HTTP status ---\r",
											"pm.test(\"Status code is 401 Unauthorized\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"// --- Ensure response body exists ---\r",
											"pm.test(\"Response body is present\", function () {\r",
											"    pm.response.to.be.withBody;\r",
											"});\r",
											"\r",
											"// --- Parse JSON response ---\r",
											"let jsonData;\r",
											"try {\r",
											"    jsonData = pm.response.json();\r",
											"} catch (e) {\r",
											"    pm.expect.fail(\"Response is not valid JSON\");\r",
											"}\r",
											"\r",
											"// --- Structural validation ---\r",
											"pm.test(\"Response contains expected fields\", function () {\r",
											"    pm.expect(jsonData).to.have.property(\"status\");\r",
											"    pm.expect(jsonData).to.have.property(\"message\");\r",
											"    pm.expect(jsonData).to.have.property(\"details\");\r",
											"});\r",
											"\r",
											"// --- Logical checks ---\r",
											"pm.test(\"Response fields contain correct values\", function () {\r",
											"    pm.expect(jsonData.status).to.eql(401);\r",
											"    pm.expect(jsonData.message.toLowerCase()).to.include(\"authentication required\");\r",
											"    pm.expect(jsonData.details.toLowerCase()).to.include(\"unauthorized\");\r",
											"});\r",
											"\r",
											"\r",
											"\r",
											"// --- Debug log ---\r",
											"console.log(`üö´ Unauthorized request result: ${JSON.stringify(jsonData)}`);\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{url}}/api/favorites/f055cc31-fdeb-4c65-bb73-4f558f67dd5b",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"favorites",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd5b"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Notifications",
			"item": [
				{
					"name": "Setup",
					"item": [
						{
							"name": "Login User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// === ‚úÖ Validate Status Code ===",
											"pm.test(\"Status code is 200 (OK)\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// === ‚úÖ Parse JSON Response ===",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = {};",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
											"}",
											"",
											"// === ‚úÖ Validate Token Fields ===",
											"pm.test(\"Response body contains accessToken\", function () {",
											"    pm.expect(jsonData).to.have.property(\"accessToken\");",
											"    pm.expect(jsonData.accessToken).to.be.a(\"string\");",
											"});",
											"",
											"// === ‚úÖ Save the token ===",
											"if (jsonData.accessToken) {",
											"    pm.environment.set(\"accessToken_user\", jsonData.accessToken);",
											"    console.log(\"‚úÖ Saved token as 'accessToken_user'\");",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"carlos.notif@test.com\",\n    \"password\": \"Pa$$w0rd\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Ownership Request (Generate Notification)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Ownership request created successfully\", function () {",
											"    pm.expect(jsonData).to.have.property(\"id\");",
											"    pm.expect(jsonData).to.have.property(\"animalId\");",
											"});",
											"",
											"// Save ownership request ID for later tests",
											"if (jsonData.id) {",
											"    pm.environment.set(\"ownershipRequestId\", jsonData.id);",
											"    console.log(\"‚úÖ Saved ownershipRequestId: \" + jsonData.id);",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"animalID\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd5d\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Admin CAA (Alice)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"let jsonData = pm.response.json();\r",
											"\r",
											"if (jsonData.accessToken) {\r",
											"    pm.environment.set(\"accessToken_adminCAA\", jsonData.accessToken);\r",
											"    console.log(\"‚úÖ Saved admin token\");\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"email\": \"alice.notif@test.com\",\r\n    \"password\": \"Pa$$w0rd\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Notifications",
					"item": [
						{
							"name": "AdminCAA Get Notifications",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains notifications array\", function () {\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"if (jsonData.length > 0) {\r",
											"    pm.test(\"AdminCAA has NEW_OWNERSHIP_REQUEST notification\", function () {\r",
											"        const hasNotification = jsonData.some(n => n.type === 'NEW_OWNERSHIP_REQUEST');\r",
											"        pm.expect(hasNotification).to.be.true;\r",
											"    });\r",
											"    \r",
											"    console.log(\"‚úÖ AdminCAA received \" + jsonData.length + \" notification(s)\");\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications"
									]
								}
							},
							"response": []
						},
						{
							"name": "Admin CAA updates Ownership Request status to \"Analyzing\"",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Analysing\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"ownershipRequestId\": \"{{ownershipRequestId}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/ownershiprequests/analysing/{{ownershipRequestId}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"analysing",
										"{{ownershipRequestId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get All Notifications (User Carlos) - Success",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"const bodyText = pm.response.text();",
											"let jsonData;",
											"",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = null;",
											"}",
											"",
											"pm.test(\"Response is not empty\", function () {",
											"    pm.expect(bodyText).to.not.be.undefined;",
											"});",
											"",
											"if (statusCode === 200) {",
											"    pm.test(\"Status code is 200 (OK)\", function () {",
											"        pm.response.to.have.status(200);",
											"    });",
											"",
											"    pm.test(\"Response contains an array of notifications\", function () {",
											"        pm.expect(jsonData).to.be.an('array');",
											"    });",
											"",
											"    if (jsonData && jsonData.length > 0) {",
											"        const notification = jsonData[0];",
											"",
											"        pm.test(\"Notification has required fields\", function () {",
											"            pm.expect(notification).to.have.property('id');",
											"            pm.expect(notification).to.have.property('type');",
											"            pm.expect(notification).to.have.property('message');",
											"            pm.expect(notification).to.have.property('isRead');",
											"            pm.expect(notification).to.have.property('createdAt');",
											"        });",
											"",
											"        // Save first notification ID for later tests",
											"        pm.environment.set(\"notificationId\", notification.id);",
											"        console.log(\"‚úÖ Saved notificationId: \" + notification.id);",
											"    }",
											"",
											"    console.log(\"Retrieved \" + (jsonData ? jsonData.length : 0) + \" notifications\");",
											"",
											"} else if (statusCode === 401) {",
											"    pm.test(\"Unauthorized (401) - Missing or invalid authentication token\", function () {",
											"        pm.response.to.have.status(401);",
											"    });",
											"    console.warn(\"Unauthorized request. Verify JWT or authorization header.\");",
											"",
											"} else {",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {",
											"        pm.expect(statusCode).to.be.oneOf([200, 401]);",
											"    });",
											"    console.warn(\"Unexpected response:\", bodyText);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get All Notifications (User Carlos) - Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 (Unauthorized)\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"Response indicates missing authentication\", function () {",
											"    const bodyText = pm.response.text();",
											"    pm.expect(bodyText).to.not.be.empty;",
											"});",
											"",
											"console.warn(\"Expected 401: Request without authentication token\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Unread Notifications (User Carlos) - Success",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"let jsonData;",
											"",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = null;",
											"}",
											"",
											"if (statusCode === 200) {",
											"    pm.test(\"Status code is 200 (OK)\", function () {",
											"        pm.response.to.have.status(200);",
											"    });",
											"",
											"    pm.test(\"Response contains an array\", function () {",
											"        pm.expect(jsonData).to.be.an('array');",
											"    });",
											"",
											"    if (jsonData && jsonData.length > 0) {",
											"        pm.test(\"All notifications are unread\", function () {",
											"            jsonData.forEach(notification => {",
											"                pm.expect(notification.isRead).to.be.false;",
											"            });",
											"        });",
											"    }",
											"",
											"    console.log(\"Retrieved \" + (jsonData ? jsonData.length : 0) + \" unread notifications\");",
											"",
											"} else if (statusCode === 401) {",
											"    pm.test(\"Unauthorized (401)\", function () {",
											"        pm.response.to.have.status(401);",
											"    });",
											"",
											"} else {",
											"    pm.test(\"Unexpected status code: \" + statusCode, function () {",
											"        pm.expect(statusCode).to.be.oneOf([200, 401]);",
											"    });",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/unread",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"unread"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Notifications (User Carlos) - With Query Filter (unreadOnly=true)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"let jsonData;",
											"",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = null;",
											"}",
											"",
											"pm.test(\"Status code is 200 (OK)\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Response contains an array\", function () {",
											"    pm.expect(jsonData).to.be.an('array');",
											"});",
											"",
											"if (jsonData && jsonData.length > 0) {",
											"    pm.test(\"All returned notifications are unread\", function () {",
											"        jsonData.forEach(notification => {",
											"            pm.expect(notification.isRead).to.be.false;",
											"        });",
											"    });",
											"}",
											"",
											"console.log(\"Query filter returned \" + (jsonData ? jsonData.length : 0) + \" unread notifications\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications?unreadOnly=true",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications"
									],
									"query": [
										{
											"key": "unreadOnly",
											"value": "true"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Mark As Read",
					"item": [
						{
							"name": "Mark Notification As Read - Success",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"const bodyText = pm.response.text();",
											"",
											"// --- Check status code ---",
											"pm.test(\"Status code is 200 (OK)\", function () {",
											"    pm.expect(statusCode).to.eql(200);",
											"});",
											"",
											"// --- Check response body is an empty JSON object ---",
											"pm.test(\"Response body is an empty JSON object ({})\", function () {",
											"    // Verifica que √© JSON v√°lido",
											"    let jsonData;",
											"    try {",
											"        jsonData = pm.response.json();",
											"    } catch (e) {",
											"        throw new Error(\"Response is not valid JSON\");",
											"    }",
											"",
											"    // Verifica que √© um objeto vazio",
											"    pm.expect(jsonData).to.be.an(\"object\").that.is.empty;",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/{{notificationId}}/read",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"{{notificationId}}",
										"read"
									]
								}
							},
							"response": []
						},
						{
							"name": "Mark Notification As Read - Invalid ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 (Not Found)\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body contains error message\", function () {",
											"    const bodyText = pm.response.text();",
											"    pm.expect(bodyText).to.include(\"Notification not found\");",
											"});",
											"",
											"console.warn(\"Expected 404: Invalid notification ID\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/invalid-id-12345/read",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"invalid-id-12345",
										"read"
									]
								}
							},
							"response": []
						},
						{
							"name": "Mark Notification As Read - Empty ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"",
											"if (statusCode === 400) {",
											"    pm.test(\"Status code is 400 (Bad Request)\", function () {",
											"        pm.response.to.have.status(400);",
											"    });",
											"",
											"    const jsonData = pm.response.json();",
											"} else {",
											"    pm.test(\"Expected 400 Bad Request, got: \" + statusCode, function () {",
											"        pm.response.to.have.status(400);",
											"    });",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/ /read",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										" ",
										"read"
									]
								}
							},
							"response": []
						},
						{
							"name": "Mark Notification As Read - Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 (Unauthorized)\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"console.warn(\"Expected 401: Request without authentication\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/{{notificationId}}/read",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"{{notificationId}}",
										"read"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete Notification",
					"item": [
						{
							"name": "Delete Notification - Success",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"const bodyText = pm.response.text();",
											"",
											"// --- Check status code ---",
											"pm.test(\"Status code is 200 (OK)\", function () {",
											"    pm.expect(statusCode).to.eql(200);",
											"});",
											"",
											"// --- Check response body is an empty JSON object ---",
											"pm.test(\"Response body is an empty JSON object ({})\", function () {",
											"    // Verifica que √© JSON v√°lido",
											"    let jsonData;",
											"    try {",
											"        jsonData = pm.response.json();",
											"    } catch (e) {",
											"        throw new Error(\"Response is not valid JSON\");",
											"    }",
											"",
											"    // Verifica que √© um objeto vazio",
											"    pm.expect(jsonData).to.be.an(\"object\").that.is.empty;",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/{{notificationId}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"{{notificationId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get All Notifications (User Carlos) - Verify Deletion",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const statusCode = pm.response.code;",
											"const bodyText = pm.response.text();",
											"let jsonData;",
											"",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = null;",
											"}",
											"",
											"pm.test(\"Status code is 200 (OK)\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Response is an array\", function () {",
											"    pm.expect(jsonData).to.be.an('array');",
											"});",
											"",
											"pm.test(\"Response is an empty array (no notifications)\", function () {",
											"    pm.expect(jsonData).to.have.lengthOf(0);",
											"});",
											"",
											"console.log(\"‚úÖ Confirmed: No notifications remain after deletion\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Notification - Invalid ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404 (Not Found)\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body contains error message\", function () {",
											"    const bodyText = pm.response.text();",
											"    pm.expect(bodyText).to.include(\"Notification not found\");",
											"});",
											"",
											"console.warn(\"Expected 404: Invalid notification ID\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/non-existent-id-99999",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"non-existent-id-99999"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Notification - Empty ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 (Bad Request)\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Validation error: 'id field is required'\", function () {",
											"    pm.expect(jsonData.errors).to.have.property('id');",
											"    pm.expect(jsonData.errors.id[0]).to.include(\"The id field is required\");",
											"});",
											"",
											"console.log(\"‚úÖ Validation error caught correctly\");"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/ ",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										" "
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Notification - Without Auth",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 (Unauthorized)\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"console.warn(\"Expected 401: Request without authentication\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications/{{notificationId}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications",
										"{{notificationId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Ownership Activity Notification",
					"item": [
						{
							"name": "Aprova√ß√£o de Ownership",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response contains ownership request object\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an(\"object\");\r",
											"\r",
											"    pm.expect(jsonData).to.have.property(\"id\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalId\");\r",
											"    pm.expect(jsonData).to.have.property(\"animalName\");\r",
											"    pm.expect(jsonData).to.have.property(\"userId\");\r",
											"    pm.expect(jsonData).to.have.property(\"userName\");\r",
											"    pm.expect(jsonData).to.have.property(\"amount\");\r",
											"    pm.expect(jsonData).to.have.property(\"status\").that.equals(\"Approved\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestInfo\");\r",
											"    pm.expect(jsonData).to.have.property(\"requestedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"approvedAt\");\r",
											"    pm.expect(jsonData).to.have.property(\"updatedAt\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{url}}/api/ownershiprequests/approve/{{ownershipRequestId}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"ownershiprequests",
										"approve",
										"{{ownershipRequestId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Activity",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201 Created\", () => {\r",
											"    pm.response.to.have.status(201);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is JSON\", () => {\r",
											"    pm.response.to.be.json;\r",
											"});\r",
											"\r",
											"pm.test(\"Activity was created successfully\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    // Valida estrutura b√°sica\r",
											"    pm.expect(body).to.have.property('id');\r",
											"    pm.expect(body).to.have.property('animalId');\r",
											"    pm.expect(body).to.have.property('userId');\r",
											"    pm.expect(body).to.have.property('startDate');\r",
											"    pm.expect(body).to.have.property('endDate');\r",
											"    pm.expect(body).to.have.property('createdAt');\r",
											"});\r",
											"\r",
											"pm.test(\"Activity has correct type and status\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    pm.expect(body.type).to.equal('Ownership');\r",
											"    pm.expect(body.status).to.equal('Active');\r",
											"});\r",
											"\r",
											"pm.test(\"Activity contains animal and user information\", () => {\r",
											"    const body = pm.response.json();\r",
											"    \r",
											"    pm.expect(body).to.have.property('animalName');\r",
											"    pm.expect(body).to.have.property('userName');\r",
											"    pm.expect(body.animalName).to.be.a('string').that.is.not.empty;\r",
											"    pm.expect(body.userName).to.be.a('string').that.is.not.empty;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"animalId\": \"f055cc31-fdeb-4c65-bb73-4f558f67dd5d\",\r\n  \"startDate\": \"2026-11-20T10:00:00Z\",\r\n  \"endDate\": \"2026-11-20T11:00:00Z\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/activities/ownership",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"ownership"
									]
								}
							},
							"response": []
						},
						{
							"name": "AdminCAA Get Notifications -  Must Return Activity Notification",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200 (OK)\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"const jsonData = pm.response.json();\r",
											"\r",
											"pm.test(\"Response contains notifications array\", function () {\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"});\r",
											"\r",
											"if (jsonData.length > 0) {\r",
											"    pm.test(\"AdminCAA has NEW_AC_REQUEST notification\", function () {\r",
											"        const hasNotification = jsonData.some(n => n.type === 'NEW_OWNERSHIP_ACTIVITY');\r",
											"        pm.expect(hasNotification).to.be.true;\r",
											"    });\r",
											"    \r",
											"    console.log(\"‚úÖ AdminCAA received \" + jsonData.length + \" notification(s)\");\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_adminCAA}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/notifications",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"notifications"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Scheduling",
			"item": [
				{
					"name": "Get Animal Schedule",
					"item": [
						{
							"name": "Auth - Login Diana",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Save access token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"accessToken_user\", jsonData.accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"diana@test.com\",\n  \"password\": \"Pa$$w0rd\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Week1 - Animal3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
											"",
											"const json = pm.response.json();",
											"const schedule = json.days;",
											"",
											"pm.test(\"Has 7 days\", () => pm.expect(schedule).to.have.lengthOf(7));",
											"",
											"// 2025-11-03 (Mon) - empty",
											"pm.test(\"Mon: no slots\", () => {",
											"    pm.expect(schedule[0].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].unavailableSlots).to.have.lengthOf(0);",
											"});",
											"",
											"// 2025-11-04 (Tue) unavShort 12:00-13:00",
											"pm.test(\"Tue: 1 reserved + 1 unavailable\", () => {",
											"    pm.expect(schedule[1].availableSlots).to.have.lengthOf(2);",
											"    pm.expect(schedule[1].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[1].unavailableSlots[0].start).to.include('12:00');",
											"    pm.expect(schedule[1].unavailableSlots[0].end).to.include('13:00');",
											"    pm.expect(schedule[1].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[1].availableSlots[0].end).to.include('12:00');",
											"    pm.expect(schedule[1].availableSlots[1].start).to.include('13:00');",
											"    pm.expect(schedule[1].availableSlots[1].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-05 (Wed) - unavHalfDay 09:00-14:00",
											"pm.test(\"Wed: half day unavailable\", () => {",
											"    pm.expect(schedule[2].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[2].unavailableSlots[0].end).to.include('14:00');",
											"    pm.expect(schedule[2].availableSlots[0].start).to.include('14:00');",
											"    pm.expect(schedule[2].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-06 (Thu) - unavFullDay 09:00-18:00",
											"pm.test(\"Thu: full day unavailable\", () => {",
											"    pm.expect(schedule[3].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[3].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].reservedSlots).to.have.lengthOf(0);",
											"});",
											"",
											"// 2025-11-07 (Fri) - avFullDay 09:00-18:00",
											"pm.test(\"Thu: full day available\", () => {",
											"    pm.expect(schedule[4].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[4].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[4].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-08 (Sat) - reservation 07:00-10:00",
											"pm.test(\"Sat: full day available\", () => {",
											"    pm.expect(schedule[5].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].reservedSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].reservedSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[5].reservedSlots[0].end).to.include('10:00');",
											"    pm.expect(schedule[5].availableSlots[0].start).to.include('10:00');",
											"    pm.expect(schedule[5].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-07 (Sun) - avFullDay 09:00-18:00",
											"pm.test(\"Sun: full day available\", () => {",
											"    pm.expect(schedule[6].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[6].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[6].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/schedule/weekly?startDate=2025-11-03",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-03"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Week2 - Animal3",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
											"",
											"const json = pm.response.json();",
											"const schedule = json.days;",
											"",
											"pm.test(\"Has 7 days\", () => pm.expect(schedule).to.have.lengthOf(7));",
											"",
											"// 2025-11-10 (Mon) ",
											"pm.test(\"Mon: 1 unavailable, 1 available\", () => {",
											"    pm.expect(schedule[0].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[0].unavailableSlots[0].end).to.include('10:00');",
											"    pm.expect(schedule[0].availableSlots[0].start).to.include('10:00');",
											"    pm.expect(schedule[0].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-11 (Tue)",
											"pm.test(\"Tue: 1 available\", () => {",
											"    pm.expect(schedule[1].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[1].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[1].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-12 (Wed)",
											"pm.test(\"Wed: Unavailable exact shelter time\", () => {",
											"    pm.expect(schedule[2].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[2].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-13 (Thu)",
											"pm.test(\"Thu: full day available (1 unavailable after hours)\", () => {",
											"    pm.expect(schedule[3].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[3].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[3].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-14 (Fri)",
											"pm.test(\"Fri: 1 reserve, 2 available\", () => {",
											"    pm.expect(schedule[4].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots).to.have.lengthOf(2);",
											"    pm.expect(schedule[4].reservedSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[4].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[4].availableSlots[0].end).to.include('11:00');",
											"    pm.expect(schedule[4].availableSlots[1].start).to.include('11:15');",
											"    pm.expect(schedule[4].availableSlots[1].end).to.include('18:00');",
											"    pm.expect(schedule[4].reservedSlots[0].start).to.include('11:00');",
											"    pm.expect(schedule[4].reservedSlots[0].end).to.include('11:15');",
											"});",
											"",
											"// 2025-11-15 (Sat)",
											"pm.test(\"Sat: 1 reserve, 2 available\", () => {",
											"    pm.expect(schedule[5].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].availableSlots).to.have.lengthOf(2);",
											"    pm.expect(schedule[5].reservedSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[5].availableSlots[0].end).to.include('11:00');",
											"    pm.expect(schedule[5].availableSlots[1].start).to.include('13:00');",
											"    pm.expect(schedule[5].availableSlots[1].end).to.include('18:00');",
											"    pm.expect(schedule[5].reservedSlots[0].start).to.include('11:00');",
											"    pm.expect(schedule[5].reservedSlots[0].end).to.include('13:00');",
											"});",
											"",
											"// 2025-11-16 (Sun)",
											"pm.test(\"Sun: full day available\", () => {",
											"    pm.expect(schedule[6].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[6].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[6].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/schedule/weekly?startDate=2025-11-10",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-10"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Week3 - Animal3",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
											"",
											"const json = pm.response.json();",
											"const schedule = json.days;",
											"",
											"pm.test(\"Has 7 days\", () => pm.expect(schedule).to.have.lengthOf(7));",
											"",
											"// 2025-11-17 (Mon) ",
											"pm.test(\"Mon: unavailable\", () => {",
											"    pm.expect(schedule[0].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[0].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-18 (Tue)",
											"pm.test(\"Tue: Unavailable\", () => {",
											"    pm.expect(schedule[1].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[1].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[1].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-19 (Wed)",
											"pm.test(\"Wed: Unavailable\", () => {",
											"    pm.expect(schedule[2].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[2].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-20 (Thu)",
											"pm.test(\"Thu: available\", () => {",
											"    pm.expect(schedule[3].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[3].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[3].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-21 (Fri)",
											"pm.test(\"Fri: available\", () => {",
											"    pm.expect(schedule[4].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[4].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[4].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-22 (Sat)",
											"pm.test(\"Sat: available\", () => {",
											"    pm.expect(schedule[5].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[5].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-23 (Sun)",
											"pm.test(\"Sun: available\", () => {",
											"    pm.expect(schedule[6].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[6].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[6].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd3b/schedule/weekly?startDate=2025-11-17",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd3b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-17"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Week1 - Animal4",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
											"",
											"const json = pm.response.json();",
											"const schedule = json.days;",
											"",
											"pm.test(\"Has 7 days\", () => pm.expect(schedule).to.have.lengthOf(7));",
											"",
											"// 2025-11-03 (Mon) ",
											"pm.test(\"Mon: available\", () => {",
											"    pm.expect(schedule[0].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[0].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-04 (Tue)",
											"pm.test(\"Tue: 2 available, 1 unavailable\", () => {",
											"    pm.expect(schedule[1].availableSlots).to.have.lengthOf(2);",
											"    pm.expect(schedule[1].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[1].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[1].availableSlots[0].end).to.include('12:00');",
											"    pm.expect(schedule[1].unavailableSlots[0].start).to.include('12:00');",
											"    pm.expect(schedule[1].unavailableSlots[0].end).to.include('13:00');",
											"    pm.expect(schedule[1].availableSlots[1].start).to.include('13:00');",
											"    pm.expect(schedule[1].availableSlots[1].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-05 (Wed)",
											"pm.test(\"Wed: 1 available, 1 unavailable\", () => {",
											"    pm.expect(schedule[2].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[2].unavailableSlots[0].end).to.include('14:00');",
											"    pm.expect(schedule[2].availableSlots[0].start).to.include('14:00');",
											"    pm.expect(schedule[2].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-06 (Thu)",
											"pm.test(\"Thu: unavailable\", () => {",
											"    pm.expect(schedule[3].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[3].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[3].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-07 (Fri)",
											"pm.test(\"Fri: Available\", () => {",
											"    pm.expect(schedule[4].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[4].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[4].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-08 (Sat)",
											"pm.test(\"Sat: 1 reserve, 1 available\", () => {",
											"    pm.expect(schedule[5].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].reservedSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[5].availableSlots[0].end).to.include('17:00');",
											"    pm.expect(schedule[5].reservedSlots[0].start).to.include('17:00');",
											"    pm.expect(schedule[5].reservedSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-09 (Sun)",
											"pm.test(\"Sun: full day available\", () => {",
											"    pm.expect(schedule[6].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[6].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[6].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b/schedule/weekly?startDate=2025-11-03",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-03"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Week2 - Animal4",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
											"",
											"const json = pm.response.json();",
											"const schedule = json.days;",
											"",
											"pm.test(\"Has 7 days\", () => pm.expect(schedule).to.have.lengthOf(7));",
											"",
											"// 2025-11-10 (Mon)",
											"pm.test(\"Mon: 1 available (10:00‚Äì18:00), 1 unavailable (09:00‚Äì10:00)\", () => {",
											"    pm.expect(schedule[0].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[0].unavailableSlots[0].end).to.include('10:00');",
											"    pm.expect(schedule[0].availableSlots[0].start).to.include('10:00');",
											"    pm.expect(schedule[0].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-11 (Tue)",
											"pm.test(\"Tue: full day available\", () => {",
											"    pm.expect(schedule[1].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[1].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[1].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-12 (Wed)",
											"pm.test(\"Wed: full day unavailable\", () => {",
											"    pm.expect(schedule[2].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[2].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-13 (Thu)",
											"pm.test(\"Thu: full day available\", () => {",
											"    pm.expect(schedule[3].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[3].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[3].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-14 (Fri)",
											"pm.test(\"Fri: 2 available (09:00‚Äì14:30, 14:45‚Äì18:00), 1 reserved (14:30‚Äì14:45)\", () => {",
											"    pm.expect(schedule[4].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].reservedSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[4].availableSlots).to.have.lengthOf(2);",
											"    pm.expect(schedule[4].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[4].availableSlots[0].end).to.include('14:30');",
											"    pm.expect(schedule[4].reservedSlots[0].start).to.include('14:30');",
											"    pm.expect(schedule[4].reservedSlots[0].end).to.include('14:45');",
											"    pm.expect(schedule[4].availableSlots[1].start).to.include('14:45');",
											"    pm.expect(schedule[4].availableSlots[1].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-15 (Sat)",
											"pm.test(\"Sat: full day available\", () => {",
											"    pm.expect(schedule[5].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[5].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-16 (Sun)",
											"pm.test(\"Sun: 2 available (09:00‚Äì15:00, 16:00‚Äì18:00), 1 reserved (15:00‚Äì16:00)\", () => {",
											"    pm.expect(schedule[6].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].reservedSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[6].availableSlots).to.have.lengthOf(2);",
											"    pm.expect(schedule[6].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[6].availableSlots[0].end).to.include('15:00');",
											"    pm.expect(schedule[6].reservedSlots[0].start).to.include('15:00');",
											"    pm.expect(schedule[6].reservedSlots[0].end).to.include('16:00');",
											"    pm.expect(schedule[6].availableSlots[1].start).to.include('16:00');",
											"    pm.expect(schedule[6].availableSlots[1].end).to.include('18:00');",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b/schedule/weekly?startDate=2025-11-10",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-10"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Week3 - Animal4",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 200\", () => pm.response.to.have.status(200));",
											"",
											"const json = pm.response.json();",
											"const schedule = json.days;",
											"",
											"pm.test(\"Has 7 days\", () => pm.expect(schedule).to.have.lengthOf(7));",
											"",
											"// 2025-11-17 (Mon)",
											"pm.test(\"Mon: full day unavailable\", () => {",
											"    pm.expect(schedule[0].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[0].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[0].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[0].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-18 (Tue)",
											"pm.test(\"Tue: full day unavailable\", () => {",
											"    pm.expect(schedule[1].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[1].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[1].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[1].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-19 (Wed)",
											"pm.test(\"Wed: full day unavailable\", () => {",
											"    pm.expect(schedule[2].availableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[2].unavailableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[2].unavailableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[2].unavailableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-20 (Thu)",
											"pm.test(\"Thu: full day available\", () => {",
											"    pm.expect(schedule[3].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[3].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[3].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[3].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-21 (Fri)",
											"pm.test(\"Fri: full day available\", () => {",
											"    pm.expect(schedule[4].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[4].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[4].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[4].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-22 (Sat)",
											"pm.test(\"Sat: full day available\", () => {",
											"    pm.expect(schedule[5].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[5].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[5].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[5].availableSlots[0].end).to.include('18:00');",
											"});",
											"",
											"// 2025-11-23 (Sun)",
											"pm.test(\"Sun: full day available\", () => {",
											"    pm.expect(schedule[6].unavailableSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].reservedSlots).to.have.lengthOf(0);",
											"    pm.expect(schedule[6].availableSlots).to.have.lengthOf(1);",
											"    pm.expect(schedule[6].availableSlots[0].start).to.include('09:00');",
											"    pm.expect(schedule[6].availableSlots[0].end).to.include('18:00');",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken_user}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4b/schedule/weekly?startDate=2025-11-17",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-17"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Error - User Without Fostering",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"    url: pm.environment.get('url') + '/api/login',",
											"    method: 'POST',",
											"    header: {'Content-Type': 'application/json'},",
											"    body: {mode: 'raw', raw: JSON.stringify({email: 'eduardo@test.com', password: 'Pa$$w0rd'})}",
											"}, (err, res) => {",
											"    pm.environment.set('accessToken_user', res.json().accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 409 Conflict\", () => {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											"pm.test(\"Error message\", () => {",
											"    const text = pm.response.text();",
											"    pm.expect(text).to.include('not fostered');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/schedule/weekly?startDate=2025-11-03",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-03"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Error - Invalid Animal ID",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"    url: pm.environment.get('url') + '/api/login',",
											"    method: 'POST',",
											"    header: {'Content-Type': 'application/json'},",
											"    body: {mode: 'raw', raw: JSON.stringify({email: 'diana@test.com', password: 'Pa$$w0rd'})}",
											"}, (err, res) => {",
											"    pm.environment.set('accessToken_user', res.json().accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 400 Bad Request\", () => {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message contains AnimalId\", () => {",
											"    const json = pm.response.json();",
											"    pm.expect(json.errors).to.have.property(\"AnimalId\");",
											"    pm.expect(json.errors.AnimalId[0]).to.include(\"valid GUID\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/invalidAnimalId/schedule/weekly?startDate=2025-11-03",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"invalidAnimalId",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-03"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Error - Animal Not Found",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"    url: pm.environment.get('url') + '/api/login',",
											"    method: 'POST',",
											"    header: {'Content-Type': 'application/json'},",
											"    body: {mode: 'raw', raw: JSON.stringify({email: 'diana@test.com', password: 'Pa$$w0rd'})}",
											"}, (err, res) => {",
											"    pm.environment.set('accessToken_user', res.json().accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 404 Not Found\", () => {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Error message contains Not Found\", () => {",
											"    const text = pm.response.text();",
											"    pm.expect(text).to.include(\"not found\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd4c/schedule/weekly?startDate=2025-11-03",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd4c",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-03"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Error - Invalid StartDate (not Monday)",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"    url: pm.environment.get('url') + '/api/login',",
											"    method: 'POST',",
											"    header: {'Content-Type': 'application/json'},",
											"    body: {mode: 'raw', raw: JSON.stringify({email: 'diana@test.com', password: 'Pa$$w0rd'})}",
											"}, (err, res) => {",
											"    pm.environment.set('accessToken_user', res.json().accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 400 Bad Request\", () => {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message about Monday\", () => {",
											"    const json = pm.response.json();",
											"    pm.expect(json.errors.StartDate[0]).to.include('Monday');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/schedule/weekly?startDate=2025-11-04",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-11-04"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Error - StartDate in Invalid Range",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"    url: pm.environment.get('url') + '/api/login',",
											"    method: 'POST',",
											"    header: {'Content-Type': 'application/json'},",
											"    body: {mode: 'raw', raw: JSON.stringify({email: 'diana@test.com', password: 'Pa$$w0rd'})}",
											"}, (err, res) => {",
											"    pm.environment.set('accessToken_user', res.json().accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 400 Bad Request\", () => {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message invalid date range\", () => {",
											"    const json = pm.response.json();",
											"    pm.expect(json.errors.StartDate[0]).to.include('Start date must be within the last month and the next year');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/schedule/weekly?startDate=2025-01-06",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"schedule",
										"weekly"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-06"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Error - No StartDate",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"    url: pm.environment.get('url') + '/api/login',",
											"    method: 'POST',",
											"    header: {'Content-Type': 'application/json'},",
											"    body: {mode: 'raw', raw: JSON.stringify({email: 'diana@test.com', password: 'Pa$$w0rd'})}",
											"}, (err, res) => {",
											"    pm.environment.set('accessToken_user', res.json().accessToken);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status 400 Bad Request\", () => {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message No StartDate\", () => {",
											"    const json = pm.response.json();",
											"    pm.expect(json.errors.StartDate[0]).to.include('Start date is required');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken_user}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/schedule/animals/f055cc31-fdeb-4c65-bb73-4f558f67dd1b/schedule/weekly",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"schedule",
										"animals",
										"f055cc31-fdeb-4c65-bb73-4f558f67dd1b",
										"schedule",
										"weekly"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Cancel Foster Activity",
			"item": [
				{
					"name": "Setup",
					"item": [
						{
							"name": "Login Foster User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Login successful\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// === ‚úÖ Parse JSON Response ===",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = {};",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
											"}",
											"",
											"// === ‚úÖ Save the correct token ===",
											"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
											"if (token) {",
											"    pm.environment.set(\"fosterToken\", token);",
											"    console.log(\"‚úÖ Token guardado:\", token);",
											"} else {",
											"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
											"}",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"cancel-foster@test.com\",\n  \"password\": \"Pa$$w0rd\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Other User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Login successful\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// === ‚úÖ Parse JSON Response ===",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = {};",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
											"}",
											"",
											"// === ‚úÖ Save the correct token ===",
											"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
											"if (token) {",
											"    pm.environment.set(\"otherToken\", token);",
											"    console.log(\"‚úÖ Token guardado:\", token);",
											"} else {",
											"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
											"}",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"other-cancel@test.com\",\n  \"password\": \"Pa$$w0rd\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Success Cases",
					"item": [
						{
							"name": "Cancel Valid Foster Activity",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Response has correct structure\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.have.property('activityId');",
											"    pm.expect(jsonData).to.have.property('message');",
											"});",
											"",
											"pm.test(\"Activity ID matches\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.activityId).to.eql('d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d');",
											"});",
											"",
											"pm.test(\"Success message is correct\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.message).to.eql('Visit cancelled successfully');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Validation Failures",
					"item": [
						{
							"name": "Invalid ActivityId Format",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message indicates validation failure\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors).to.exist;",
											"    pm.expect(JSON.stringify(jsonData.errors)).to.include('GUID');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"invalid-id\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/invalid-id/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"invalid-id",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Missing Required Fields",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Validation errors present\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors).to.exist;",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/00000000-0000-0000-0000-000000000000/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"00000000-0000-0000-0000-000000000000",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Not Found Failures",
					"item": [
						{
							"name": "Activity Not Found",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Error message is 'Activity not found'\", function () {",
											"     pm.expect(pm.response.text()).to.include(\"Activity not found\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"00000000-0000-0000-0000-000000000000\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/00000000-0000-0000-0000-000000000000/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"00000000-0000-0000-0000-000000000000",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Forbidden Failures",
					"item": [
						{
							"name": "Activity Not Belonging To User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});",
											"",
											"pm.test(\"Error message indicates not authorized\", function () {",
											"     pm.expect(pm.response.text()).to.include(\"You are not authorized to cancel this activity\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"e1c2d3e4-f5a6-4b7c-8d9e-0f1a2b3c4d5e\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/e1c2d3e4-f5a6-4b7c-8d9e-0f1a2b3c4d5e/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"e1c2d3e4-f5a6-4b7c-8d9e-0f1a2b3c4d5e",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "No Active Fostering Relationship",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403\", function () {",
											"    pm.response.to.have.status(403);",
											"});",
											"",
											"pm.test(\"Error message indicates no active fostering\", function () {",
											"     pm.expect(pm.response.text()).to.include(\"You no longer have an active fostering relationship with this animal\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"c5a6b7c8-d9e0-4f1a-2b3c-4d5e6f7a8b9c\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/c5a6b7c8-d9e0-4f1a-2b3c-4d5e6f7a8b9c/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"c5a6b7c8-d9e0-4f1a-2b3c-4d5e6f7a8b9c",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Bad Request Failures",
					"item": [
						{
							"name": "Activity Not Fostering Type",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error indicates only fostering activities\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Only fostering activities can be cancelled through this endpoint\")",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"d6b7c8d9-e0f1-4a2b-3c4d-5e6f7a8b9c0d\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/d6b7c8d9-e0f1-4a2b-3c4d-5e6f7a8b9c0d/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"d6b7c8d9-e0f1-4a2b-3c4d-5e6f7a8b9c0d",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activity Already Cancelled",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error indicates already cancelled\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Cannot cancel an activity with status 'Cancelled'. Only active activities can be cancelled.\")",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"f2d3e4f5-a6b7-4c8d-9e0f-1a2b3c4d5e6f\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/f2d3e4f5-a6b7-4c8d-9e0f-1a2b3c4d5e6f/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"f2d3e4f5-a6b7-4c8d-9e0f-1a2b3c4d5e6f",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activity Already Completed",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error indicates already completed\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Cannot cancel an activity with status 'Completed'. Only active activities can be cancelled.\")",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"a3e4f5a6-b7c8-4d9e-0f1a-2b3c4d5e6f7a\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/a3e4f5a6-b7c8-4d9e-0f1a-2b3c4d5e6f7a/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"a3e4f5a6-b7c8-4d9e-0f1a-2b3c4d5e6f7a",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Slot Already Available",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error indicates slot status\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Cannot cancel a slot with status 'Available'. Only reserved slots can be cancelled.\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"e7c8d9e0-f1a2-4b3c-4d5e-6f7a8b9c0d1e\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/e7c8d9e0-f1a2-4b3c-4d5e-6f7a8b9c0d1e/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"e7c8d9e0-f1a2-4b3c-4d5e-6f7a8b9c0d1e",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activity Already Started",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error indicates already started\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Cannot cancel an activity that has already started or passed\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"b4f5a6b7-c8d9-4e0f-1a2b-3c4d5e6f7a8b\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/b4f5a6b7-c8d9-4e0f-1a2b-3c4d5e6f7a8b/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"b4f5a6b7-c8d9-4e0f-1a2b-3c4d5e6f7a8b",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Authorization Tests",
					"item": [
						{
							"name": "No Authorization Token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d",
										"cancel"
									]
								}
							},
							"response": []
						},
						{
							"name": "Invalid Token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer invalid_token_here"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activityId\": \"d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity/d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d/cancel",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity",
										"d0b1c2d3-e4f5-4a6b-7c8d-9e0f1a2b3c4d",
										"cancel"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Create Foster Activity",
			"item": [
				{
					"name": "Setup",
					"item": [
						{
							"name": "Login Foster User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Login successful\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// Calculate two days from now (24h+ in advance)",
											"const twoDaysFromNow = new Date();",
											"twoDaysFromNow.setDate(twoDaysFromNow.getDate() + 2);",
											"twoDaysFromNow.setHours(0, 0, 0, 0);",
											"pm.collectionVariables.set(\"twoDaysFromNow\", twoDaysFromNow.toISOString());",
											"",
											"// === ‚úÖ Parse JSON Response ===",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = {};",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
											"}",
											"",
											"// === ‚úÖ Save the correct token ===",
											"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
											"if (token) {",
											"    pm.environment.set(\"fosterToken\", token);",
											"    console.log(\"‚úÖ Token guardado:\", token);",
											"} else {",
											"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
											"}",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"foster@test.com\",\n  \"password\": \"Pa$$w0rd\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "Login Regular User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Login successful\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// === ‚úÖ Parse JSON Response ===",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = {};",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
											"}",
											"",
											"// === ‚úÖ Save the correct token ===",
											"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
											"if (token) {",
											"    pm.environment.set(\"regularToken\", token);",
											"    console.log(\"‚úÖ Token guardado:\", token);",
											"} else {",
											"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
											"}",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"regular@test.com\",\n  \"password\": \"Pa$$w0rd\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Success Cases",
					"item": [
						{
							"name": "Create Valid Foster Activity",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"Response has correct structure\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.have.property('activitySlotId');",
											"    pm.expect(jsonData).to.have.property('activityId');",
											"    pm.expect(jsonData).to.have.property('startDateTime');",
											"    pm.expect(jsonData).to.have.property('endDateTime');",
											"    pm.expect(jsonData).to.have.property('animal');",
											"    pm.expect(jsonData).to.have.property('shelter');",
											"    pm.expect(jsonData).to.have.property('message');",
											"});",
											"",
											"pm.test(\"Animal data is correct\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.animal.id).to.eql('e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b');",
											"    pm.expect(jsonData.animal.name).to.eql('Rex');",
											"    pm.expect(jsonData.animal).to.have.property('principalImageUrl');",
											"});",
											"",
											"pm.test(\"Shelter data is correct\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.shelter.name).to.eql('Test Shelter Porto');",
											"    pm.expect(jsonData.shelter).to.have.property('address');",
											"    pm.expect(jsonData.shelter.openingTime).to.exist;",
											"    pm.expect(jsonData.shelter.closingTime).to.exist;",
											"});",
											"",
											"pm.test(\"Times are within shelter hours\", function () {",
											"    var jsonData = pm.response.json();",
											"    var start = new Date(jsonData.startDateTime);",
											"    var end = new Date(jsonData.endDateTime);",
											"    pm.expect(start.getUTCHours()).to.be.at.least(9);",
											"    pm.expect(end.getUTCHours()).to.be.at.most(18);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Another Valid Activity Different Times",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"Response structure is valid\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.have.property('activitySlotId');",
											"    pm.expect(jsonData).to.have.property('activityId');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(16, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(17, 30, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime2', start.toISOString());",
											"pm.collectionVariables.set('testEndTime2', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"f6a7b8c9-d0e1-4f0a-3b4c-5d6e7f8a9b0c\",\n  \"startDateTime\": \"{{testStartTime2}}\",\n  \"endDateTime\": \"{{testEndTime2}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Validation Failures",
					"item": [
						{
							"name": "Invalid AnimalId Format",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message indicates validation failure\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors).to.exist;",
											"    pm.expect(JSON.stringify(jsonData.errors)).to.include('GUID');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"invalid-id\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Missing Required Fields",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Validation errors present\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.errors).to.exist;",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Less than 24h in Advance",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 or 422\", function () {",
											"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
											"});",
											"",
											"pm.test(\"Error message indicates 24h advance requirement\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.error || JSON.stringify(jsonData.errors)).to.include('24');",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"// Set time to 12 hours from now (less than 24h)",
											"const start = new Date();",
											"start.setHours(start.getHours() + 12);",
											"start.setMinutes(0, 0, 0);",
											"const end = new Date(start);",
											"end.setHours(end.getHours() + 2);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Business Logic Failures",
					"item": [
						{
							"name": "Animal Not Found",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Error message is 'Animal not found'\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Animal not found\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"00000000-0000-0000-0000-000000000000\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "User Not Fostering Animal",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Error message indicates not fostering\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"You are not currently fostering this animal\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{regularToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal State Inactive",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message indicates animal cannot be visited\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Animal cannot be visited\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"a7b8c9d0-e1f2-4a1b-4c5d-6e7f8a9b0c1d\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Animal State Available",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message indicates animal cannot be visited\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Animal cannot be visited\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"b8c9d0e1-f2a3-4b2c-5d6e-7f8a9b0c1d2e\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Time Validation Failures",
					"item": [
						{
							"name": "Start Before Shelter Opening",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 422\", function () {",
											"    pm.response.to.have.status(422);",
											"});",
											"",
											"pm.test(\"Error indicates opening time violation\", function () {",
											" pm.expect(pm.response.text()).to.include(\"Visit cannot start before shelter opening time\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(8, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(10, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "End After Shelter Closing",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 422\", function () {",
											"    pm.response.to.have.status(422);",
											"});",
											"",
											"pm.test(\"Error indicates closing time violation\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Visit cannot end after shelter closing time\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(16, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(19, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Conflict Tests",
					"item": [
						{
							"name": "Shelter Unavailable Overlap",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 409\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											"pm.test(\"Error indicates shelter unavailability\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Shelter is unavailable during the requested time\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(14, 30, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(15, 30, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"f1a2b3c4-d5e6-4f7a-8b9c-0d1e2f3a4b5c\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activity Slot Overlap",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 409\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											"pm.test(\"Error indicates visit conflict\", function () {",
											"     pm.expect(pm.response.text()).to.include(\"The animal has another visit scheduled during this time\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 30, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(11, 30, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"c9d0e1f2-a3b4-4c3d-6e7f-8a9b0c1d2e3f\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Activity Overlap",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 409\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											"pm.test(\"Error indicates activity conflict\", function () {",
											"     pm.expect(pm.response.text()).to.include(\"The animal has another activity scheduled during this time\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(11, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(13, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{fosterToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"d0e1f2a3-b4c5-4d4e-7f8a-9b0c1d2e3f4a\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Authorization Tests",
					"item": [
						{
							"name": "No Authorization Token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "Invalid Token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const twoDaysFromNow = new Date(pm.collectionVariables.get('twoDaysFromNow'));",
											"const start = new Date(twoDaysFromNow);",
											"start.setUTCHours(10, 0, 0, 0);",
											"const end = new Date(twoDaysFromNow);",
											"end.setUTCHours(12, 0, 0, 0);",
											"",
											"pm.collectionVariables.set('testStartTime', start.toISOString());",
											"pm.collectionVariables.set('testEndTime', end.toISOString());"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer invalid_token_here"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"animalId\": \"e5f6a7b8-c9d0-4e9f-2a3b-4c5d6e7f8a9b\",\n  \"startDateTime\": \"{{testStartTime}}\",\n  \"endDateTime\": \"{{testEndTime}}\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/activities/foster-activity",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"foster-activity"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Get Animals Filters",
			"item": [
				{
					"name": "Filtro por Esp√©cie √önica",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"20 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(20);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are dogs\", () => {\r",
									"    pm.expect(json.every(animal => animal.species === \"Dog\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Dog",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Dog"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Esp√©cie Inv√°lida",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", () => {\r",
									"    pm.response.to.have.status(400);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"Validation error on Species\", () => {\r",
									"    pm.expect(json.errors).to.have.property(\"Species\")\r",
									"})\r",
									"\r",
									"pm.test(\"Valid error message\", () => {\r",
									"    pm.expect(json.errors.Species[0]).to.include(\"Species must be one of: Dog, Cat, Bird\")\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Bird",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Bird"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Idade Exata",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"6 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.eql(6);\r",
									"})\r",
									"\r",
									"const now = new Date()\r",
									"\r",
									"function getAge(now, birthDate) {\r",
									"    let age = now.getFullYear() - birthDate.getFullYear();\r",
									"    const hasHadBirthday =\r",
									"        now.getMonth() > birthDate.getMonth() ||\r",
									"        (now.getMonth() === birthDate.getMonth() && now.getDate() >= birthDate.getDate());\r",
									"\r",
									"        if (!hasHadBirthday) {\r",
									"            age--;\r",
									"        }\r",
									"    return age;\r",
									"}\r",
									"\r",
									"pm.test(\"All animals are 3 years old\", () => {\r",
									"    json.forEach(animal => {\r",
									"        const birthDate = new Date(animal.birthDate);\r",
									"\r",
									"        pm.expect(getAge(now, birthDate)).to.eql(3);\r",
									"    })\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?age=3",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "age",
									"value": "3"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Idade Negativa",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", () => {\r",
									"    pm.response.to.have.status(400);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"Validation error for age\", () => {\r",
									"    pm.expect(json.errors).to.have.property(\"Age\");\r",
									"})\r",
									"\r",
									"pm.test(\"Valid Age error message\", () => {\r",
									"    pm.expect(json.errors.Age).to.include(\"Age must be a non-negative number\");\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?age=-1",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "age",
									"value": "-1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Tamanho Small",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"11 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(11);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are Small\", () => {\r",
									"    pm.expect(json.every(animal => animal.size === \"Small\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?size=Small",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "size",
									"value": "Small"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Tamanho Case-Insensitive",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"11 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(11);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are Small\", () => {\r",
									"    pm.expect(json.every(animal => animal.size === \"Small\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?size=SmaLl",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "size",
									"value": "SmaLl"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Sexo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"18 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(18);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are dogs\", () => {\r",
									"    pm.expect(json.every(animal => animal.sex === \"Male\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?sex=Male",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "sex",
									"value": "Male"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Nome Parcial, Case Insensitive",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"4 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(4);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals have \\\"Rex\\\" in their name\", () => {\r",
									"    pm.expect(json.every(animal => animal.name.includes(\"Rex\"))).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?name=rex",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "name",
									"value": "rex"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Nome Exato",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"1 animal is returned\", () => {\r",
									"    pm.expect(json.length).to.equal(1);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are dogs\", () => {\r",
									"    pm.expect(json.every(animal => animal.name.toLowerCase() === \"pipoca\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?name=pipoca",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "name",
									"value": "pipoca"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Nome com 101 Caracteres",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", () => {\r",
									"    pm.response.to.have.status(400);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"Validation error for Name\", () => {\r",
									"    pm.expect(json.errors).to.have.property(\"Name\")\r",
									"})\r",
									"\r",
									"pm.test(\"Valid Error Message\", () => {\r",
									"    pm.expect(json.errors.Name).to.include(\"Name filter must not exceed 100 characters\");\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?name=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@%23$%^%26*()_+-=[]{}|;:',.<>/?`~√ß√á√°√Å√©√â√≠√ç√≥√ì√∫√ö",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "name",
									"value": "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@%23$%^%26*()_+-=[]{}|;:',.<>/?`~√ß√á√°√Å√©√â√≠√ç√≥√ì√∫√ö"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Ra√ßa Parcial - Case Insensitive",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"3 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(3);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals have \\\"retriever\\\" in their Breed name\", () => {\r",
									"    pm.expect(json.every(animal => animal.breed.name.toLowerCase().includes(\"retriever\"))).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?breed=retriever",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "breed",
									"value": "retriever"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Ra√ßa com 101 Caracteres",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", () => {\r",
									"    pm.response.to.have.status(400);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"Validation error for Name\", () => {\r",
									"    pm.expect(json.errors).to.have.property(\"Breed\")\r",
									"})\r",
									"\r",
									"pm.test(\"Valid Error Message\", () => {\r",
									"    pm.expect(json.errors.Breed).to.include(\"Breed filter must not exceed 100 characters\");\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?breed=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@%23$%^%26*()_+-=[]{}|;:',.<>/?`~√ß√á√°√Å√©√â√≠√ç√≥√ì√∫√ö\n",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "breed",
									"value": "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@%23$%^%26*()_+-=[]{}|;:',.<>/?`~√ß√á√°√Å√©√â√≠√ç√≥√ì√∫√ö\n"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro por Nome de Abrigo Parcial",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"5 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(20);\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?shelterName=test",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "shelterName",
									"value": "test"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Combina√ß√£o de 2 Filtros (Species + Size)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"6 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(6);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are small dogs\", () => {\r",
									"    pm.expect(json.every(animal => animal.species === \"Dog\" && animal.size === \"Small\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Dog&size=Small",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Dog"
								},
								{
									"key": "size",
									"value": "Small"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Combina√ß√£o de 3 Filtros (Species + Size + Sex)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"5 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(5);\r",
									"})\r",
									"\r",
									"pm.test(\"All animals are dogs\", () => {\r",
									"    pm.expect(json.every(animal => animal.species === \"Dog\"\r",
									"        && animal.size === \"Small\" && animal.sex === \"Female\")).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Dog&size=Small&sex=Female",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Dog"
								},
								{
									"key": "size",
									"value": "Small"
								},
								{
									"key": "sex",
									"value": "Female"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Combina√ß√£o de Todos os Filtros",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"1 animal is returned\", () => {\r",
									"    pm.expect(json.length).to.equal(1);\r",
									"})\r",
									"\r",
									"pm.test(\"All filters match\", () => {\r",
									"    pm.expect(json.every(animal => animal.species === \"Dog\" &&\r",
									"        animal.size === \"Medium\" &&\r",
									"        animal.age === 5 &&\r",
									"        animal.name.toLowerCase().includes(\"buddy\") &&\r",
									"        animal.breed.name.toLowerCase().includes(\"test\"))).to.be.true;\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Dog&size=medium&age=5&name=Buddy&breed=test&shelterName=Porto",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Dog"
								},
								{
									"key": "size",
									"value": "medium"
								},
								{
									"key": "age",
									"value": "5"
								},
								{
									"key": "name",
									"value": "Buddy"
								},
								{
									"key": "breed",
									"value": "test"
								},
								{
									"key": "shelterName",
									"value": "Porto"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Combina√ß√£o Sem Resultados",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", () => {\r",
									"    pm.response.to.have.status(404);\r",
									"})\r",
									"\r",
									"const text = pm.response.text();\r",
									"\r",
									"pm.test(\"Validate return message\", () => {\r",
									"    pm.expect(text.toLowerCase()).to.include(\"no animals found\");\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Cat&size=Large",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Cat"
								},
								{
									"key": "size",
									"value": "Large"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro + Ordena√ß√£o por Nome",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"4 animals returned\", () => {\r",
									"    pm.expect(json.length).to.equal(4);\r",
									"})\r",
									"\r",
									"pm.test(\"All filters match\", () => {\r",
									"    pm.expect(json.every(animal => animal.species === \"Cat\" &&\r",
									"        animal.sex === \"Female\"\r",
									"        )).to.be.true;\r",
									"})\r",
									"\r",
									"pm.test(\"Animals are sorted by name\", () => {\r",
									"    pm.expect(json).to.deep.equal(json.sort((a, b) => a.name.localeCompare(b.name)));\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=Cat&sortBy=name&order=asc&sex=Female",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": "Cat"
								},
								{
									"key": "sortBy",
									"value": "name"
								},
								{
									"key": "order",
									"value": "asc"
								},
								{
									"key": "sex",
									"value": "Female"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro com String Vazia",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"20 animals are returned\", () => {\r",
									"    pm.expect(json.length).to.equal(20);\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?species=&sortBy=name&order=asc",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "species",
									"value": ""
								},
								{
									"key": "sortBy",
									"value": "name"
								},
								{
									"key": "order",
									"value": "asc"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Filtro com Whitespace",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"1 animal returned\", () => {\r",
									"    pm.expect(json.length).to.equal(1);\r",
									"})\r",
									"\r",
									"pm.test(\"Animal's name includes \\\"Buddy\\\"\", () => {\r",
									"    pm.expect(json[0].name.toLowerCase()).to.include(\"buddy\");\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/animals?name=%20%20Buddy%20%20",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"animals"
							],
							"query": [
								{
									"key": "name",
									"value": "%20%20Buddy%20%20"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get Fostering Activities",
			"item": [
				{
					"name": "Setup",
					"item": [
						{
							"name": "Login as User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"",
											"// ===  Parse JSON Response ===",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = {};",
											"    console.warn(\"‚ö†Ô∏è Response is not valid JSON\");",
											"}",
											"",
											"// ===  Save the correct token ===",
											"let token = jsonData.token || jsonData.accessToken || jsonData.jwt;",
											"if (token) {",
											"    pm.environment.set(\"userToken\", token);",
											"    console.log(\" Token guardado:\", token);",
											"} else {",
											"    console.log(\"‚ö†Ô∏è Token n√£o encontrado na resposta!\");",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"testuser@example.com\",\n  \"password\": \"Test@123\"\n}"
								},
								"url": {
									"raw": "{{url}}/api/login",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"login"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Success Scenarios",
					"item": [
						{
							"name": "Get Fostering Activities - Default Pagination",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Robust tests for array or object-with-items responses",
											"let jsonData;",
											"try {",
											"    jsonData = pm.response.json();",
											"} catch (e) {",
											"    jsonData = undefined;",
											"}",
											"",
											"// Helper: get items array safely from either structure",
											"function getItemsArray(data) {",
											"    if (!data) return [];",
											"    if (Array.isArray(data)) return data;",
											"    if (typeof data === 'object' && Array.isArray(data.items)) return data.items;",
											"    return [];",
											"}",
											"",
											"const items = getItemsArray(jsonData);",
											"const isObjectWithPagination = jsonData && !Array.isArray(jsonData) && typeof jsonData === 'object';",
											"",
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Response has correct structure (array or object with items)\", function () {",
											"    if (Array.isArray(jsonData)) {",
											"        pm.expect(Array.isArray(jsonData)).to.be.true;",
											"    } else if (isObjectWithPagination) {",
											"        pm.expect(jsonData).to.have.property('items');",
											"        pm.expect(jsonData.items).to.be.an('array');",
											"    } else {",
											"        // If neither, fail with clear message",
											"        pm.expect.fail(\"Response is neither an array nor an object with an 'items' array\");",
											"    }",
											"});",
											"",
											"// Pagination structure tests - only when response is an object with those fields",
											"pm.test(\"Pagination fields present when object response\", function () {",
											"    if (isObjectWithPagination) {",
											"        pm.expect(jsonData).to.have.property('currentPage');",
											"        pm.expect(jsonData).to.have.property('pageSize');",
											"        pm.expect(jsonData).to.have.property('totalCount');",
											"        pm.expect(jsonData).to.have.property('totalPages');",
											"    } else {",
											"        pm.test.skip && pm.test.skip();",
											"    }",
											"});",
											"",
											"",
											"pm.test(\"Items are returned (allow empty)\", function () {",
											"    pm.expect(items).to.be.an('array');",
											"    // When pagination object is present, totalCount should match items length if provided, otherwise just ensure array type",
											"    if (isObjectWithPagination && typeof jsonData.totalCount === 'number') {",
											"        pm.expect(jsonData.totalCount).to.be.at.least(0);",
											"    }",
											"});",
											"",
											"pm.test(\"Each item has required properties (first item only, if any)\", function () {",
											"    if (Array.isArray(items) && items.length > 0) {",
											"        const item = items[0];",
											"        pm.expect(item).to.be.an('object');",
											"        pm.expect(item).to.have.property('activityId');",
											"        pm.expect(item).to.have.property('animalName');",
											"        pm.expect(item).to.have.property('animalPrincipalImageUrl');",
											"        pm.expect(item).to.have.property('breedName');",
											"        pm.expect(item).to.have.property('animalAge');",
											"        pm.expect(item).to.have.property('shelterName');",
											"        pm.expect(item).to.have.property('shelterAddress');",
											"        pm.expect(item).to.have.property('shelterOpeningTime');",
											"        pm.expect(item).to.have.property('shelterClosingTime');",
											"        pm.expect(item).to.have.property('visitStartDateTime');",
											"        pm.expect(item).to.have.property('visitEndDateTime');",
											"        pm.expect(item).to.have.property('visitDate');",
											"    } else {",
											"        // No items to validate; treat as pass",
											"        pm.expect(items.length).to.be.a('number');",
											"    }",
											"});",
											"",
											"pm.test(\"Visits are in the future\", function () {",
											"    const now = new Date();",
											"    if (!Array.isArray(items) || items.length === 0) {",
											"        // nothing to validate; treat empty as pass",
											"        pm.expect(true).to.be.true;",
											"        return;",
											"    }",
											"    items.forEach(function (item) {",
											"        // Guard against missing fields",
											"        if (!item || !item.visitStartDateTime) { return; }",
											"        const visitDate = new Date(item.visitStartDateTime);",
											"        pm.expect(visitDate.getTime()).to.be.above(now.getTime());",
											"    });",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Fostering Activities - Custom Pagination (Page 1, Size 5)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// Helper: parse query params from current request URL (handles variable-resolved URL)",
											"function getQueryParams() {",
											"    try {",
											"        // Use the resolved URL if available, else fallback to original",
											"        const urlStr = pm.request.url.toString();",
											"        const query = pm.request.url.query || [];",
											"        const qp = {};",
											"        // Prefer structured query object (covers variables too)",
											"        query.each(function (q) {",
											"            if (!q || !q.key) return;",
											"            qp[q.key] = q.value;",
											"        });",
											"        // As a fallback, parse with URL API (may not resolve variables fully)",
											"        if (Object.keys(qp).length === 0 && urlStr && urlStr.includes('?')) {",
											"            const search = urlStr.split('?')[1];",
											"            search.split('&').forEach(kv => {",
											"                const [k, v] = kv.split('=');",
											"                if (k) qp[decodeURIComponent(k)] = v ? decodeURIComponent(v) : '';",
											"            });",
											"        }",
											"        return qp;",
											"    } catch (e) {",
											"        return {};",
											"    }",
											"}",
											"",
											"function getExpectedPageSize(defaultSize) {",
											"    const qp = getQueryParams();",
											"    const fromQuery = qp.pageSize ? parseInt(qp.pageSize, 10) : undefined;",
											"    return Number.isFinite(fromQuery) ? fromQuery : defaultSize;",
											"}",
											"",
											"function getExpectedPageNumber(defaultNum) {",
											"    const qp = getQueryParams();",
											"    const fromQuery = qp.pageNumber ? parseInt(qp.pageNumber, 10) : undefined;",
											"    return Number.isFinite(fromQuery) ? fromQuery : defaultNum;",
											"}",
											"",
											"let parsed;",
											"let isArray = false;",
											"try {",
											"    parsed = pm.response.json();",
											"    isArray = Array.isArray(parsed);",
											"} catch (e) {",
											"    parsed = null;",
											"}",
											"",
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Custom pagination is applied\", function () {",
											"    if (!parsed) {",
											"        pm.expect.fail(\"Response is not valid JSON, cannot verify pagination.\");",
											"        return;",
											"    }",
											"",
											"    const expectedPage = getExpectedPageNumber(1);",
											"    const expectedSize = getExpectedPageSize(5);",
											"",
											"    if (isArray) {",
											"        // When server returns a plain array, we can't assert currentPage/pageSize fields.",
											"        pm.info.skip = true; // mark as informational skip",
											"        pm.expect(true, \"Response is an array; skipping field assertions for currentPage/pageSize\").to.be.true;",
											"        return;",
											"    }",
											"",
											"    if (parsed && typeof parsed === 'object') {",
											"        if (parsed.currentPage !== undefined) {",
											"            pm.expect(parsed.currentPage).to.equal(expectedPage);",
											"        } else {",
											"            pm.info.skip = true;",
											"            pm.expect(true, \"Missing currentPage; expected \" + expectedPage + \". Skipping assertion.\").to.be.true;",
											"        }",
											"",
											"        const pageSizeToCheck = parsed.pageSize !== undefined ? parsed.pageSize : expectedSize;",
											"        if (parsed.pageSize !== undefined) {",
											"            pm.expect(parsed.pageSize).to.equal(expectedSize);",
											"        } else {",
											"            pm.info.skip = true;",
											"            pm.expect(true, \"Missing pageSize in response; using query value \" + expectedSize + \". Skipping strict equality.\").to.be.true;",
											"        }",
											"    } else {",
											"        pm.info.skip = true;",
											"        pm.expect(true, \"Unexpected response type; skipping pagination assertions\").to.be.true;",
											"    }",
											"});",
											"",
											"pm.test(\"Items count does not exceed page size\", function () {",
											"    if (!parsed) {",
											"        pm.expect.fail(\"Response is not valid JSON, cannot verify items count.\");",
											"        return;",
											"    }",
											"",
											"    const defaultSize = 5; // for this saved request",
											"    const expectedSize = getExpectedPageSize(defaultSize);",
											"",
											"    if (isArray) {",
											"        pm.expect(parsed.length, \"Array length should be <= page size\").to.be.at.most(expectedSize);",
											"        return;",
											"    }",
											"",
											"    if (parsed && typeof parsed === 'object') {",
											"        const items = Array.isArray(parsed.items) ? parsed.items : undefined;",
											"        const sizeToCheck = Number.isFinite(parsed.pageSize) ? parsed.pageSize : expectedSize;",
											"",
											"        if (items) {",
											"            pm.expect(items.length, \"items.length should be <= page size\").to.be.at.most(sizeToCheck);",
											"        } else {",
											"            pm.info.skip = true;",
											"            pm.expect(true, \"Response has no items array; skipping items count assertion\").to.be.true;",
											"        }",
											"    } else {",
											"        pm.info.skip = true;",
											"        pm.expect(true, \"Unexpected response type; skipping items count assertion\").to.be.true;",
											"    }",
											"});",
											"",
											"pm.test(\"Total pages calculated correctly\", function () {",
											"    if (!parsed) {",
											"        pm.expect.fail(\"Response is not valid JSON, cannot verify total pages.\");",
											"        return;",
											"    }",
											"",
											"    if (isArray) {",
											"        // If only an array is returned, we don't have totalCount/pageSize reliably",
											"        pm.info.skip = true;",
											"        pm.expect(true, \"Response is an array; skipping totalPages calculation\").to.be.true;",
											"        return;",
											"    }",
											"",
											"    if (parsed && typeof parsed === 'object') {",
											"        const totalCount = parsed.totalCount;",
											"        const pageSize = Number.isFinite(parsed.pageSize) ? parsed.pageSize : getExpectedPageSize(5);",
											"",
											"        if (Number.isFinite(totalCount) && Number.isFinite(pageSize) && pageSize > 0 && parsed.totalPages !== undefined) {",
											"            const expectedPages = Math.ceil(totalCount / pageSize);",
											"            pm.expect(parsed.totalPages).to.equal(expectedPages);",
											"        } else {",
											"            pm.info.skip = true;",
											"            pm.expect(true, \"Missing fields for totalPages assertion; skipping\").to.be.true;",
											"        }",
											"    } else {",
											"        pm.info.skip = true;",
											"        pm.expect(true, \"Unexpected response type; skipping totalPages assertion\").to.be.true;",
											"    }",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageNumber=1&pageSize=5",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "1"
										},
										{
											"key": "pageSize",
											"value": "5"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Fostering Activities - Max Page Size (50)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Max page size is respected\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.length).to.be.at.most(50);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageNumber=1&pageSize=50",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "1"
										},
										{
											"key": "pageSize",
											"value": "50"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Error Scenarios",
					"item": [
						{
							"name": "Get Fostering Activities - No Authentication",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 401 Unauthorized\", function () {",
											"    pm.response.to.have.status(401);",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Fostering Activities - Invalid Page Number (0)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message mentions page number\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Page number\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageNumber=0&pageSize=10",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "0"
										},
										{
											"key": "pageSize",
											"value": "10"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Fostering Activities - Invalid Page Number (Negative)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message mentions page number\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Page number\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageNumber=-1&pageSize=10",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "-1"
										},
										{
											"key": "pageSize",
											"value": "10"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Fostering Activities - Invalid Page Size (0)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message mentions page size\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Page size\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageNumber=1&pageSize=0",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "1"
										},
										{
											"key": "pageSize",
											"value": "0"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Fostering Activities - Page Size Exceeds Maximum (51)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 400 Bad Request\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Error message mentions page size limit\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"Page size\");",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageNumber=1&pageSize=51",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageNumber",
											"value": "1"
										},
										{
											"key": "pageSize",
											"value": "51"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Business Logic Validation",
					"item": [
						{
							"name": "Verify Only Future Visits Are Returned",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// Robust validation for future visits",
											"(function(){",
											"    let data;",
											"    let parsed;",
											"    try {",
											"        parsed = pm.response.json();",
											"    } catch (e) {",
											"        pm.test(\"Response is valid JSON\", function () {",
											"            pm.expect.fail(\"Response body is not valid JSON: \" + e.message);",
											"        });",
											"        return; // stop further checks",
											"    }",
											"",
											"    // Normalize to array whether root is an array or an object with items",
											"    if (Array.isArray(parsed)) {",
											"        data = parsed;",
											"    } else if (parsed && Array.isArray(parsed.items)) {",
											"        data = parsed.items;",
											"    } else {",
											"        data = [];",
											"    }",
											"",
											"    // Informative test about emptiness that does not fail other tests",
											"    pm.test(\"Visits list is not empty (informative)\", function () {",
											"        pm.expect(Array.isArray(data)).to.be.true;",
											"        if (data.length === 0) {",
											"            pm.expect.fail(\"No visits returned by the API at \" + new Date().toISOString());",
											"        }",
											"    });",
											"",
											"    // Main validation: each visitStartDateTime is in the future (strictly greater than now)",
											"    pm.test(\"All visits are in the future\", function () {",
											"        const now = new Date();",
											"        const nowMs = now.getTime();",
											"",
											"        // If we couldn't detect an array shape, fail with a helpful message",
											"        pm.expect(Array.isArray(data), \"Response is neither an array nor an object with an 'items' array\").to.be.true;",
											"",
											"        data.forEach(function(item, idx){",
											"            const raw = item && item.visitStartDateTime;",
											"            // Missing/invalid date handling",
											"            pm.expect(Boolean(raw), \"Item[\" + idx + \"] is missing visitStartDateTime\").to.be.true;",
											"            if (!raw) { return; }",
											"",
											"            const visitDate = new Date(raw);",
											"            const visitMs = visitDate.getTime();",
											"",
											"            // Check that date parsed successfully",
											"            pm.expect(isFinite(visitMs), \"Item[\" + idx + \"] has invalid visitStartDateTime: '\" + raw + \"'\").to.be.true;",
											"            if (!isFinite(visitMs)) { return; }",
											"",
											"            // Allow equality (not considered in the future)",
											"            const message = \"Item[\" + idx + \"] visitStartDateTime=\" + raw + \" (\" + visitMs + \") should be strictly greater than now=\" + now.toISOString() + \" (\" + nowMs + \")\";",
											"            pm.expect(visitMs, message).to.be.above(nowMs);",
											"        });",
											"    });",
											"})();"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits?pageSize=50",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									],
									"query": [
										{
											"key": "pageSize",
											"value": "50"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Verify Only Fostering Activities Are Returned",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// Robust validation for fostering activities structure",
											"(function () {",
											"    let json;",
											"    pm.test(\"All returned activities are fostering type\", function () {",
											"        // Parse JSON once and handle parse errors gracefully",
											"        try {",
											"            json = pm.response.json();",
											"        } catch (e) {",
											"            pm.expect.fail(\"Response is not valid JSON: \" + e.message);",
											"        }",
											"",
											"        // Determine items array flexibly",
											"        let items = [];",
											"        if (Array.isArray(json)) {",
											"            items = json;",
											"        } else if (json && Array.isArray(json.items)) {",
											"            items = json.items;",
											"        }",
											"",
											"        // Empty response guardrail",
											"        if (!items || items.length === 0) {",
											"            // Consider zero items as a valid case for this test",
											"            pm.expect(items.length, \"Expected zero items to be allowed\").to.eql(0);",
											"            return;",
											"        }",
											"",
											"        // Optional schema check: each item should be an object",
											"        items.forEach(function (item, idx) {",
											"            pm.expect(typeof item, \"Item at index \" + idx + \" should be an object\").to.eql(\"object\");",
											"        });",
											"",
											"        // Field presence checks with clear messages",
											"        items.forEach(function (item, idx) {",
											"            pm.expect(item, \"Item at index \" + idx + \" should not be null/undefined\").to.exist;",
											"            pm.expect(item.animalName, \"Missing animalName at index \" + idx).to.exist;",
											"            pm.expect(item.breedName, \"Missing breedName at index \" + idx).to.exist;",
											"            pm.expect(item.shelterName, \"Missing shelterName at index \" + idx).to.exist;",
											"        });",
											"    });",
											"})();"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									]
								}
							},
							"response": []
						},
						{
							"name": "Verify Data Completeness",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// Ensure response is an array; if not, fail with a helpful message",
											"pm.test(\"Response is an array of items\", function () {",
											"    let data;",
											"    try {",
											"        data = pm.response.json();",
											"    } catch (e) {",
											"        pm.expect.fail(\"Response is not valid JSON: \" + e.message);",
											"    }",
											"    pm.expect(Array.isArray(data), \"Expected response to be an array, got: \" + (data === null ? \"null\" : typeof data)).to.be.true;",
											"});",
											"",
											"pm.test(\"All items have complete shelter information\", function () {",
											"    const data = pm.response.json();",
											"    pm.expect(Array.isArray(data), \"Expected response to be an array\").to.be.true;",
											"",
											"    data.forEach(function(item, idx) {",
											"        pm.expect(item, \"Item at index \" + idx + \" should be an object\").to.be.an(\"object\");",
											"        pm.expect(item.shelterName, \"shelterName at index \" + idx).to.be.a('string').and.not.empty;",
											"        pm.expect(item.shelterAddress, \"shelterAddress at index \" + idx).to.be.a('string').and.not.empty;",
											"        pm.expect(item.shelterOpeningTime, \"shelterOpeningTime at index \" + idx).to.exist;",
											"        pm.expect(item.shelterClosingTime, \"shelterClosingTime at index \" + idx).to.exist;",
											"    });",
											"});",
											"",
											"pm.test(\"All items have complete animal information\", function () {",
											"    const data = pm.response.json();",
											"    pm.expect(Array.isArray(data), \"Expected response to be an array\").to.be.true;",
											"",
											"    data.forEach(function(item, idx) {",
											"        pm.expect(item, \"Item at index \" + idx + \" should be an object\").to.be.an(\"object\");",
											"        pm.expect(item.animalName, \"animalName at index \" + idx).to.be.a('string').and.not.empty;",
											"        pm.expect(item.animalPrincipalImageUrl, \"animalPrincipalImageUrl at index \" + idx).to.be.a('string').and.not.empty;",
											"        pm.expect(item.breedName, \"breedName at index \" + idx).to.be.a('string').and.not.empty;",
											"        pm.expect(item.animalAge, \"animalAge at index \" + idx).to.be.a('number').and.at.least(0);",
											"    });",
											"});",
											"",
											"pm.test(\"All items have valid visit information\", function () {",
											"    const data = pm.response.json();",
											"    pm.expect(Array.isArray(data), \"Expected response to be an array\").to.be.true;",
											"",
											"    data.forEach(function(item, idx) {",
											"        pm.expect(item.visitStartDateTime, \"visitStartDateTime at index \" + idx).to.exist;",
											"        pm.expect(item.visitEndDateTime, \"visitEndDateTime at index \" + idx).to.exist;",
											"        pm.expect(item.visitDate, \"visitDate at index \" + idx).to.exist;",
											"",
											"        // Timezone-safe comparison using Date.parse and validating both",
											"        const startMs = Date.parse(item.visitStartDateTime);",
											"        const endMs = Date.parse(item.visitEndDateTime);",
											"",
											"        if (!isNaN(startMs) && !isNaN(endMs)) {",
											"            pm.expect(endMs, 'Visit end time should be after start time at index ' + idx).to.be.above(startMs);",
											"        } else {",
											"            pm.expect.fail('Invalid datetime format at index ' + idx + ': start=' + item.visitStartDateTime + ', end=' + item.visitEndDateTime);",
											"        }",
											"    });",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{userToken}}"
									}
								],
								"url": {
									"raw": "{{url}}/api/activities/fostering-visits",
									"host": [
										"{{url}}"
									],
									"path": [
										"api",
										"activities",
										"fostering-visits"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"variable": [
		{
			"key": "twoDaysFromNow",
			"value": ""
		},
		{
			"key": "testStartTime",
			"value": ""
		},
		{
			"key": "testEndTime",
			"value": ""
		},
		{
			"key": "testStartTime2",
			"value": ""
		},
		{
			"key": "testEndTime2",
			"value": ""
		}
	]
}